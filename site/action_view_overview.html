<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Action View Overview — Ruby on Rails Guides</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  <link rel="stylesheet" type="text/css" href="stylesheets/highlight.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/search.css" data-turbolinks-track="reload">
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <script src="javascripts/turbolinks.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/clipboard.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/guides.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/search.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/lunr-documents.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/lunr.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/toggle-theme.js" data-turbolinks-track="reload"></script>
  <meta property="og:title" content="Action View Overview — Ruby on Rails Guides" />
  <meta name="description" content="Action View OverviewDepois de ler este guia, você vai saber: O que é Action View e como é utilizada no Rails. A melhor forma de usar templates, partials e layouts. Como utilizar views localizadas." />
  <meta property="og:description" content="Action View OverviewDepois de ler este guia, você vai saber: O que é Action View e como é utilizada no Rails. A melhor forma de usar templates, partials e layouts. Como utilizar views localizadas." />
  <meta property="og:locale" content="pt_BR" />
  <meta property="og:site_name" content="Guia Ruby on Rails" />
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
  <meta property="og:type" content="website" />
</head>
<body class="guide">
  <div>
    <div id="version-badge">v6.1.4</div>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">Veja mais em <a href="https://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        Mais Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://weblog.rubyonrails.org/">Blog</a></li>
        <li class="more-info"><a href="https://guides.rubyonrails.org/">Guia oficial</a></li>
        <li class="more-info"><a href="https://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="https://discuss.rubyonrails.org/">Forum</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">Contribua no GitHub</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Voltar para a página principal">Guiarails.com.br</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-search guides-search-large">
          <input class="search-box search-box-large nav-item" type="text" placeholder="Digite o termo...">
          <div class="search-results"></div>
          <div class="search-spinner">Aguarde...</div>
        </li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">Guias</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
            <dl class="guides-section-container">
                <div class="guides-section">
                  <dt>Comece aqui</dt>
                  <dd><a href="getting_started.html">Começando com Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Models</dt>
                  <dd><a href="active_record_basics.html">Active Record Basics</a></dd>
                  <dd><a href="active_record_migrations.html">Active Record Migrations</a></dd>
                  <dd><a href="active_record_validations.html">Active Record Validations</a></dd>
                  <dd><a href="active_record_callbacks.html">Active Record Callbacks</a></dd>
                  <dd><a href="association_basics.html">Active Record Associations</a></dd>
                  <dd><a href="active_record_querying.html">Active Record Query Interface</a></dd>
                  <dd><a href="active_model_basics.html">Active Model Basics</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Views</dt>
                  <dd><a href="action_view_overview.html">Action View Overview</a></dd>
                  <dd><a href="layouts_and_rendering.html">Layouts and Rendering in Rails</a></dd>
                  <dd><a href="action_view_helpers.html">Action View Helpers</a></dd>
                  <dd><a href="form_helpers.html">Action View Form Helpers</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Controllers</dt>
                  <dd><a href="action_controller_overview.html">Action Controller Overview</a></dd>
                  <dd><a href="routing.html">Rails Routing from the Outside In</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Outros componentes</dt>
                  <dd><a href="active_support_core_extensions.html">Active Support Core Extensions</a></dd>
                  <dd><a href="action_mailer_basics.html">Action Mailer Basics</a></dd>
                  <dd><a href="action_mailbox_basics.html">Action Mailbox Basics</a></dd>
                  <dd><a href="action_text_overview.html">Action Text Overview</a></dd>
                  <dd><a href="active_job_basics.html">Active Job Basics</a></dd>
                  <dd><a href="active_storage_overview.html">Active Storage Overview</a></dd>
                  <dd><a href="action_cable_overview.html">Action Cable Overview</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Indo mais fundo</dt>
                  <dd><a href="i18n.html">Rails Internationalization (I18n) API</a></dd>
                  <dd><a href="testing.html">Testing Rails Applications</a></dd>
                  <dd><a href="security.html">Securing Rails Applications</a></dd>
                  <dd><a href="debugging_rails_applications.html">Debugging Rails Applications</a></dd>
                  <dd><a href="configuring.html">Configuring Rails Applications</a></dd>
                  <dd><a href="command_line.html">The Rails Command Line</a></dd>
                  <dd><a href="asset_pipeline.html">The Asset Pipeline</a></dd>
                  <dd><a href="working_with_javascript_in_rails.html">Working with JavaScript in Rails</a></dd>
                  <dd><a href="initialization.html">The Rails Initialization Process</a></dd>
                  <dd><a href="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants (Zeitwerk Mode)</a></dd>
                  <dd><a href="autoloading_and_reloading_constants_classic_mode.html">Autoloading and Reloading Constants (Classic Mode)</a></dd>
                  <dd><a href="caching_with_rails.html">Caching with Rails: An Overview</a></dd>
                  <dd><a href="active_support_instrumentation.html">Active Support Instrumentation</a></dd>
                  <dd><a href="api_app.html">Using Rails for API-only Applications</a></dd>
                  <dd><a href="active_record_postgresql.html">Active Record and PostgreSQL</a></dd>
                  <dd><a href="active_record_multiple_databases.html">Multiple Databases with Active Record</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Estendendo o Rails</dt>
                  <dd><a href="plugins.html">The Basics of Creating Rails Plugins</a></dd>
                  <dd><a href="rails_on_rack.html">Rails on Rack</a></dd>
                  <dd><a href="generators.html">Creating and Customizing Rails Generators &amp; Templates</a></dd>
                  <dd><a href="engines.html">Getting Started with Engines</a></dd>
                  <dd><a href="threading_and_code_execution.html">Threading and Code Execution in Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Contribuições</dt>
                  <dd><a href="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a></dd>
                  <dd><a href="api_documentation_guidelines.html">API Documentation Guidelines</a></dd>
                  <dd><a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Políticas</dt>
                  <dd><a href="maintenance_policy.html">Maintenance Policy for Ruby on Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Release Notes</dt>
                  <dd><a href="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</a></dd>
                  <dd><a href="6_1_release_notes.html">Version 6.1 - Dezembro 2020</a></dd>
                  <dd><a href="6_0_release_notes.html">Version 6.0 - Agosto 2019</a></dd>
                  <dd><a href="5_2_release_notes.html">Version 5.2 - April 2018</a></dd>
                  <dd><a href="5_1_release_notes.html">Version 5.1 - April 2017</a></dd>
                  <dd><a href="5_0_release_notes.html">Version 5.0 - June 2016</a></dd>
                  <dd><a href="4_2_release_notes.html">Version 4.2 - December 2014</a></dd>
                  <dd><a href="4_1_release_notes.html">Version 4.1 - April 2014</a></dd>
                  <dd><a href="4_0_release_notes.html">Version 4.0 - June 2013</a></dd>
                  <dd><a href="3_2_release_notes.html">Version 3.2 - January 2012</a></dd>
                  <dd><a href="3_1_release_notes.html">Version 3.1 - August 2011</a></dd>
                  <dd><a href="3_0_release_notes.html">Version 3.0 - August 2010</a></dd>
                  <dd><a href="2_3_release_notes.html">Version 2.3 - March 2009</a></dd>
                  <dd><a href="2_2_release_notes.html">Version 2.2 - November 2008</a></dd>
                </div>
            </div>
          </dl>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">Contribua</a></li>
        <li class="guides-search guides-search-small">
          <input class="search-box search-box-small nav-item" type="text" placeholder="Digite o termo...">
          <div class="search-results"></div>
          <div class="search-spinner">Aguarde...</div>
        </li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">Guias</option>
              <optgroup label="Comece aqui">
                  <option value="getting_started.html">Começando com Rails</option>
              </optgroup>
              <optgroup label="Models">
                  <option value="active_record_basics.html">Active Record Basics</option>
                  <option value="active_record_migrations.html">Active Record Migrations</option>
                  <option value="active_record_validations.html">Active Record Validations</option>
                  <option value="active_record_callbacks.html">Active Record Callbacks</option>
                  <option value="association_basics.html">Active Record Associations</option>
                  <option value="active_record_querying.html">Active Record Query Interface</option>
                  <option value="active_model_basics.html">Active Model Basics</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="action_view_overview.html">Action View Overview</option>
                  <option value="layouts_and_rendering.html">Layouts and Rendering in Rails</option>
                  <option value="action_view_helpers.html">Action View Helpers</option>
                  <option value="form_helpers.html">Action View Form Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller Overview</option>
                  <option value="routing.html">Rails Routing from the Outside In</option>
              </optgroup>
              <optgroup label="Outros componentes">
                  <option value="active_support_core_extensions.html">Active Support Core Extensions</option>
                  <option value="action_mailer_basics.html">Action Mailer Basics</option>
                  <option value="action_mailbox_basics.html">Action Mailbox Basics</option>
                  <option value="action_text_overview.html">Action Text Overview</option>
                  <option value="active_job_basics.html">Active Job Basics</option>
                  <option value="active_storage_overview.html">Active Storage Overview</option>
                  <option value="action_cable_overview.html">Action Cable Overview</option>
              </optgroup>
              <optgroup label="Indo mais fundo">
                  <option value="i18n.html">Rails Internationalization (I18n) API</option>
                  <option value="testing.html">Testing Rails Applications</option>
                  <option value="security.html">Securing Rails Applications</option>
                  <option value="debugging_rails_applications.html">Debugging Rails Applications</option>
                  <option value="configuring.html">Configuring Rails Applications</option>
                  <option value="command_line.html">The Rails Command Line</option>
                  <option value="asset_pipeline.html">The Asset Pipeline</option>
                  <option value="working_with_javascript_in_rails.html">Working with JavaScript in Rails</option>
                  <option value="initialization.html">The Rails Initialization Process</option>
                  <option value="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants (Zeitwerk Mode)</option>
                  <option value="autoloading_and_reloading_constants_classic_mode.html">Autoloading and Reloading Constants (Classic Mode)</option>
                  <option value="caching_with_rails.html">Caching with Rails: An Overview</option>
                  <option value="active_support_instrumentation.html">Active Support Instrumentation</option>
                  <option value="api_app.html">Using Rails for API-only Applications</option>
                  <option value="active_record_postgresql.html">Active Record and PostgreSQL</option>
                  <option value="active_record_multiple_databases.html">Multiple Databases with Active Record</option>
              </optgroup>
              <optgroup label="Estendendo o Rails">
                  <option value="plugins.html">The Basics of Creating Rails Plugins</option>
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">Creating and Customizing Rails Generators &amp; Templates</option>
                  <option value="engines.html">Getting Started with Engines</option>
                  <option value="threading_and_code_execution.html">Threading and Code Execution in Rails</option>
              </optgroup>
              <optgroup label="Contribuições">
                  <option value="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</option>
                  <option value="api_documentation_guidelines.html">API Documentation Guidelines</option>
                  <option value="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</option>
              </optgroup>
              <optgroup label="Políticas">
                  <option value="maintenance_policy.html">Maintenance Policy for Ruby on Rails</option>
              </optgroup>
              <optgroup label="Release Notes">
                  <option value="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</option>
                  <option value="6_1_release_notes.html">Version 6.1 - Dezembro 2020</option>
                  <option value="6_0_release_notes.html">Version 6.0 - Agosto 2019</option>
                  <option value="5_2_release_notes.html">Version 5.2 - April 2018</option>
                  <option value="5_1_release_notes.html">Version 5.1 - April 2017</option>
                  <option value="5_0_release_notes.html">Version 5.0 - June 2016</option>
                  <option value="4_2_release_notes.html">Version 4.2 - December 2014</option>
                  <option value="4_1_release_notes.html">Version 4.1 - April 2014</option>
                  <option value="4_0_release_notes.html">Version 4.0 - June 2013</option>
                  <option value="3_2_release_notes.html">Version 3.2 - January 2012</option>
                  <option value="3_1_release_notes.html">Version 3.1 - August 2011</option>
                  <option value="3_0_release_notes.html">Version 3.0 - August 2010</option>
                  <option value="2_3_release_notes.html">Version 2.3 - March 2009</option>
                  <option value="2_2_release_notes.html">Version 2.2 - November 2008</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>Action View Overview</h2><p>Depois de ler este guia, você vai saber:</p>
<ul>
<li>O que é <em>Action View</em> e como é utilizada no Rails.</li>
<li>A melhor forma de usar <em>templates</em>, <em>partials</em> e <em>layouts</em>.</li>
<li>Como utilizar <em>views</em> localizadas.</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li><a href="#o-que-e-action-view-questionmark">O que é <em>Action View</em>?</a></li>
<li><a href="#usando-action-view-com-rails">Usando <em>Action View</em> com Rails</a></li>
<li>
<a href="#templates-partials-e-layouts"><em>Templates</em>, <em>Partials</em>, e <em>Layouts</em></a>

<ul>
<li><a href="#templates">Templates</a></li>
<li><a href="#partials"><em>Partials</em></a></li>
<li><a href="#layouts">Layouts</a></li>
</ul>
</li>
<li><a href="#layout-de-partial"><em>Layout</em> de <em>Partial</em></a></li>
<li>
<a href="#view-paths">View Paths</a>

<ul>
<li><a href="#pre-anexando-caminho-das-views">Pré-anexando caminho das views</a></li>
<li><a href="#anexando-caminho-das-views">Anexando caminho das views</a></li>
</ul>
</li>
<li><a href="#helpers"><em>Helpers</em></a></li>
<li><a href="#views-localizadas"><em>Views</em> Localizadas</a></li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="o-que-e-action-view-questionmark"><a class="anchorlink" href="#o-que-e-action-view-questionmark">1 O que é <em>Action View</em>?</a></h3><p>No <em>Rails</em>, as requisições web são tratadas por <a href="action_controller_overview.html"><em>Action Controller</em></a> e <em>Action View</em>. Normalmente, o <em>Action Controller</em> é responsável por se comunicar com o banco de dados e realizar ações de <em>CRUD</em> quando necessário. A <em>Action View</em> é responsável por compilar a resposta.</p><p>Os templates <em>Action View</em> são escritos usando Ruby embutido em tags mescladas com HTML. Para evitar poluir os templates com código clichê (<em>boilerplate code</em>), uma variedade de classes utilitárias (<em>helpers</em>) disponibilizam comportamentos comuns para lidar com <em>forms</em>, datas e <em>strings</em>. Também é fácil adicionar novas classes utilitárias (<em>helpers</em>) em sua aplicação conforme ela evolui.</p><div class="note"><p>Alguns recursos da <em>Action View</em> estão vinculados ao <em>Active Record</em>, mas isso não significa que a <em>Action View</em> depende do <em>Active Record</em>. <em>Action View</em> é um pacote independente que pode ser usado com qualquer tipo de biblioteca Ruby.</p></div><h3 id="usando-action-view-com-rails"><a class="anchorlink" href="#usando-action-view-com-rails">2 Usando <em>Action View</em> com Rails</a></h3><p>Para cada <em>controller</em> há um diretório associado em <code>app/views</code> que contém os arquivos de <em>template</em> que compõe as <em>views</em> associadas aos seus respectivos <em>controllers</em>. Esses arquivos são utilizados para exibir a <em>view</em> que resulta de cada <em>action</em> do <em>controller</em>.</p><p>Vamos dar uma olhada no que o Rails faz por padrão quando um novo recurso é criado utilizando o <em>generator scaffold</em>:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>generate scaffold article
<span class="go">      [...]
      invoke  scaffold_controller
      create    app/controllers/articles_controller.rb
      invoke    erb
      create      app/views/articles
      create      app/views/articles/index.html.erb
      create      app/views/articles/edit.html.erb
      create      app/views/articles/show.html.erb
      create      app/views/articles/new.html.erb
      create      app/views/articles/_form.html.erb
      [...]
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-6cd18e54617fc967a1ebb7bd77fd7d66">bin/rails generate scaffold article
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-6cd18e54617fc967a1ebb7bd77fd7d66">Copiar</button>
</div>
<p>Há uma convenção de nomenclatura para as <em>views</em> no Rails. Normalmente, as <em>views</em> compartilham seu nome com a <em>action</em> do <em>controller</em> à qual ela é associada, conforme pode ser visto no exemplo acima.
Por exemplo, a <em>action index</em> do <em>controller</em> <code>articles_controller.rb</code> utilizará o arquivo de <em>view</em> <code>index.html.erb</code> no diretório <code>app/views/articles</code>.
O HTML completo que é retornado ao <em>client</em> é composto de uma combinação desse arquivo ERB, um <em>template</em> de <em>layout</em> que o envolve, e todas as <em>partials</em> que a <em>view</em> pode referenciar. Dentro deste guia você encontrará documentações mais detalhadas sobre cada um desses três componentes.</p><h3 id="templates-partials-e-layouts"><a class="anchorlink" href="#templates-partials-e-layouts">3 <em>Templates</em>, <em>Partials</em>, e <em>Layouts</em></a></h3><p>Como já mencionado, a saída HTML final é uma composição de três elementos: <code>Templates</code>, <code>Partials</code> e <code>Layouts</code>.
Abaixo está uma breve visão geral de cada um deles.</p><h4 id="templates"><a class="anchorlink" href="#templates">3.1 Templates</a></h4><p><em>Templates</em> <em>Action View</em> podem ser escritos de várias maneiras. Se o arquivo de <em>template</em> tiver a extensão <code>.erb</code> ele usará uma mistura de ERB (<em>Embedded Ruby</em>) com HTML. Se o arquivo de template tiver a extensão <code>.builder</code>, a biblioteca (<em>library</em>) <code>Builder::XmlMarkup</code> é utilizada.</p><p>O Rails suporta múltiplos sistemas de <em>template</em> e utiliza a extensão do arquivo para distingui-los. Por exemplo, um arquivo HTML usando o sistema de <em>template</em> ERB terá a extensão do arquivo como <code>.html.erb</code>.</p><h5 id="erb"><a class="anchorlink" href="#erb">3.1.1 ERB</a></h5><p>Dentro de um <em>template</em> ERB, o código Ruby pode ser incluído usando ambas as tags <code>&lt;% %&gt;</code> e <code>&lt;%= %&gt;</code>. As tags <code>&lt;% %&gt;</code> são utilizadas para executar código Ruby que não possui retorno, como condições, <em>loops</em>, ou blocos, e as tags <code>&lt;%= %&gt;</code> são utilizadas quando você deseja uma saída.</p><p>Considere o seguinte <em>loop</em> de nomes:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Names of all the people<span class="nt">&lt;/h1&gt;</span>
<span class="cp">&lt;%</span> <span class="vi">@people</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">person</span><span class="o">|</span> <span class="cp">%&gt;</span>
  Name: <span class="cp">&lt;%=</span> <span class="n">person</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-cc9fe48c54aa8560dda66d85a566a750">&lt;h1&gt;Names of all the people&lt;/h1&gt;
&lt;% @people.each do |person| %&gt;
  Name: &lt;%= person.name %&gt;&lt;br&gt;
&lt;% end %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-cc9fe48c54aa8560dda66d85a566a750">Copiar</button>
</div>
<p>O <em>loop</em> é configurado usando tags de incorporação regulares (<code>&lt;% %&gt;</code>) e o nome é inserido usando as tags de incorporação de saída (<code>&lt;%= %&gt;</code>). Note que isso não é somente uma sugestão de uso: funções de saída regulares como <code>print</code> e <code>puts</code> não serão renderizadas na <em>view</em> usando <em>template</em> ERB. Então, isso estaria errado:</p><div class="code_container">
<pre><code class="highlight erb"><span class="c">&lt;%# WRONG %&gt;</span>
Hi, Mr. <span class="cp">&lt;%</span> <span class="nb">puts</span> <span class="s2">"Frodo"</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-4a71b4daea853af67fcae0c7c429af1e">&lt;%# WRONG %&gt;
Hi, Mr. &lt;% puts "Frodo" %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-4a71b4daea853af67fcae0c7c429af1e">Copiar</button>
</div>
<p>Para suprimir espaços em branco à esquerda e à direita, você pode usar <code>&lt;%-</code> <code>-%&gt;</code> alternadamente com <code>&lt;%</code> e <code>%&gt;</code>.</p><h5 id="builder"><a class="anchorlink" href="#builder">3.1.2 Builder</a></h5><p>Os <em>templates</em> <em>Builder</em> são uma alternativa mais programática ao ERB. Eles são especialmente úteis para gerar conteúdo <em>XML</em>. Um objeto <em>XmlMarkup</em> denominado <code>xml</code> é automaticamente disponibilizado para <em>templates</em> com extensão<code>.builder</code>.</p><p>Aqui estão alguns exemplos básicos:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">xml</span><span class="p">.</span><span class="nf">em</span><span class="p">(</span><span class="s2">"emphasized"</span><span class="p">)</span>
<span class="n">xml</span><span class="p">.</span><span class="nf">em</span> <span class="p">{</span> <span class="n">xml</span><span class="p">.</span><span class="nf">b</span><span class="p">(</span><span class="s2">"emph &amp; bold"</span><span class="p">)</span> <span class="p">}</span>
<span class="n">xml</span><span class="p">.</span><span class="nf">a</span><span class="p">(</span><span class="s2">"A Link"</span><span class="p">,</span> <span class="s2">"href"</span> <span class="o">=&gt;</span> <span class="s2">"https://rubyonrails.org"</span><span class="p">)</span>
<span class="n">xml</span><span class="p">.</span><span class="nf">target</span><span class="p">(</span><span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="s2">"compile"</span><span class="p">,</span> <span class="s2">"option"</span> <span class="o">=&gt;</span> <span class="s2">"fast"</span><span class="p">)</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-1c1bc0621d8dbbc54f85a2c03d54c0f6">xml.em("emphasized")
xml.em { xml.b("emph &amp; bold") }
xml.a("A Link", "href" =&gt; "https://rubyonrails.org")
xml.target("name" =&gt; "compile", "option" =&gt; "fast")
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-1c1bc0621d8dbbc54f85a2c03d54c0f6">Copiar</button>
</div>
<p>que produziria:</p><div class="code_container">
<pre><code class="highlight html"><span class="nt">&lt;em&gt;</span>emphasized<span class="nt">&lt;/em&gt;</span>
<span class="nt">&lt;em&gt;&lt;b&gt;</span>emph <span class="ni">&amp;amp;</span> bold<span class="nt">&lt;/b&gt;&lt;/em&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://rubyonrails.org"</span><span class="nt">&gt;</span>A link<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;target</span> <span class="na">option=</span><span class="s">"fast"</span> <span class="na">name=</span><span class="s">"compile"</span> <span class="nt">/&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-c2347e28c8ffcc7a87c9927b3ac8ec99">&lt;em&gt;emphasized&lt;/em&gt;
&lt;em&gt;&lt;b&gt;emph &amp;amp; bold&lt;/b&gt;&lt;/em&gt;
&lt;a href="https://rubyonrails.org"&gt;A link&lt;/a&gt;
&lt;target option="fast" name="compile" /&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-c2347e28c8ffcc7a87c9927b3ac8ec99">Copiar</button>
</div>
<p>Qualquer método com um bloco será tratado como uma tag de marcação <em>XML</em> com marcação aninhada no bloco. Por exemplo, o seguinte:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">xml</span><span class="p">.</span><span class="nf">div</span> <span class="p">{</span>
  <span class="n">xml</span><span class="p">.</span><span class="nf">h1</span><span class="p">(</span><span class="vi">@person</span><span class="p">.</span><span class="nf">name</span><span class="p">)</span>
  <span class="n">xml</span><span class="p">.</span><span class="nf">p</span><span class="p">(</span><span class="vi">@person</span><span class="p">.</span><span class="nf">bio</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-a83a4426f8b7c9c143f9697e742cf2f1">xml.div {
  xml.h1(@person.name)
  xml.p(@person.bio)
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-a83a4426f8b7c9c143f9697e742cf2f1">Copiar</button>
</div>
<p>produziria algo como:</p><div class="code_container">
<pre><code class="highlight html"><span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;h1&gt;</span>David Heinemeier Hansson<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;p&gt;</span>A product of Danish Design during the Winter of '79...<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-80d5a5c1204a711a80e70aef00cc83c6">&lt;div&gt;
  &lt;h1&gt;David Heinemeier Hansson&lt;/h1&gt;
  &lt;p&gt;A product of Danish Design during the Winter of '79...&lt;/p&gt;
&lt;/div&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-80d5a5c1204a711a80e70aef00cc83c6">Copiar</button>
</div>
<p>Abaixo está um exemplo completo de <em>RSS</em> que foi usado de verdade no Basecamp:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">xml</span><span class="p">.</span><span class="nf">rss</span><span class="p">(</span><span class="s2">"version"</span> <span class="o">=&gt;</span> <span class="s2">"2.0"</span><span class="p">,</span> <span class="s2">"xmlns:dc"</span> <span class="o">=&gt;</span> <span class="s2">"http://purl.org/dc/elements/1.1/"</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">xml</span><span class="p">.</span><span class="nf">channel</span> <span class="k">do</span>
    <span class="n">xml</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="vi">@feed_title</span><span class="p">)</span>
    <span class="n">xml</span><span class="p">.</span><span class="nf">link</span><span class="p">(</span><span class="vi">@url</span><span class="p">)</span>
    <span class="n">xml</span><span class="p">.</span><span class="nf">description</span> <span class="s2">"Basecamp: Recent items"</span>
    <span class="n">xml</span><span class="p">.</span><span class="nf">language</span> <span class="s2">"en-us"</span>
    <span class="n">xml</span><span class="p">.</span><span class="nf">ttl</span> <span class="s2">"40"</span>

    <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="vi">@recent_items</span>
      <span class="n">xml</span><span class="p">.</span><span class="nf">item</span> <span class="k">do</span>
        <span class="n">xml</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="n">item_title</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
        <span class="n">xml</span><span class="p">.</span><span class="nf">description</span><span class="p">(</span><span class="n">item_description</span><span class="p">(</span><span class="n">item</span><span class="p">))</span> <span class="k">if</span> <span class="n">item_description</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="n">xml</span><span class="p">.</span><span class="nf">pubDate</span><span class="p">(</span><span class="n">item_pubDate</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
        <span class="n">xml</span><span class="p">.</span><span class="nf">guid</span><span class="p">(</span><span class="vi">@person</span><span class="p">.</span><span class="nf">firm</span><span class="p">.</span><span class="nf">account</span><span class="p">.</span><span class="nf">url</span> <span class="o">+</span> <span class="vi">@recent_items</span><span class="p">.</span><span class="nf">url</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
        <span class="n">xml</span><span class="p">.</span><span class="nf">link</span><span class="p">(</span><span class="vi">@person</span><span class="p">.</span><span class="nf">firm</span><span class="p">.</span><span class="nf">account</span><span class="p">.</span><span class="nf">url</span> <span class="o">+</span> <span class="vi">@recent_items</span><span class="p">.</span><span class="nf">url</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
        <span class="n">xml</span><span class="p">.</span><span class="nf">tag!</span><span class="p">(</span><span class="s2">"dc:creator"</span><span class="p">,</span> <span class="n">item</span><span class="p">.</span><span class="nf">author_name</span><span class="p">)</span> <span class="k">if</span> <span class="n">item_has_creator?</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-c993a18aa602944e0efdc10d59a1c2a0">xml.rss("version" =&gt; "2.0", "xmlns:dc" =&gt; "http://purl.org/dc/elements/1.1/") do
  xml.channel do
    xml.title(@feed_title)
    xml.link(@url)
    xml.description "Basecamp: Recent items"
    xml.language "en-us"
    xml.ttl "40"

    for item in @recent_items
      xml.item do
        xml.title(item_title(item))
        xml.description(item_description(item)) if item_description(item)
        xml.pubDate(item_pubDate(item))
        xml.guid(@person.firm.account.url + @recent_items.url(item))
        xml.link(@person.firm.account.url + @recent_items.url(item))
        xml.tag!("dc:creator", item.author_name) if item_has_creator?(item)
      end
    end
  end
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-c993a18aa602944e0efdc10d59a1c2a0">Copiar</button>
</div>
<h5 id="jbuilder"><a class="anchorlink" href="#jbuilder">3.1.3 Jbuilder</a></h5><p><a href="https://github.com/rails/jbuilder">Jbuilder</a> é uma <em>gem</em> que é
mantida pelo time do Rails e incluída por padrão no <code>Gemfile</code> do Rails.
É similar ao <em>Builder</em>, mas é usada para gerar <em>JSON</em>, ao invés de <em>XML</em>.</p><p>Se você não tiver, você pode adicionar o seguinte ao seu <code>Gemfile</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">gem</span> <span class="s1">'jbuilder'</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-5b1e8185c46294600fd555fcc4b57b52">gem 'jbuilder'
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-5b1e8185c46294600fd555fcc4b57b52">Copiar</button>
</div>
<p>Um objeto <em>Jbuilder</em> denominado <code>json</code> é automaticamente disponibilizado para <em>templates</em> com extensão <code>.jbuilder</code>.</p><p>Aqui está um exemplo básico:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">json</span><span class="p">.</span><span class="nf">name</span><span class="p">(</span><span class="s2">"Alex"</span><span class="p">)</span>
<span class="n">json</span><span class="p">.</span><span class="nf">email</span><span class="p">(</span><span class="s2">"alex@example.com"</span><span class="p">)</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-75e0cd15cc2782f685c0b6d44f80a1d5">json.name("Alex")
json.email("alex@example.com")
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-75e0cd15cc2782f685c0b6d44f80a1d5">Copiar</button>
</div>
<p>produziria:</p><div class="code_container">
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alex"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alex@example.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-ee86067bd59ddd21651c7124939a0bec">{
  "name": "Alex",
  "email": "alex@example.com"
}
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-ee86067bd59ddd21651c7124939a0bec">Copiar</button>
</div>
<p>Veja a <a href="https://github.com/rails/jbuilder#jbuilder">documentação do Jbuilder</a> para mais exemplos e informação.</p><h5 id="template-caching"><a class="anchorlink" href="#template-caching">3.1.4 Template Caching</a></h5><p>Por padrão, o Rails compila cada <em>template</em> em um método para renderizá-la. Em ambiente de desenvolvimento, quando você altera um <em>template</em>, o Rails verifica a hora de modificação do arquivo e o recompila.</p><h4 id="partials"><a class="anchorlink" href="#partials">3.2 <em>Partials</em></a></h4><p><em>Templates</em> parciais (<em>partials</em>) - normalmente chamados apenas de <em>partials</em> - são outro instrumento para quebrar o processo de renderização em partes mais gerenciáveis. Com <em>partials</em>, você consegue extrair pedaços de código de seus <em>templates</em> para separar em arquivos e também reusá-los em seus <em>templates</em>.</p><h5 id="nomeando-partials"><a class="anchorlink" href="#nomeando-partials">3.2.1 Nomeando <em>Partials</em></a></h5><p>Para renderizar uma <em>partial</em> como parte de uma <em>view</em>, utiliza-se o método <code>render</code> dentro da <em>view</em>:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"menu"</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-5f41eddcf0c64fbe51d455bef1d4803d">&lt;%= render "menu" %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-5f41eddcf0c64fbe51d455bef1d4803d">Copiar</button>
</div>
<p>Isso renderizará o arquivo <code>_menu.html.erb</code> naquele ponto dentro da <em>view</em> sendo renderizada. Note o caractere de sublinhado no início: as <em>partials</em> são nomeadass com um sublinhado no início para distingui-las das <em>views</em> regulares, embora sejam referidas sem o sublinhado. Isso é valido mesmo quando utilizamos uma <em>partial</em> de uma pasta diferente:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"shared/menu"</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-d8121d95ef46da76d388d8706abf6eab">&lt;%= render "shared/menu" %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-d8121d95ef46da76d388d8706abf6eab">Copiar</button>
</div>
<p>Esse código pegará a <em>partial</em> de <code>app/views/shared/_menu.html.erb</code>.</p><h5 id="usando-partials-para-simplificar-views"><a class="anchorlink" href="#usando-partials-para-simplificar-views">3.2.2 Usando <em>Partials</em> para simplificar <em>Views</em></a></h5><p>Uma maneira de usar <em>partials</em> é tratando-as como se fossem sub-rotinas; uma maneira de mover detalhes para fora da <em>view</em> para que você consiga entender o que está acontecendo com mais facilidade. Por exemplo, você pode ter uma <em>view</em> parecida com essa:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"shared/ad_banner"</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;h1&gt;</span>Products<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span>Here are a few of our fine products:<span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="vi">@products</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">product</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">product: </span><span class="n">product</span> <span class="p">}</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"shared/footer"</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-47e1e884c9b33d60eb317a1ef15265cc">&lt;%= render "shared/ad_banner" %&gt;

&lt;h1&gt;Products&lt;/h1&gt;

&lt;p&gt;Here are a few of our fine products:&lt;/p&gt;
&lt;% @products.each do |product| %&gt;
  &lt;%= render partial: "product", locals: { product: product } %&gt;
&lt;% end %&gt;

&lt;%= render "shared/footer" %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-47e1e884c9b33d60eb317a1ef15265cc">Copiar</button>
</div>
<p>Aqui, as <em>partials</em> <code>_ad_banner.html.erb</code> e <code>_footer.html.erb</code> podem ter conteúdos que são compartilhados entre muitas páginas em sua aplicação. Você não precisa ver os detalhes dessas seções quando estiver se concentrando em uma página específica.</p><h5 id="render-sem-os-parametros-partial-e-locals"><a class="anchorlink" href="#render-sem-os-parametros-partial-e-locals">3.2.3 <code>render</code> sem os parâmetros <code>partial</code> e <code>locals</code></a></h5><p>No exemplo acima, o método <code>render</code> recebe 2 parâmetros: <code>partial</code> e <code>locals</code>.
Mas se esses forem os únicos parâmetros que você deseja passar, você pode ignorá-los.
Por exemplo, ao invés de:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">product: </span><span class="vi">@product</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-78c03d67d05b1d24c18af7c301717a18">&lt;%= render partial: "product", locals: { product: @product } %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-78c03d67d05b1d24c18af7c301717a18">Copiar</button>
</div>
<p>Você também pode usar:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"product"</span><span class="p">,</span> <span class="ss">product: </span><span class="vi">@product</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-1f014a52047145c93f28c7a47d44fa25">&lt;%= render "product", product: @product %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-1f014a52047145c93f28c7a47d44fa25">Copiar</button>
</div>
<h5 id="os-parametros-as-e-object"><a class="anchorlink" href="#os-parametros-as-e-object">3.2.4 Os parâmetros <code>as</code> e <code>object</code></a></h5><p>Por padrão o <code>ActionView::Partials::PartialRenderer</code> tem seu objeto em uma variável local com o mesmo nome do <em>template</em>. Então, dado que:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-35150845c38f1d7ce9221d4880fec466">&lt;%= render partial: "product" %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-35150845c38f1d7ce9221d4880fec466">Copiar</button>
</div>
<p>dentro da <em>partial</em> <code>_product</code> nós teremos o <code>@product</code> dentro da variável local <code>product</code>, como se tivéssemos escrito:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">product: </span><span class="vi">@product</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-1fcecc6f92f5bd6c852e6194376c34f1">&lt;%= render partial: "product", locals: { product: @product } %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-1fcecc6f92f5bd6c852e6194376c34f1">Copiar</button>
</div>
<p>O parâmetro <code>object</code> pode ser usado para especificar diretamente qual objeto é renderizado na <em>partial</em>; útil quando o objeto do <em>template</em> está em outro lugar (por exemplo, em uma variável de instância diferente ou em uma variável local).</p><p>Por exemplo, ao invés de:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">product: </span><span class="vi">@item</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-91840bfa820d1611059244cea0d8c23b">&lt;%= render partial: "product", locals: { product: @item } %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-91840bfa820d1611059244cea0d8c23b">Copiar</button>
</div>
<p>Faríamos:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">object: </span><span class="vi">@item</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-a8dc40c07a2a06f725d40b3b9b948130">&lt;%= render partial: "product", object: @item %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-a8dc40c07a2a06f725d40b3b9b948130">Copiar</button>
</div>
<p>Com o parâmetro <code>as</code> nós podemos especificar um nome diferente para a variável local. Por exemplo, se quisermos que seja <code>item</code> em vez de <code>product</code>, faríamos:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">object: </span><span class="vi">@item</span><span class="p">,</span> <span class="ss">as: </span><span class="s2">"item"</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-1276b5966155d80b81fc567facf1b621">&lt;%= render partial: "product", object: @item, as: "item" %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-1276b5966155d80b81fc567facf1b621">Copiar</button>
</div>
<p>Isso é equivalente a:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">item: </span><span class="vi">@item</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-aa3bd4c7a3e0c37d8d0f1168f17adf3b">&lt;%= render partial: "product", locals: { item: @item } %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-aa3bd4c7a3e0c37d8d0f1168f17adf3b">Copiar</button>
</div>
<h5 id="renderizando-colecoes"><a class="anchorlink" href="#renderizando-colecoes">3.2.5 Renderizando Coleções</a></h5><p>É muito comum que um <em>template</em> precise iterar sobre uma coleção e renderizar um <em>sub-template</em> para cada um dos elementos. Esse padrão foi implementado como um método único que recebe um <em>array</em> e renderiza uma <em>partial</em> para cada um dos elementos do <em>array</em>.</p><p>Logo, este exemplo para renderizar todos os produtos:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="vi">@products</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">product</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">product: </span><span class="n">product</span> <span class="p">}</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-969c0fdb042dd9caac7513e914194003">&lt;% @products.each do |product| %&gt;
  &lt;%= render partial: "product", locals: { product: product } %&gt;
&lt;% end %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-969c0fdb042dd9caac7513e914194003">Copiar</button>
</div>
<p>pode ser reescrito em uma linha:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s2">"product"</span><span class="p">,</span> <span class="ss">collection: </span><span class="vi">@products</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-5ce0071324bc4bac7b39aada63856987">&lt;%= render partial: "product", collection: @products %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-5ce0071324bc4bac7b39aada63856987">Copiar</button>
</div>
<p>Quando uma <em>partial</em> é chamada com uma coleção, as instâncias individuais da <em>partial</em> tem acesso ao membro da coleção que está sendo renderizado por meio de uma variável com o mesmo nome da <em>partial</em>. Nesse caso, a <em>partial</em> é <code>_product</code>, e dentro dele você pode se referir a <code>product</code> para obter o membro da coleção que está sendo renderizado.</p><p>Você pode usar uma sintaxe abreviada para renderizar coleções. Supondo que <code>@products</code> é uma coleção de instâncias de <code>Product</code>, você pode simplesmente escrever o seguinte para produzir o mesmo resultado:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="vi">@products</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-fa7455da7e8f6f89303044ae845b85b0">&lt;%= render @products %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-fa7455da7e8f6f89303044ae845b85b0">Copiar</button>
</div>
<p>O Rails determina o nome da <em>partial</em> a ser usada observando o nome do <em>model</em> na coleção, <code>Product</code> neste caso. Na verdade, você pode até renderizar uma coleção composta de instâncias de diferentes <em>models</em> usando essa abreviação, e o Rails escolherá a <em>partial</em> adequada para cada membro da coleção.</p><h5 id="spacer-templates"><a class="anchorlink" href="#spacer-templates">3.2.6 <em>Spacer Templates</em></a></h5><p>Você também pode especificar uma segunda <em>partial</em> a ser renderizada entre as instâncias da <em>partial</em> principal usando o parâmetro <code>:spacer_template</code>:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="vi">@products</span><span class="p">,</span> <span class="ss">spacer_template: </span><span class="s2">"product_ruler"</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-ff3b54fffaef74db541cd7abb3505041">&lt;%= render partial: @products, spacer_template: "product_ruler" %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-ff3b54fffaef74db541cd7abb3505041">Copiar</button>
</div>
<p>O Rails renderizará a <em>partial</em> <code>_product_ruler</code> (sem passar nenhum dado pra ela) entre cada par da <em>partial</em> <code>_product</code>.</p><h4 id="layouts"><a class="anchorlink" href="#layouts">3.3 Layouts</a></h4><p>Os <em>Layouts</em> podem ser usados para renderizar um <em>template</em> em torno dos resultados das <em>actions</em> do <em>controller</em> do Rails. Normalmente, uma aplicação Rails terá alguns <em>layouts</em> nos quais as páginas serão renderizadas. Por exemplo, um site pode ter um <em>layout</em> para um usuário conectado e outra página para marketing ou vendas do site. O <em>layout</em> do usuário conectado pode incluir navegação de nível superior (<em>top-level</em>), que deve estar presente em muitas <em>actions</em> do <em>controller</em>. O <em>layout</em> de vendas de uma aplicação SaaS pode incluir navegação de nível superior para páginas de "Preços" e "Fale conosco", onde esperaria que cada <em>layout</em> tivesse uma aparência e sensação diferentes. Você pode ler sobre <em>layout</em> com mais detalhes em <a href="layouts_and_rendering.html">Layouts e Renderização no Rails</a>.</p><h3 id="layout-de-partial"><a class="anchorlink" href="#layout-de-partial">4 <em>Layout</em> de <em>Partial</em></a></h3><p><em>Partials</em> podem ter seus próprios <em>layouts</em>. Esses <em>layouts</em> são diferentes daqueles utilizados nas <em>actions</em> do <em>controller</em>, porém funcionam de modo semelhante.</p><p>Supomos que estamos exibindo um artigo em uma página que deveria ser encapsulado em uma <code>div</code>. Primeiramente, criaremos um novo <code>Article</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">Article</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">body: </span><span class="s1">'Layouts de partial são demais!'</span><span class="p">)</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-69dae3b8bfb490cc8f5c0b45ada9927d">Article.create(body: 'Layouts de partial são demais!')
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-69dae3b8bfb490cc8f5c0b45ada9927d">Copiar</button>
</div>
<p>No <em>template</em> do <code>show</code>, iremos renderizar a <em>partial</em> <code>_article</code> encapsulado no <em>layout</em> <code>box</code>:</p><p><strong>articles/show.html.erb</strong></p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="ss">partial: </span><span class="s1">'article'</span><span class="p">,</span> <span class="ss">layout: </span><span class="s1">'box'</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">article: </span><span class="vi">@article</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-1db8f9e016534bfa7a53f48683f903d1">&lt;%= render partial: 'article', layout: 'box', locals: { article: @article } %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-1db8f9e016534bfa7a53f48683f903d1">Copiar</button>
</div>
<p>O <em>layout</em> <code>box</code> simplesmente encapsula a <em>partial</em> <code>_article</code> em uma <code>div</code>:</p><p><strong>articles/_box.html.erb</strong></p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">'box'</span><span class="nt">&gt;</span>
  <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-9e84567f6cb3fbb939708c4319229c0d">&lt;div class='box'&gt;
  &lt;%= yield %&gt;
&lt;/div&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-9e84567f6cb3fbb939708c4319229c0d">Copiar</button>
</div>
<p>Note que o <em>layout</em> de <em>partial</em> tem acesso a variável local <code>article</code> que foi passada no <code>render</code>. Todavia, diferentemente de <em>layouts</em> de aplicação, <em>layouts</em> de <em>partial</em> possuem o <em>underscore</em> <code>_</code> no início.</p><p>Você também pode renderizar um bloco de código dentro do <em>layout</em> de <em>partial</em> ao invés de usar <code>yield</code>. Por exemplo, se não tivéssemos a <em>partial</em> <code>_article</code>, poderíamos ter feito:</p><p><strong>articles/show.html.erb</strong></p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="n">render</span><span class="p">(</span><span class="ss">layout: </span><span class="s1">'box'</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">article: </span><span class="vi">@article</span> <span class="p">})</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-9608ec2bc67a7311ee4fa8c71ecd04c5">&lt;% render(layout: 'box', locals: { article: @article }) do %&gt;
  &lt;div&gt;
    &lt;p&gt;&lt;%= article.body %&gt;&lt;/p&gt;
  &lt;/div&gt;
&lt;% end %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-9608ec2bc67a7311ee4fa8c71ecd04c5">Copiar</button>
</div>
<p>Supomos que desejamos utilizar a mesma <em>partial</em> <code>_box</code> representada acima, isso produziria o mesmo resultado do exemplo anterior.</p><h3 id="view-paths"><a class="anchorlink" href="#view-paths">5 View Paths</a></h3><p>Ao renderizar uma resposta, o <em>controller</em> precisa resolver onde as diferentes
<em>views</em> estão localizadas. Por padrão, ele só olha dentro do diretório <code>app/views</code>.</p><p>Podemos adicionar outros locais e dar-lhes uma certa precedência ao resolver
caminhos usando os métodos <code>prepend_view_path</code> e <code>append_view_path</code>.</p><h4 id="pre-anexando-caminho-das-views"><a class="anchorlink" href="#pre-anexando-caminho-das-views">5.1 Pré-anexando caminho das views</a></h4><p>Isso pode ser útil, por exemplo, quando nós queremos colocar às <em>views</em> dentro
de um diretório diferente para subdomínios.</p><p>Podemos fazer isso usando:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">prepend_view_path</span> <span class="s2">"app/views/</span><span class="si">#{</span><span class="n">request</span><span class="p">.</span><span class="nf">subdomain</span><span class="si">}</span><span class="s2">"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-6d3107f708086499937abe657da69cdd">prepend_view_path "app/views/#{request.subdomain}"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-6d3107f708086499937abe657da69cdd">Copiar</button>
</div>
<p>Então, a <em>Action View</em> procurará primeiro dentro deste diretório quando ao resolver as
<em>views</em>.</p><h4 id="anexando-caminho-das-views"><a class="anchorlink" href="#anexando-caminho-das-views">5.2 Anexando caminho das views</a></h4><p>Da mesma forma, podemos acrescentar caminhos:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">append_view_path</span> <span class="s2">"app/views/direct"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-24118c1a32562b592b429f20758bba1c">append_view_path "app/views/direct"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-24118c1a32562b592b429f20758bba1c">Copiar</button>
</div>
<p>Isso adicionará <code>app/views/direct</code> ao final dos caminhos de pesquisa.</p><h3 id="helpers"><a class="anchorlink" href="#helpers">6 <em>Helpers</em></a></h3><p>O Rails fornece muitos métodos auxiliares para usar com o <em>Action View</em>. Isso inclui métodos para:</p>
<ul>
<li>Formatação de datas, <em>strings</em> e números</li>
<li>Criação de links HTML para imagens, vídeos, <em>stylesheets</em>, etc...</li>
<li>Higienização de conteúdo</li>
<li>Criação de formulários</li>
<li>Localização de conteúdo</li>
</ul>
<p>Você pode aprender mais sobre métodos auxiliares no <a href="action_view_helpers.html">Guia de Helpers do Action View</a> e no <a href="form_helpers.html">Guia de Form Helpers do Action View</a>.</p><h3 id="views-localizadas"><a class="anchorlink" href="#views-localizadas">7 <em>Views</em> Localizadas</a></h3><p>O <em>Action View</em> tem a capacidade de renderizar diferentes <em>templates</em>, dependendo da localidade atual.</p><p>Por exemplo, suponha que você tenha um <code>ArticlesController</code> com uma <em>action show</em>. Por padrão, chamar essa <em>action</em> irá renderizar <code>app/views/articles/show.html.erb</code>.
Mas se você definir <code>I18n.locale = :de</code>, então <code>app/views/articles/show.de.html.erb</code> será renderizada em seu lugar.
Se o <em>template</em> localizado não estiver presente, a versão não traduzida será utilizada.
Isso significa que você não precisa fornecer <em>views</em> localizadas para todos os casos, mas elas serão preferidas e usadas, se disponíveis.</p><p>Você pode utilizar a mesma técnica para localizar os arquivos de <em>rescue</em> em seu diretório público. Por exemplo, definir <code>I18n.locale = :de</code> e criar <code>public/500.de.html</code> e <code>public/404.de.html</code> permitirá que você tenha páginas de <em>rescue</em> localizadas.</p><p>Visto que o Rails não restringe os <em>symbols</em> que você usa para definir o <code>I18n.locale</code>, você pode aproveitar este sistema para exibir conteúdos diferentes dependendo do que você quiser.
Por exemplo, suponha que você tenha alguns usuários <em>"experts"</em> que devem ver páginas diferentes dos usuários "normais".
Você pode adicionar o seguinte a <code>app/controllers/application.rb</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">before_action</span> <span class="ss">:set_expert_locale</span>

<span class="k">def</span> <span class="nf">set_expert_locale</span>
  <span class="no">I18n</span><span class="p">.</span><span class="nf">locale</span> <span class="o">=</span> <span class="ss">:expert</span> <span class="k">if</span> <span class="n">current_user</span><span class="p">.</span><span class="nf">expert?</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-bbd591c4d6cf0b52a20c5a453658c53d">before_action :set_expert_locale

def set_expert_locale
  I18n.locale = :expert if current_user.expert?
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-bbd591c4d6cf0b52a20c5a453658c53d">Copiar</button>
</div>
<p>Em seguida, você pode criar <em>views</em> especiais como <code>app/views/articles/show.expert.html.erb</code> que somente serão exibidas para usuários <em>experts</em>.</p><p>Você pode ler mais sobre a API de Internacionalização do Rails (I18n) <a href="i18n.html">aqui</a>.</p>

        <h3>Feedback</h3>
        <p>
          Você é incentivado a ajudar a melhorar a qualidade deste guia.
        </p>
        <p>
          Por favor, contribua se vir qualquer erros, inclusive erros de digitação.
          Para começar, você pode ler nossa sessão de <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">contribuindo com a documentação</a>.
        </p>
        <p>
          Você também pode encontrar conteúdo incompleto ou coisas que não estão atualizadas.
          Por favor, adicione qualquer documentação em falta na main do Rails. Certifique-se de checar o
          <a href="http://edgeguides.rubyonrails.org">Edge Guides (en-US)</a> primeiro para verificar
          se o problema já foi resolvido ou não no branch main.
          Verifique as <a href="ruby_on_rails_guides_guidelines.html">Diretrizes do Guia Ruby on Rails</a>
          para estilo e convenções.
        </p>
        <p>
          Se, por qualquer motivo, você encontrar algo para consertar, mas não conseguir consertá-lo, por favor
          <a href="https://github.com/campuscode/rails-guides-pt-BR/issues">abra uma issue no nosso Guia</a>.
        </p>
        <p>
          E por último, mas não menos importante, qualquer tipo de discussão sobre a documentação do Ruby on Rails
          é muito bem vinda na <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs">lista de discussão rubyonrails-docs</a> e nas
          <a href="https://github.com/campuscode/rails-guides-pt-BR/issues">issues do Guia em português</a>.
        </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p> Este projeto está licenciado sob uma licença <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a></p>
<p>"Rails", "Ruby on Rails", e o logotipo Rails são marcas comerciais de David Heinemeier Hansson. Todos os direitos reservados.</p>

    </div>
  </div>
  <div id="toggle">
    <img alt="dark theme icon" class="icon">
  </div>
</body>
</html>
