<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Criando e Personalizando Geradores Rails e Templates — Ruby on Rails Guides</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  <link rel="stylesheet" type="text/css" href="stylesheets/highlight.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/search.css" data-turbolinks-track="reload">
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <script src="javascripts/turbolinks.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/clipboard.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/guides.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/search.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/lunr-documents.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/lunr.js" data-turbolinks-track="reload"></script>
  <meta property="og:title" content="Criando e Personalizando Geradores Rails e Templates — Ruby on Rails Guides" />
  <meta name="description" content="Criando e Personalizando Geradores Rails e TemplatesGeradores do Rails são uma ferramenta essencial se você planeja melhorar seu fluxo de trabalho. Com esse guia você aprenderá como criar Geradores e customizar os já existentes.Depois de ler esse guia, você irá saber: Como ver quais Geradores estão disponíveis para sua aplicação. Como criar um Gerador usando templates. Como o Rails procura pelos Geradores antes de chamá-los. Como o Rails gera internamente um código Rails a partir dos modelos. Como customizar seu scaffold com a criação de novos Geradores. Como customizar seu scaffold mudando os templates dos geradores. Como utilizar um plano de contingência para evitar sobrescrever um grande conjunto de geradores. Como criar um template de aplicação." />
  <meta property="og:description" content="Criando e Personalizando Geradores Rails e TemplatesGeradores do Rails são uma ferramenta essencial se você planeja melhorar seu fluxo de trabalho. Com esse guia você aprenderá como criar Geradores e customizar os já existentes.Depois de ler esse guia, você irá saber: Como ver quais Geradores estão disponíveis para sua aplicação. Como criar um Gerador usando templates. Como o Rails procura pelos Geradores antes de chamá-los. Como o Rails gera internamente um código Rails a partir dos modelos. Como customizar seu scaffold com a criação de novos Geradores. Como customizar seu scaffold mudando os templates dos geradores. Como utilizar um plano de contingência para evitar sobrescrever um grande conjunto de geradores. Como criar um template de aplicação." />
  <meta property="og:locale" content="pt_BR" />
  <meta property="og:site_name" content="Guia Ruby on Rails" />
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
  <meta property="og:type" content="website" />
</head>
<body class="guide">
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">Veja mais em <a href="https://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        Mais Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://weblog.rubyonrails.org/">Blog</a></li>
        <li class="more-info"><a href="https://guides.rubyonrails.org/">Guia oficial</a></li>
        <li class="more-info"><a href="https://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="https://stackoverflow.com/questions/tagged/ruby-on-rails">Peça por ajuda</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">Contribua no GitHub</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Voltar para a página principal">Guiarails.com.br</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-search guides-search-large">
          <input class="search-box search-box-large nav-item" type="text" placeholder="Digite o termo...">
          <div class="search-results"></div>
          <div class="search-spinner">Aguarde...</div>
        </li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">Guias</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
            <div class="guides-section-container">
                <div class="guides-section">
                  <dt>Comece aqui</dt>
                  <dd><a href="getting_started.html">Começando com Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Models</dt>
                  <dd><a href="active_record_basics.html">Active Record Basics</a></dd>
                  <dd><a href="active_record_migrations.html">Active Record Migrations</a></dd>
                  <dd><a href="active_record_validations.html">Active Record Validations</a></dd>
                  <dd><a href="active_record_callbacks.html">Active Record Callbacks</a></dd>
                  <dd><a href="association_basics.html">Active Record Associations</a></dd>
                  <dd><a href="active_record_querying.html">Active Record Query Interface</a></dd>
                  <dd><a href="active_model_basics.html">Active Model Basics</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Views</dt>
                  <dd><a href="action_view_overview.html">Action View Overview</a></dd>
                  <dd><a href="layouts_and_rendering.html">Layouts and Rendering in Rails</a></dd>
                  <dd><a href="form_helpers.html">Action View Form Helpers</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Controllers</dt>
                  <dd><a href="action_controller_overview.html">Action Controller Overview</a></dd>
                  <dd><a href="routing.html">Rails Routing from the Outside In</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Outros componentes</dt>
                  <dd><a href="active_support_core_extensions.html">Active Support Core Extensions</a></dd>
                  <dd><a href="action_mailer_basics.html">Action Mailer Basics</a></dd>
                  <dd><a href="action_mailbox_basics.html">Action Mailbox Basics</a></dd>
                  <dd><a href="action_text_overview.html">Action Text Overview</a></dd>
                  <dd><a href="active_job_basics.html">Active Job Basics</a></dd>
                  <dd><a href="active_storage_overview.html">Active Storage Overview</a></dd>
                  <dd><a href="action_cable_overview.html">Action Cable Overview</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Indo mais fundo</dt>
                  <dd><a href="i18n.html">Rails Internationalization (I18n) API</a></dd>
                  <dd><a href="testing.html">Testing Rails Applications</a></dd>
                  <dd><a href="security.html">Securing Rails Applications</a></dd>
                  <dd><a href="debugging_rails_applications.html">Debugging Rails Applications</a></dd>
                  <dd><a href="configuring.html">Configuring Rails Applications</a></dd>
                  <dd><a href="command_line.html">The Rails Command Line</a></dd>
                  <dd><a href="asset_pipeline.html">The Asset Pipeline</a></dd>
                  <dd><a href="working_with_javascript_in_rails.html">Working with JavaScript in Rails</a></dd>
                  <dd><a href="initialization.html">The Rails Initialization Process</a></dd>
                  <dd><a href="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants (Zeitwerk Mode)</a></dd>
                  <dd><a href="autoloading_and_reloading_constants_classic_mode.html">Autoloading and Reloading Constants (Classic Mode)</a></dd>
                  <dd><a href="caching_with_rails.html">Caching with Rails: An Overview</a></dd>
                  <dd><a href="active_support_instrumentation.html">Active Support Instrumentation</a></dd>
                  <dd><a href="api_app.html">Using Rails for API-only Applications</a></dd>
                  <dd><a href="active_record_postgresql.html">Active Record and PostgreSQL</a></dd>
                  <dd><a href="active_record_multiple_databases.html">Multiple Databases with Active Record</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Estendendo o Rails</dt>
                  <dd><a href="plugins.html">The Basics of Creating Rails Plugins</a></dd>
                  <dd><a href="rails_on_rack.html">Rails on Rack</a></dd>
                  <dd><a href="generators.html">Creating and Customizing Rails Generators &amp; Templates</a></dd>
                  <dd><a href="engines.html">Getting Started with Engines</a></dd>
                  <dd><a href="threading_and_code_execution.html">Threading and Code Execution in Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Contribuições</dt>
                  <dd><a href="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a></dd>
                  <dd><a href="api_documentation_guidelines.html">API Documentation Guidelines</a></dd>
                  <dd><a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Políticas</dt>
                  <dd><a href="maintenance_policy.html">Maintenance Policy for Ruby on Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Release Notes</dt>
                  <dd><a href="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</a></dd>
                  <dd><a href="6_0_release_notes.html">6.0 Release Notes - Agosto 2019</a></dd>
                  <dd><a href="5_2_release_notes.html">Version 5.2 - April 2018</a></dd>
                  <dd><a href="5_1_release_notes.html">Version 5.1 - April 2017</a></dd>
                  <dd><a href="5_0_release_notes.html">Version 5.0 - June 2016</a></dd>
                  <dd><a href="4_2_release_notes.html">Version 4.2 - December 2014</a></dd>
                  <dd><a href="4_1_release_notes.html">Version 4.1 - April 2014</a></dd>
                  <dd><a href="4_0_release_notes.html">Version 4.0 - June 2013</a></dd>
                  <dd><a href="3_2_release_notes.html">Version 3.2 - January 2012</a></dd>
                  <dd><a href="3_1_release_notes.html">Version 3.1 - August 2011</a></dd>
                  <dd><a href="3_0_release_notes.html">Version 3.0 - August 2010</a></dd>
                  <dd><a href="2_3_release_notes.html">Version 2.3 - March 2009</a></dd>
                  <dd><a href="2_2_release_notes.html">Version 2.2 - November 2008</a></dd>
                </div>
            </div>
          </div>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">Contribua</a></li>
        <li class="guides-search guides-search-small">
          <input class="search-box search-box-small nav-item" type="text" placeholder="Digite o termo...">
          <div class="search-results"></div>
          <div class="search-spinner">Aguarde...</div>
        </li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">Guias</option>
              <optgroup label="Comece aqui">
                  <option value="getting_started.html">Começando com Rails</option>
              </optgroup>
              <optgroup label="Models">
                  <option value="active_record_basics.html">Active Record Basics</option>
                  <option value="active_record_migrations.html">Active Record Migrations</option>
                  <option value="active_record_validations.html">Active Record Validations</option>
                  <option value="active_record_callbacks.html">Active Record Callbacks</option>
                  <option value="association_basics.html">Active Record Associations</option>
                  <option value="active_record_querying.html">Active Record Query Interface</option>
                  <option value="active_model_basics.html">Active Model Basics</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="action_view_overview.html">Action View Overview</option>
                  <option value="layouts_and_rendering.html">Layouts and Rendering in Rails</option>
                  <option value="form_helpers.html">Action View Form Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller Overview</option>
                  <option value="routing.html">Rails Routing from the Outside In</option>
              </optgroup>
              <optgroup label="Outros componentes">
                  <option value="active_support_core_extensions.html">Active Support Core Extensions</option>
                  <option value="action_mailer_basics.html">Action Mailer Basics</option>
                  <option value="action_mailbox_basics.html">Action Mailbox Basics</option>
                  <option value="action_text_overview.html">Action Text Overview</option>
                  <option value="active_job_basics.html">Active Job Basics</option>
                  <option value="active_storage_overview.html">Active Storage Overview</option>
                  <option value="action_cable_overview.html">Action Cable Overview</option>
              </optgroup>
              <optgroup label="Indo mais fundo">
                  <option value="i18n.html">Rails Internationalization (I18n) API</option>
                  <option value="testing.html">Testing Rails Applications</option>
                  <option value="security.html">Securing Rails Applications</option>
                  <option value="debugging_rails_applications.html">Debugging Rails Applications</option>
                  <option value="configuring.html">Configuring Rails Applications</option>
                  <option value="command_line.html">The Rails Command Line</option>
                  <option value="asset_pipeline.html">The Asset Pipeline</option>
                  <option value="working_with_javascript_in_rails.html">Working with JavaScript in Rails</option>
                  <option value="initialization.html">The Rails Initialization Process</option>
                  <option value="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants (Zeitwerk Mode)</option>
                  <option value="autoloading_and_reloading_constants_classic_mode.html">Autoloading and Reloading Constants (Classic Mode)</option>
                  <option value="caching_with_rails.html">Caching with Rails: An Overview</option>
                  <option value="active_support_instrumentation.html">Active Support Instrumentation</option>
                  <option value="api_app.html">Using Rails for API-only Applications</option>
                  <option value="active_record_postgresql.html">Active Record and PostgreSQL</option>
                  <option value="active_record_multiple_databases.html">Multiple Databases with Active Record</option>
              </optgroup>
              <optgroup label="Estendendo o Rails">
                  <option value="plugins.html">The Basics of Creating Rails Plugins</option>
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">Creating and Customizing Rails Generators &amp; Templates</option>
                  <option value="engines.html">Getting Started with Engines</option>
                  <option value="threading_and_code_execution.html">Threading and Code Execution in Rails</option>
              </optgroup>
              <optgroup label="Contribuições">
                  <option value="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</option>
                  <option value="api_documentation_guidelines.html">API Documentation Guidelines</option>
                  <option value="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</option>
              </optgroup>
              <optgroup label="Políticas">
                  <option value="maintenance_policy.html">Maintenance Policy for Ruby on Rails</option>
              </optgroup>
              <optgroup label="Release Notes">
                  <option value="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</option>
                  <option value="6_0_release_notes.html">6.0 Release Notes - Agosto 2019</option>
                  <option value="5_2_release_notes.html">Version 5.2 - April 2018</option>
                  <option value="5_1_release_notes.html">Version 5.1 - April 2017</option>
                  <option value="5_0_release_notes.html">Version 5.0 - June 2016</option>
                  <option value="4_2_release_notes.html">Version 4.2 - December 2014</option>
                  <option value="4_1_release_notes.html">Version 4.1 - April 2014</option>
                  <option value="4_0_release_notes.html">Version 4.0 - June 2013</option>
                  <option value="3_2_release_notes.html">Version 3.2 - January 2012</option>
                  <option value="3_1_release_notes.html">Version 3.1 - August 2011</option>
                  <option value="3_0_release_notes.html">Version 3.0 - August 2010</option>
                  <option value="2_3_release_notes.html">Version 2.3 - March 2009</option>
                  <option value="2_2_release_notes.html">Version 2.2 - November 2008</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>Criando e Personalizando Geradores Rails e <em>Templates</em></h2><p>Geradores do Rails são uma ferramenta essencial se você planeja melhorar seu fluxo de trabalho. Com esse guia você aprenderá como criar Geradores e customizar os já existentes.</p><p>Depois de ler esse guia, você irá saber:</p>
<ul>
<li>Como ver quais Geradores estão disponíveis para sua aplicação.</li>
<li>Como criar um Gerador usando <em>templates</em>.</li>
<li>Como o Rails procura pelos Geradores antes de chamá-los.</li>
<li>Como o Rails gera internamente um código Rails a partir dos modelos.</li>
<li>Como customizar seu <em>scaffold</em> com a criação de novos Geradores.</li>
<li>Como customizar seu <em>scaffold</em> mudando os <em>templates</em> dos geradores.</li>
<li>Como utilizar um plano de contingência para evitar sobrescrever um grande conjunto de geradores.</li>
<li>Como criar um <em>template</em> de aplicação.</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li><a href="#first-contact">First Contact</a></li>
<li><a href="#creating-your-first-generator">Creating Your First Generator</a></li>
<li><a href="#creating-generators-with-generators">Creating Generators with Generators</a></li>
<li><a href="#generators-lookup">Generators Lookup</a></li>
<li><a href="#customizing-your-workflow">Customizing Your Workflow</a></li>
<li><a href="#customizing-your-workflow-by-changing-generators-templates">Customizing Your Workflow by Changing Generators Templates</a></li>
<li><a href="#adding-generators-fallbacks">Adding Generators Fallbacks</a></li>
<li><a href="#application-templates">Application Templates</a></li>
<li><a href="#adding-command-line-arguments">Adding Command Line Arguments</a></li>
<li>
<a href="#generator-methods">Generator methods</a>

<ul>
<li><a href="#gem"><code>gem</code></a></li>
<li><a href="#gem-group"><code>gem_group</code></a></li>
<li><a href="#add-source"><code>add_source</code></a></li>
<li><a href="#inject-into-file"><code>inject_into_file</code></a></li>
<li><a href="#gsub-file"><code>gsub_file</code></a></li>
<li><a href="#application"><code>application</code></a></li>
<li><a href="#git"><code>git</code></a></li>
<li><a href="#vendor"><code>vendor</code></a></li>
<li><a href="#lib"><code>lib</code></a></li>
<li><a href="#rakefile"><code>rakefile</code></a></li>
<li><a href="#initializer"><code>initializer</code></a></li>
<li><a href="#generate"><code>generate</code></a></li>
<li><a href="#rake"><code>rake</code></a></li>
<li><a href="#route"><code>route</code></a></li>
<li><a href="#readme"><code>readme</code></a></li>
</ul>
</li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="first-contact"><a class="anchorlink" href="#first-contact">1 First Contact</a></h3><p>When you create an application using the <code>rails</code> command, you are in fact using a Rails generator. After that, you can get a list of all available generators by just invoking <code>rails generate</code>:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>new myapp
<span class="gp">$</span><span class="w"> </span><span class="nb">cd </span>myapp
<span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate
</code></pre>
<textarea class="clipboard-content" id="clipboard-0e2ae8912d832b0710651d22bd0d4728">rails new myapp
cd myapp
rails generate
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-0e2ae8912d832b0710651d22bd0d4728">Copiar</button>
</div>
<p>You will get a list of all generators that comes with Rails. If you need a detailed description of the helper generator, for example, you can simply do:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate helper <span class="nt">--help</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-ca4ae2c1fe0957360d155a4858cf5e9b">rails generate helper --help
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-ca4ae2c1fe0957360d155a4858cf5e9b">Copiar</button>
</div>
<h3 id="creating-your-first-generator"><a class="anchorlink" href="#creating-your-first-generator">2 Creating Your First Generator</a></h3><p>Since Rails 3.0, generators are built on top of <a href="https://github.com/erikhuda/thor">Thor</a>. Thor provides powerful options for parsing and a great API for manipulating files. For instance, let's build a generator that creates an initializer file named <code>initializer.rb</code> inside <code>config/initializers</code>.</p><p>The first step is to create a file at <code>lib/generators/initializer_generator.rb</code> with the following content:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">InitializerGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">Base</span>
  <span class="k">def</span> <span class="nf">create_initializer_file</span>
    <span class="n">create_file</span> <span class="s2">"config/initializers/initializer.rb"</span><span class="p">,</span> <span class="s2">"# Add initialization content here"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-e6608e2003c5cfa3f04ce8bf4ea78997">class InitializerGenerator &lt; Rails::Generators::Base
  def create_initializer_file
    create_file "config/initializers/initializer.rb", "# Add initialization content here"
  end
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-e6608e2003c5cfa3f04ce8bf4ea78997">Copiar</button>
</div>
<div class="note"><p><code>create_file</code> is a method provided by <code>Thor::Actions</code>. Documentation for <code>create_file</code> and other Thor methods can be found in <a href="https://rdoc.info/github/erikhuda/thor/master/Thor/Actions.html">Thor's documentation</a></p></div><p>Our new generator is quite simple: it inherits from <code>Rails::Generators::Base</code> and has one method definition. When a generator is invoked, each public method in the generator is executed sequentially in the order that it is defined. Finally, we invoke the <code>create_file</code> method that will create a file at the given destination with the given content. If you are familiar with the Rails Application Templates API, you'll feel right at home with the new generators API.</p><p>To invoke our new generator, we just need to do:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate initializer
</code></pre>
<textarea class="clipboard-content" id="clipboard-0b03069c36ce0a03c28143b255350160">rails generate initializer
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-0b03069c36ce0a03c28143b255350160">Copiar</button>
</div>
<p>Before we go on, let's see our brand new generator description:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate initializer <span class="nt">--help</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-ab67c7c05bb8a31088798d2360f42e50">rails generate initializer --help
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-ab67c7c05bb8a31088798d2360f42e50">Copiar</button>
</div>
<p>Rails is usually able to generate good descriptions if a generator is namespaced, as <code>ActiveRecord::Generators::ModelGenerator</code>, but not in this particular case. We can solve this problem in two ways. The first one is calling <code>desc</code> inside our generator:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">InitializerGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">desc</span> <span class="s2">"This generator creates an initializer file at config/initializers"</span>
  <span class="k">def</span> <span class="nf">create_initializer_file</span>
    <span class="n">create_file</span> <span class="s2">"config/initializers/initializer.rb"</span><span class="p">,</span> <span class="s2">"# Add initialization content here"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-f006a41e3a83dcab68dc8edcfd643d23">class InitializerGenerator &lt; Rails::Generators::Base
  desc "This generator creates an initializer file at config/initializers"
  def create_initializer_file
    create_file "config/initializers/initializer.rb", "# Add initialization content here"
  end
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-f006a41e3a83dcab68dc8edcfd643d23">Copiar</button>
</div>
<p>Now we can see the new description by invoking <code>--help</code> on the new generator. The second way to add a description is by creating a file named <code>USAGE</code> in the same directory as our generator. We are going to do that in the next step.</p><h3 id="creating-generators-with-generators"><a class="anchorlink" href="#creating-generators-with-generators">3 Creating Generators with Generators</a></h3><p>Generators themselves have a generator:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate generator initializer
<span class="go">      create  lib/generators/initializer
      create  lib/generators/initializer/initializer_generator.rb
      create  lib/generators/initializer/USAGE
      create  lib/generators/initializer/templates
      invoke  test_unit
      create    test/lib/generators/initializer_generator_test.rb
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-8d352f23d43168e7285cd796b779348f">rails generate generator initializer
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-8d352f23d43168e7285cd796b779348f">Copiar</button>
</div>
<p>This is the generator just created:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">InitializerGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">NamedBase</span>
  <span class="n">source_root</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s1">'templates'</span><span class="p">,</span> <span class="n">__dir__</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-5a5998e4135a1615d1945c9d165cdfba">class InitializerGenerator &lt; Rails::Generators::NamedBase
  source_root File.expand_path('templates', __dir__)
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-5a5998e4135a1615d1945c9d165cdfba">Copiar</button>
</div>
<p>First, notice that we are inheriting from <code>Rails::Generators::NamedBase</code> instead of <code>Rails::Generators::Base</code>. This means that our generator expects at least one argument, which will be the name of the initializer, and will be available in our code in the variable <code>name</code>.</p><p>We can see that by invoking the description of this new generator (don't forget to delete the old generator file):</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate initializer <span class="nt">--help</span>
<span class="go">Usage:
  rails generate initializer NAME [options]
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-c45f75db91a341eab3a4280431b16ddb">rails generate initializer --help
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-c45f75db91a341eab3a4280431b16ddb">Copiar</button>
</div>
<p>We can also see that our new generator has a class method called <code>source_root</code>. This method points to where our generator templates will be placed, if any, and by default it points to the created directory <code>lib/generators/initializer/templates</code>.</p><p>In order to understand what a generator template means, let's create the file <code>lib/generators/initializer/templates/initializer.rb</code> with the following content:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># Add initialization content here</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-d766c1fd36708596d532714a49dcc5a3"># Add initialization content here
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-d766c1fd36708596d532714a49dcc5a3">Copiar</button>
</div>
<p>And now let's change the generator to copy this template when invoked:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">InitializerGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">NamedBase</span>
  <span class="n">source_root</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s1">'templates'</span><span class="p">,</span> <span class="n">__dir__</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">copy_initializer_file</span>
    <span class="n">copy_file</span> <span class="s2">"initializer.rb"</span><span class="p">,</span> <span class="s2">"config/initializers/</span><span class="si">#{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">.rb"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-76a09cc558e4cd26985982fe9401fe1c">class InitializerGenerator &lt; Rails::Generators::NamedBase
  source_root File.expand_path('templates', __dir__)

  def copy_initializer_file
    copy_file "initializer.rb", "config/initializers/#{file_name}.rb"
  end
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-76a09cc558e4cd26985982fe9401fe1c">Copiar</button>
</div>
<p>And let's execute our generator:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate initializer core_extensions
</code></pre>
<textarea class="clipboard-content" id="clipboard-333a5a85c83440c9457c913cb7268863">rails generate initializer core_extensions
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-333a5a85c83440c9457c913cb7268863">Copiar</button>
</div>
<p>We can see that now an initializer named core_extensions was created at <code>config/initializers/core_extensions.rb</code> with the contents of our template. That means that <code>copy_file</code> copied a file in our source root to the destination path we gave. The method <code>file_name</code> is automatically created when we inherit from <code>Rails::Generators::NamedBase</code>.</p><p>The methods that are available for generators are covered in the <a href="#generator-methods">final section</a> of this guide.</p><h3 id="generators-lookup"><a class="anchorlink" href="#generators-lookup">4 Generators Lookup</a></h3><p>When you run <code>rails generate initializer core_extensions</code> Rails requires these files in turn until one is found:</p><div class="code_container">
<pre><code class="highlight console"><span class="go">rails/generators/initializer/initializer_generator.rb
generators/initializer/initializer_generator.rb
rails/generators/initializer_generator.rb
generators/initializer_generator.rb
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-9de16d3c76786ba358ed62106c281da0"></textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-9de16d3c76786ba358ed62106c281da0">Copiar</button>
</div>
<p>If none is found you get an error message.</p><div class="info"><p>The examples above put files under the application's <code>lib</code> because said directory belongs to <code>$LOAD_PATH</code>.</p></div><h3 id="customizing-your-workflow"><a class="anchorlink" href="#customizing-your-workflow">5 Customizing Your Workflow</a></h3><p>Rails own generators are flexible enough to let you customize scaffolding. They can be configured in <code>config/application.rb</code>, these are some defaults:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">config</span><span class="p">.</span><span class="nf">generators</span> <span class="k">do</span> <span class="o">|</span><span class="n">g</span><span class="o">|</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">orm</span>             <span class="ss">:active_record</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">template_engine</span> <span class="ss">:erb</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">test_framework</span>  <span class="ss">:test_unit</span><span class="p">,</span> <span class="ss">fixture: </span><span class="kp">true</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-cfff2d0489cae78358c96652936796e2">config.generators do |g|
  g.orm             :active_record
  g.template_engine :erb
  g.test_framework  :test_unit, fixture: true
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-cfff2d0489cae78358c96652936796e2">Copiar</button>
</div>
<p>Before we customize our workflow, let's first see what our scaffold looks like:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate scaffold User name:string
<span class="go">      invoke  active_record
      create    db/migrate/20130924151154_create_users.rb
      create    app/models/user.rb
      invoke    test_unit
      create      test/models/user_test.rb
      create      test/fixtures/users.yml
      invoke  resource_route
       route    resources :users
      invoke  scaffold_controller
      create    app/controllers/users_controller.rb
      invoke    erb
      create      app/views/users
      create      app/views/users/index.html.erb
      create      app/views/users/edit.html.erb
      create      app/views/users/show.html.erb
      create      app/views/users/new.html.erb
      create      app/views/users/_form.html.erb
      invoke    test_unit
      create      test/controllers/users_controller_test.rb
      invoke    helper
      create      app/helpers/users_helper.rb
      invoke    jbuilder
      create      app/views/users/index.json.jbuilder
      create      app/views/users/show.json.jbuilder
      invoke  test_unit
      create    test/application_system_test_case.rb
      create    test/system/users_test.rb
      invoke  assets
      invoke    scss
      create      app/assets/stylesheets/users.scss
      invoke  scss
      create    app/assets/stylesheets/scaffolds.scss
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-a79af4273db4fc5b39d80e2af16cbefa">rails generate scaffold User name:string
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-a79af4273db4fc5b39d80e2af16cbefa">Copiar</button>
</div>
<p>Looking at this output, it's easy to understand how generators work in Rails 3.0 and above. The scaffold generator doesn't actually generate anything, it just invokes others to do the work. This allows us to add/replace/remove any of those invocations. For instance, the scaffold generator invokes the scaffold_controller generator, which invokes erb, test_unit and helper generators. Since each generator has a single responsibility, they are easy to reuse, avoiding code duplication.</p><p>If we want to avoid generating the default <code>app/assets/stylesheets/scaffolds.scss</code> file when scaffolding a new resource we can disable <code>scaffold_stylesheet</code>:</p><div class="code_container">
<pre><code class="highlight ruby">  <span class="n">config</span><span class="p">.</span><span class="nf">generators</span> <span class="k">do</span> <span class="o">|</span><span class="n">g</span><span class="o">|</span>
    <span class="n">g</span><span class="p">.</span><span class="nf">scaffold_stylesheet</span> <span class="kp">false</span>
  <span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-4adda3d9ea564bed0ec43a1a4f015e2a">  config.generators do |g|
    g.scaffold_stylesheet false
  end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-4adda3d9ea564bed0ec43a1a4f015e2a">Copiar</button>
</div>
<p>The next customization on the workflow will be to stop generating stylesheet and test fixture files for scaffolds altogether. We can achieve that by changing our configuration to the following:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">config</span><span class="p">.</span><span class="nf">generators</span> <span class="k">do</span> <span class="o">|</span><span class="n">g</span><span class="o">|</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">orm</span>             <span class="ss">:active_record</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">template_engine</span> <span class="ss">:erb</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">test_framework</span>  <span class="ss">:test_unit</span><span class="p">,</span> <span class="ss">fixture: </span><span class="kp">false</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">stylesheets</span>     <span class="kp">false</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-27af1eabefc8cd03b8e6ba6f014b3989">config.generators do |g|
  g.orm             :active_record
  g.template_engine :erb
  g.test_framework  :test_unit, fixture: false
  g.stylesheets     false
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-27af1eabefc8cd03b8e6ba6f014b3989">Copiar</button>
</div>
<p>If we generate another resource with the scaffold generator, we can see that stylesheet, JavaScript, and fixture files are not created anymore. If you want to customize it further, for example to use DataMapper and RSpec instead of Active Record and TestUnit, it's just a matter of adding their gems to your application and configuring your generators.</p><p>To demonstrate this, we are going to create a new helper generator that simply adds some instance variable readers. First, we create a generator within the rails namespace, as this is where rails searches for generators used as hooks:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate generator <span class="nb">rails</span>/my_helper
<span class="go">      create  lib/generators/rails/my_helper
      create  lib/generators/rails/my_helper/my_helper_generator.rb
      create  lib/generators/rails/my_helper/USAGE
      create  lib/generators/rails/my_helper/templates
      invoke  test_unit
      create    test/lib/generators/rails/my_helper_generator_test.rb
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-00c908f6078ebc0731f766ba7cda00bb">rails generate generator rails/my_helper
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-00c908f6078ebc0731f766ba7cda00bb">Copiar</button>
</div>
<p>After that, we can delete both the <code>templates</code> directory and the <code>source_root</code>
class method call from our new generator, because we are not going to need them.
Add the method below, so our generator looks like the following:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># lib/generators/rails/my_helper/my_helper_generator.rb</span>
<span class="k">class</span> <span class="nc">Rails::MyHelperGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">NamedBase</span>
  <span class="k">def</span> <span class="nf">create_helper_file</span>
    <span class="n">create_file</span> <span class="s2">"app/helpers/</span><span class="si">#{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">_helper.rb"</span><span class="p">,</span> <span class="o">&lt;&lt;-</span><span class="no">FILE</span><span class="sh">
module </span><span class="si">#{</span><span class="n">class_name</span><span class="si">}</span><span class="sh">Helper
  attr_reader :</span><span class="si">#{</span><span class="n">plural_name</span><span class="si">}</span><span class="sh">, :</span><span class="si">#{</span><span class="n">plural_name</span><span class="p">.</span><span class="nf">singularize</span><span class="si">}</span><span class="sh">
end
</span><span class="no">    FILE</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-2b2ccc6ba6126ba1b1daab434b99a3c2"># lib/generators/rails/my_helper/my_helper_generator.rb
class Rails::MyHelperGenerator &lt; Rails::Generators::NamedBase
  def create_helper_file
    create_file "app/helpers/#{file_name}_helper.rb", &lt;&lt;-FILE
module #{class_name}Helper
  attr_reader :#{plural_name}, :#{plural_name.singularize}
end
    FILE
  end
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-2b2ccc6ba6126ba1b1daab434b99a3c2">Copiar</button>
</div>
<p>We can try out our new generator by creating a helper for products:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate my_helper products
<span class="go">      create  app/helpers/products_helper.rb
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-8d862f4d8f3fcfbeb7ad8216be3e5c4b">rails generate my_helper products
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-8d862f4d8f3fcfbeb7ad8216be3e5c4b">Copiar</button>
</div>
<p>And it will generate the following helper file in <code>app/helpers</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">module</span> <span class="nn">ProductsHelper</span>
  <span class="nb">attr_reader</span> <span class="ss">:products</span><span class="p">,</span> <span class="ss">:product</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-e7f072cde878bf8838133e1782cc1731">module ProductsHelper
  attr_reader :products, :product
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-e7f072cde878bf8838133e1782cc1731">Copiar</button>
</div>
<p>Which is what we expected. We can now tell scaffold to use our new helper generator by editing <code>config/application.rb</code> once again:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">config</span><span class="p">.</span><span class="nf">generators</span> <span class="k">do</span> <span class="o">|</span><span class="n">g</span><span class="o">|</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">orm</span>             <span class="ss">:active_record</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">template_engine</span> <span class="ss">:erb</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">test_framework</span>  <span class="ss">:test_unit</span><span class="p">,</span> <span class="ss">fixture: </span><span class="kp">false</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">stylesheets</span>     <span class="kp">false</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">helper</span>          <span class="ss">:my_helper</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-07233c9e03bcec35ae8bcb584e43abbc">config.generators do |g|
  g.orm             :active_record
  g.template_engine :erb
  g.test_framework  :test_unit, fixture: false
  g.stylesheets     false
  g.helper          :my_helper
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-07233c9e03bcec35ae8bcb584e43abbc">Copiar</button>
</div>
<p>and see it in action when invoking the generator:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate scaffold Article body:text
<span class="go">      [...]
      invoke    my_helper
      create      app/helpers/articles_helper.rb
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-801a7fbdabbab8ee292615378c07573b">rails generate scaffold Article body:text
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-801a7fbdabbab8ee292615378c07573b">Copiar</button>
</div>
<p>We can notice on the output that our new helper was invoked instead of the Rails default. However one thing is missing, which is tests for our new generator and to do that, we are going to reuse old helpers test generators.</p><p>Since Rails 3.0, this is easy to do due to the hooks concept. Our new helper does not need to be focused in one specific test framework, it can simply provide a hook and a test framework just needs to implement this hook in order to be compatible.</p><p>To do that, we can change the generator this way:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># lib/generators/rails/my_helper/my_helper_generator.rb</span>
<span class="k">class</span> <span class="nc">Rails::MyHelperGenerator</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Generators</span><span class="o">::</span><span class="no">NamedBase</span>
  <span class="k">def</span> <span class="nf">create_helper_file</span>
    <span class="n">create_file</span> <span class="s2">"app/helpers/</span><span class="si">#{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">_helper.rb"</span><span class="p">,</span> <span class="o">&lt;&lt;-</span><span class="no">FILE</span><span class="sh">
module </span><span class="si">#{</span><span class="n">class_name</span><span class="si">}</span><span class="sh">Helper
  attr_reader :</span><span class="si">#{</span><span class="n">plural_name</span><span class="si">}</span><span class="sh">, :</span><span class="si">#{</span><span class="n">plural_name</span><span class="p">.</span><span class="nf">singularize</span><span class="si">}</span><span class="sh">
end
</span><span class="no">    FILE</span>
  <span class="k">end</span>

  <span class="n">hook_for</span> <span class="ss">:test_framework</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-bd6e54f882eba36b77f5cb28751c68a4"># lib/generators/rails/my_helper/my_helper_generator.rb
class Rails::MyHelperGenerator &lt; Rails::Generators::NamedBase
  def create_helper_file
    create_file "app/helpers/#{file_name}_helper.rb", &lt;&lt;-FILE
module #{class_name}Helper
  attr_reader :#{plural_name}, :#{plural_name.singularize}
end
    FILE
  end

  hook_for :test_framework
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-bd6e54f882eba36b77f5cb28751c68a4">Copiar</button>
</div>
<p>Now, when the helper generator is invoked and TestUnit is configured as the test framework, it will try to invoke both <code>Rails::TestUnitGenerator</code> and <code>TestUnit::MyHelperGenerator</code>. Since none of those are defined, we can tell our generator to invoke <code>TestUnit::Generators::HelperGenerator</code> instead, which is defined since it's a Rails generator. To do that, we just need to add:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># Search for :helper instead of :my_helper</span>
<span class="n">hook_for</span> <span class="ss">:test_framework</span><span class="p">,</span> <span class="ss">as: :helper</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-410700cb6990c60effef528a3afdedb5"># Search for :helper instead of :my_helper
hook_for :test_framework, as: :helper
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-410700cb6990c60effef528a3afdedb5">Copiar</button>
</div>
<p>And now you can re-run scaffold for another resource and see it generating tests as well!</p><h3 id="customizing-your-workflow-by-changing-generators-templates"><a class="anchorlink" href="#customizing-your-workflow-by-changing-generators-templates">6 Customizing Your Workflow by Changing Generators Templates</a></h3><p>In the step above we simply wanted to add a line to the generated helper, without adding any extra functionality. There is a simpler way to do that, and it's by replacing the templates of already existing generators, in that case <code>Rails::Generators::HelperGenerator</code>.</p><p>In Rails 3.0 and above, generators don't just look in the source root for templates, they also search for templates in other paths. And one of them is <code>lib/templates</code>. Since we want to customize <code>Rails::Generators::HelperGenerator</code>, we can do that by simply making a template copy inside <code>lib/templates/rails/helper</code> with the name <code>helper.rb</code>. So let's create that file with the following content:</p><div class="code_container">
<pre><code class="highlight erb">module <span class="cp">&lt;%=</span> <span class="n">class_name</span> <span class="cp">%&gt;</span>Helper
  attr_reader :<span class="cp">&lt;%=</span> <span class="n">plural_name</span> <span class="cp">%&gt;</span>, :<span class="cp">&lt;%=</span> <span class="n">plural_name</span><span class="p">.</span><span class="nf">singularize</span> <span class="cp">%&gt;</span>
end
</code></pre>
<textarea class="clipboard-content" id="clipboard-c8311d8ed64664b735191afbae1cd30f">module &lt;%= class_name %&gt;Helper
  attr_reader :&lt;%= plural_name %&gt;, :&lt;%= plural_name.singularize %&gt;
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-c8311d8ed64664b735191afbae1cd30f">Copiar</button>
</div>
<p>and revert the last change in <code>config/application.rb</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">config</span><span class="p">.</span><span class="nf">generators</span> <span class="k">do</span> <span class="o">|</span><span class="n">g</span><span class="o">|</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">orm</span>             <span class="ss">:active_record</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">template_engine</span> <span class="ss">:erb</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">test_framework</span>  <span class="ss">:test_unit</span><span class="p">,</span> <span class="ss">fixture: </span><span class="kp">false</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">stylesheets</span>     <span class="kp">false</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-f2b6cb07835c160e8165126b5da6704b">config.generators do |g|
  g.orm             :active_record
  g.template_engine :erb
  g.test_framework  :test_unit, fixture: false
  g.stylesheets     false
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-f2b6cb07835c160e8165126b5da6704b">Copiar</button>
</div>
<p>If you generate another resource, you can see that we get exactly the same result! This is useful if you want to customize your scaffold templates and/or layout by just creating <code>edit.html.erb</code>, <code>index.html.erb</code> and so on inside <code>lib/templates/erb/scaffold</code>.</p><p>Scaffold templates in Rails frequently use ERB tags; these tags need to be
escaped so that the generated output is valid ERB code.</p><p>For example, the following escaped ERB tag would be needed in the template
(note the extra <code>%</code>)...</p><div class="code_container">
<pre><code class="highlight ruby"><span class="o">&lt;</span><span class="sx">%%= stylesheet_include_tag :application %</span><span class="o">&gt;</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-cd244786ccf9bf6fed69d99990803d91">&lt;%%= stylesheet_include_tag :application %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-cd244786ccf9bf6fed69d99990803d91">Copiar</button>
</div>
<p>...to generate the following output:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="o">&lt;</span><span class="sx">%= stylesheet_include_tag :application %&gt;
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-083d9ff435b13d4c6069c8a0fb374f2f">&lt;%= stylesheet_include_tag :application %&gt;
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-083d9ff435b13d4c6069c8a0fb374f2f">Copiar</button>
</div>
<h3 id="adding-generators-fallbacks"><a class="anchorlink" href="#adding-generators-fallbacks">7 Adding Generators Fallbacks</a></h3><p>One last feature about generators which is quite useful for plugin generators is fallbacks. For example, imagine that you want to add a feature on top of TestUnit like <a href="https://github.com/thoughtbot/shoulda">shoulda</a> does. Since TestUnit already implements all generators required by Rails and shoulda just wants to overwrite part of it, there is no need for shoulda to reimplement some generators again, it can simply tell Rails to use a <code>TestUnit</code> generator if none was found under the <code>Shoulda</code> namespace.</p><p>We can easily simulate this behavior by changing our <code>config/application.rb</code> once again:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">config</span><span class="p">.</span><span class="nf">generators</span> <span class="k">do</span> <span class="o">|</span><span class="n">g</span><span class="o">|</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">orm</span>             <span class="ss">:active_record</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">template_engine</span> <span class="ss">:erb</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">test_framework</span>  <span class="ss">:shoulda</span><span class="p">,</span> <span class="ss">fixture: </span><span class="kp">false</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">stylesheets</span>     <span class="kp">false</span>

  <span class="c1"># Add a fallback!</span>
  <span class="n">g</span><span class="p">.</span><span class="nf">fallbacks</span><span class="p">[</span><span class="ss">:shoulda</span><span class="p">]</span> <span class="o">=</span> <span class="ss">:test_unit</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-41bc0f77c383d05f72bb4b238b8ed61a">config.generators do |g|
  g.orm             :active_record
  g.template_engine :erb
  g.test_framework  :shoulda, fixture: false
  g.stylesheets     false

  # Add a fallback!
  g.fallbacks[:shoulda] = :test_unit
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-41bc0f77c383d05f72bb4b238b8ed61a">Copiar</button>
</div>
<p>Now, if you create a Comment scaffold, you will see that the shoulda generators are being invoked, and at the end, they are just falling back to TestUnit generators:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>generate scaffold Comment body:text
<span class="go">      invoke  active_record
      create    db/migrate/20130924143118_create_comments.rb
      create    app/models/comment.rb
      invoke    shoulda
      create      test/models/comment_test.rb
      create      test/fixtures/comments.yml
      invoke  resource_route
       route    resources :comments
      invoke  scaffold_controller
      create    app/controllers/comments_controller.rb
      invoke    erb
      create      app/views/comments
      create      app/views/comments/index.html.erb
      create      app/views/comments/edit.html.erb
      create      app/views/comments/show.html.erb
      create      app/views/comments/new.html.erb
      create      app/views/comments/_form.html.erb
      invoke    shoulda
      create      test/controllers/comments_controller_test.rb
      invoke    my_helper
      create      app/helpers/comments_helper.rb
      invoke    jbuilder
      create      app/views/comments/index.json.jbuilder
      create      app/views/comments/show.json.jbuilder
      invoke  test_unit
      create    test/application_system_test_case.rb
      create    test/system/comments_test.rb
      invoke  assets
      invoke    scss
      create    app/assets/stylesheets/scaffolds.scss
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-a695e548baf3c602fc67fc94d39bb213">rails generate scaffold Comment body:text
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-a695e548baf3c602fc67fc94d39bb213">Copiar</button>
</div>
<p>Fallbacks allow your generators to have a single responsibility, increasing code reuse and reducing the amount of duplication.</p><h3 id="application-templates"><a class="anchorlink" href="#application-templates">8 Application Templates</a></h3><p>Now that you've seen how generators can be used <em>inside</em> an application, did you know they can also be used to <em>generate</em> applications too? This kind of generator is referred to as a "template". This is a brief overview of the Templates API. For detailed documentation see the <a href="rails_application_templates.html">Rails Application Templates guide</a>.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">gem</span> <span class="s2">"rspec-rails"</span><span class="p">,</span> <span class="ss">group: </span><span class="s2">"test"</span>
<span class="n">gem</span> <span class="s2">"cucumber-rails"</span><span class="p">,</span> <span class="ss">group: </span><span class="s2">"test"</span>

<span class="k">if</span> <span class="n">yes?</span><span class="p">(</span><span class="s2">"Would you like to install Devise?"</span><span class="p">)</span>
  <span class="n">gem</span> <span class="s2">"devise"</span>
  <span class="n">generate</span> <span class="s2">"devise:install"</span>
  <span class="n">model_name</span> <span class="o">=</span> <span class="n">ask</span><span class="p">(</span><span class="s2">"What would you like the user model to be called? [user]"</span><span class="p">)</span>
  <span class="n">model_name</span> <span class="o">=</span> <span class="s2">"user"</span> <span class="k">if</span> <span class="n">model_name</span><span class="p">.</span><span class="nf">blank?</span>
  <span class="n">generate</span> <span class="s2">"devise"</span><span class="p">,</span> <span class="n">model_name</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-4fef2529fa2855edd810b74ac5e946bd">gem "rspec-rails", group: "test"
gem "cucumber-rails", group: "test"

if yes?("Would you like to install Devise?")
  gem "devise"
  generate "devise:install"
  model_name = ask("What would you like the user model to be called? [user]")
  model_name = "user" if model_name.blank?
  generate "devise", model_name
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-4fef2529fa2855edd810b74ac5e946bd">Copiar</button>
</div>
<p>In the above template we specify that the application relies on the <code>rspec-rails</code> and <code>cucumber-rails</code> gem so these two will be added to the <code>test</code> group in the <code>Gemfile</code>. Then we pose a question to the user about whether or not they would like to install Devise. If the user replies "y" or "yes" to this question, then the template will add Devise to the <code>Gemfile</code> outside of any group and then runs the <code>devise:install</code> generator. This template then takes the users input and runs the <code>devise</code> generator, with the user's answer from the last question being passed to this generator.</p><p>Imagine that this template was in a file called <code>template.rb</code>. We can use it to modify the outcome of the <code>rails new</code> command by using the <code>-m</code> option and passing in the filename:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>new thud <span class="nt">-m</span> template.rb
</code></pre>
<textarea class="clipboard-content" id="clipboard-0f8dbf15393c93a096aef648abcc3f15">rails new thud -m template.rb
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-0f8dbf15393c93a096aef648abcc3f15">Copiar</button>
</div>
<p>This command will generate the <code>Thud</code> application, and then apply the template to the generated output.</p><p>Templates don't have to be stored on the local system, the <code>-m</code> option also supports online templates:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>new thud <span class="nt">-m</span> https://gist.github.com/radar/722911/raw/
</code></pre>
<textarea class="clipboard-content" id="clipboard-4eb2c2727a8e8c08d4171fe3be8aa543">rails new thud -m https://gist.github.com/radar/722911/raw/
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-4eb2c2727a8e8c08d4171fe3be8aa543">Copiar</button>
</div>
<p>Whilst the final section of this guide doesn't cover how to generate the most awesome template known to man, it will take you through the methods available at your disposal so that you can develop it yourself. These same methods are also available for generators.</p><h3 id="adding-command-line-arguments"><a class="anchorlink" href="#adding-command-line-arguments">9 Adding Command Line Arguments</a></h3><p>Rails generators can be easily modified to accept custom command line arguments. This functionality comes from <a href="https://www.rubydoc.info/github/erikhuda/thor/master/Thor/Base/ClassMethods#class_option-instance_method">Thor</a>:</p><div class="code_container">
<pre><code class="highlight plaintext">class_option :scope, type: :string, default: 'read_products'
</code></pre>
<textarea class="clipboard-content" id="clipboard-274bdf02e99b3ee81b0abaef27c00d12">class_option :scope, type: :string, default: 'read_products'
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-274bdf02e99b3ee81b0abaef27c00d12">Copiar</button>
</div>
<p>Now our generator can be invoked as follows:</p><div class="code_container">
<pre><code class="highlight console"><span class="go">rails generate initializer --scope write_products
</span></code></pre>
<textarea class="clipboard-content" id="clipboard-17b884647e596ed11b9c7a2fdd2be800"></textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-17b884647e596ed11b9c7a2fdd2be800">Copiar</button>
</div>
<p>The command line arguments are accessed through the <code>options</code> method inside the generator class. e.g:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="vi">@scope</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s1">'scope'</span><span class="p">]</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-32643750151690ffae608d82c1027a76">@scope = options['scope']
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-32643750151690ffae608d82c1027a76">Copiar</button>
</div>
<h3 id="generator-methods"><a class="anchorlink" href="#generator-methods">10 Generator methods</a></h3><p>The following are methods available for both generators and templates for Rails.</p><div class="note"><p>Methods provided by Thor are not covered this guide and can be found in <a href="https://rdoc.info/github/erikhuda/thor/master/Thor/Actions.html">Thor's documentation</a></p></div><h4 id="gem"><a class="anchorlink" href="#gem">10.1 <code>gem</code></a></h4><p>Specifies a gem dependency of the application.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">gem</span> <span class="s2">"rspec"</span><span class="p">,</span> <span class="ss">group: </span><span class="s2">"test"</span><span class="p">,</span> <span class="ss">version: </span><span class="s2">"2.1.0"</span>
<span class="n">gem</span> <span class="s2">"devise"</span><span class="p">,</span> <span class="s2">"1.1.5"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-e42c3162688adeaafcf8f90fd034bf2d">gem "rspec", group: "test", version: "2.1.0"
gem "devise", "1.1.5"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-e42c3162688adeaafcf8f90fd034bf2d">Copiar</button>
</div>
<p>Available options are:</p>
<ul>
<li>
<code>:group</code> - The group in the <code>Gemfile</code> where this gem should go.</li>
<li>
<code>:version</code> - The version string of the gem you want to use. Can also be specified as the second argument to the method.</li>
<li>
<code>:git</code> - The URL to the git repository for this gem.</li>
</ul>
<p>Any additional options passed to this method are put on the end of the line:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">gem</span> <span class="s2">"devise"</span><span class="p">,</span> <span class="ss">git: </span><span class="s2">"https://github.com/plataformatec/devise.git"</span><span class="p">,</span> <span class="ss">branch: </span><span class="s2">"master"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-a80dace0da73137197eb37d800cb4c7c">gem "devise", git: "https://github.com/plataformatec/devise.git", branch: "master"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-a80dace0da73137197eb37d800cb4c7c">Copiar</button>
</div>
<p>The above code will put the following line into <code>Gemfile</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">gem</span> <span class="s2">"devise"</span><span class="p">,</span> <span class="ss">git: </span><span class="s2">"https://github.com/plataformatec/devise.git"</span><span class="p">,</span> <span class="ss">branch: </span><span class="s2">"master"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-3d39a78e955a334829928073a1d44869">gem "devise", git: "https://github.com/plataformatec/devise.git", branch: "master"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-3d39a78e955a334829928073a1d44869">Copiar</button>
</div>
<h4 id="gem-group"><a class="anchorlink" href="#gem-group">10.2 <code>gem_group</code></a></h4><p>Wraps gem entries inside a group:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">gem_group</span> <span class="ss">:development</span><span class="p">,</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s2">"rspec-rails"</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-450350f925249b700d5d746ce394de1b">gem_group :development, :test do
  gem "rspec-rails"
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-450350f925249b700d5d746ce394de1b">Copiar</button>
</div>
<h4 id="add-source"><a class="anchorlink" href="#add-source">10.3 <code>add_source</code></a></h4><p>Adds a specified source to <code>Gemfile</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">add_source</span> <span class="s2">"http://gems.github.com"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-8fb01749b358625c0c61841be48e433b">add_source "http://gems.github.com"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-8fb01749b358625c0c61841be48e433b">Copiar</button>
</div>
<p>This method also takes a block:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">add_source</span> <span class="s2">"http://gems.github.com"</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s2">"rspec-rails"</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-4317e635360f130281d15d62eaf63423">add_source "http://gems.github.com" do
  gem "rspec-rails"
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-4317e635360f130281d15d62eaf63423">Copiar</button>
</div>
<h4 id="inject-into-file"><a class="anchorlink" href="#inject-into-file">10.4 <code>inject_into_file</code></a></h4><p>Injects a block of code into a defined position in your file.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">inject_into_file</span> <span class="s1">'name_of_file.rb'</span><span class="p">,</span> <span class="ss">after: </span><span class="s2">"#The code goes below this line. Don't forget the Line break at the end</span><span class="se">\n</span><span class="s2">"</span> <span class="k">do</span> <span class="o">&lt;&lt;-</span><span class="no">'RUBY'</span><span class="sh">
  puts "Hello World"
</span><span class="no">RUBY</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-d454403468be274b5a171dedb78ec5ab">inject_into_file 'name_of_file.rb', after: "#The code goes below this line. Don't forget the Line break at the end\n" do &lt;&lt;-'RUBY'
  puts "Hello World"
RUBY
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-d454403468be274b5a171dedb78ec5ab">Copiar</button>
</div>
<h4 id="gsub-file"><a class="anchorlink" href="#gsub-file">10.5 <code>gsub_file</code></a></h4><p>Replaces text inside a file.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">gsub_file</span> <span class="s1">'name_of_file.rb'</span><span class="p">,</span> <span class="s1">'method.to_be_replaced'</span><span class="p">,</span> <span class="s1">'method.the_replacing_code'</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-cb5682ac2ef972bb6cfcf0244c1484be">gsub_file 'name_of_file.rb', 'method.to_be_replaced', 'method.the_replacing_code'
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-cb5682ac2ef972bb6cfcf0244c1484be">Copiar</button>
</div>
<p>Regular Expressions can be used to make this method more precise. You can also use <code>append_file</code> and <code>prepend_file</code> in the same way to place code at the beginning and end of a file respectively.</p><h4 id="application"><a class="anchorlink" href="#application">10.6 <code>application</code></a></h4><p>Adds a line to <code>config/application.rb</code> directly after the application class definition.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">application</span> <span class="s2">"config.asset_host = 'http://example.com'"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-490009800086ac3962daba6f4322b6fc">application "config.asset_host = 'http://example.com'"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-490009800086ac3962daba6f4322b6fc">Copiar</button>
</div>
<p>This method can also take a block:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">application</span> <span class="k">do</span>
  <span class="s2">"config.asset_host = 'http://example.com'"</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-21188df227f71b966f6c6066eb850dfd">application do
  "config.asset_host = 'http://example.com'"
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-21188df227f71b966f6c6066eb850dfd">Copiar</button>
</div>
<p>Available options are:</p>
<ul>
<li>
<code>:env</code> - Specify an environment for this configuration option. If you wish to use this option with the block syntax the recommended syntax is as follows:</li>
</ul>
<div class="code_container">
<pre><code class="highlight ruby"><span class="n">application</span><span class="p">(</span><span class="kp">nil</span><span class="p">,</span> <span class="ss">env: </span><span class="s2">"development"</span><span class="p">)</span> <span class="k">do</span>
  <span class="s2">"config.asset_host = 'http://localhost:3000'"</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-06da90c27e413e7f474a5ebf06b6d829">application(nil, env: "development") do
  "config.asset_host = 'http://localhost:3000'"
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-06da90c27e413e7f474a5ebf06b6d829">Copiar</button>
</div>
<h4 id="git"><a class="anchorlink" href="#git">10.7 <code>git</code></a></h4><p>Runs the specified git command:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">git</span> <span class="ss">:init</span>
<span class="n">git</span> <span class="ss">add: </span><span class="s2">"."</span>
<span class="n">git</span> <span class="ss">commit: </span><span class="s2">"-m First commit!"</span>
<span class="n">git</span> <span class="ss">add: </span><span class="s2">"onefile.rb"</span><span class="p">,</span> <span class="ss">rm: </span><span class="s2">"badfile.cxx"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-0174a60f45d9a134606d2231acaf2a9c">git :init
git add: "."
git commit: "-m First commit!"
git add: "onefile.rb", rm: "badfile.cxx"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-0174a60f45d9a134606d2231acaf2a9c">Copiar</button>
</div>
<p>The values of the hash here being the arguments or options passed to the specific git command. As per the final example shown here, multiple git commands can be specified at a time, but the order of their running is not guaranteed to be the same as the order that they were specified in.</p><h4 id="vendor"><a class="anchorlink" href="#vendor">10.8 <code>vendor</code></a></h4><p>Places a file into <code>vendor</code> which contains the specified code.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">vendor</span> <span class="s2">"sekrit.rb"</span><span class="p">,</span> <span class="s1">'#top secret stuff'</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-383efa15108df43bd51a8ca5b32e98d5">vendor "sekrit.rb", '#top secret stuff'
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-383efa15108df43bd51a8ca5b32e98d5">Copiar</button>
</div>
<p>This method also takes a block:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">vendor</span> <span class="s2">"seeds.rb"</span> <span class="k">do</span>
  <span class="s2">"puts 'in your app, seeding your database'"</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-de9608d3644dd679ff6867c44266b393">vendor "seeds.rb" do
  "puts 'in your app, seeding your database'"
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-de9608d3644dd679ff6867c44266b393">Copiar</button>
</div>
<h4 id="lib"><a class="anchorlink" href="#lib">10.9 <code>lib</code></a></h4><p>Places a file into <code>lib</code> which contains the specified code.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">lib</span> <span class="s2">"special.rb"</span><span class="p">,</span> <span class="s2">"p Rails.root"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-7b62653eae9d8b276f25d867b8555f17">lib "special.rb", "p Rails.root"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-7b62653eae9d8b276f25d867b8555f17">Copiar</button>
</div>
<p>This method also takes a block:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">lib</span> <span class="s2">"super_special.rb"</span> <span class="k">do</span>
  <span class="s2">"puts 'Super special!'"</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-51448f7cb027b4583d7dd00bf7eaf4f9">lib "super_special.rb" do
  "puts 'Super special!'"
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-51448f7cb027b4583d7dd00bf7eaf4f9">Copiar</button>
</div>
<h4 id="rakefile"><a class="anchorlink" href="#rakefile">10.10 <code>rakefile</code></a></h4><p>Creates a Rake file in the <code>lib/tasks</code> directory of the application.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">rakefile</span> <span class="s2">"test.rake"</span><span class="p">,</span> <span class="s1">'task(:hello) { puts "Hello, there" }'</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-5d9d4fa869654e3e0aa8a08b4e70b9ac">rakefile "test.rake", 'task(:hello) { puts "Hello, there" }'
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-5d9d4fa869654e3e0aa8a08b4e70b9ac">Copiar</button>
</div>
<p>This method also takes a block:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">rakefile</span> <span class="s2">"test.rake"</span> <span class="k">do</span>
  <span class="sx">%Q{
    task rock: :environment do
      puts "Rockin'"
    end
  }</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-8805c665fd95889033031024aeb5ec8d">rakefile "test.rake" do
  %Q{
    task rock: :environment do
      puts "Rockin'"
    end
  }
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-8805c665fd95889033031024aeb5ec8d">Copiar</button>
</div>
<h4 id="initializer"><a class="anchorlink" href="#initializer">10.11 <code>initializer</code></a></h4><p>Creates an initializer in the <code>config/initializers</code> directory of the application:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">initializer</span> <span class="s2">"begin.rb"</span><span class="p">,</span> <span class="s2">"puts 'this is the beginning'"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-43afa7bf853d4d4ca07a4ed965f05453">initializer "begin.rb", "puts 'this is the beginning'"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-43afa7bf853d4d4ca07a4ed965f05453">Copiar</button>
</div>
<p>This method also takes a block, expected to return a string:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">initializer</span> <span class="s2">"begin.rb"</span> <span class="k">do</span>
  <span class="s2">"puts 'this is the beginning'"</span>
<span class="k">end</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-0a3e9e3b64297e4acdcd00dbd6a1253d">initializer "begin.rb" do
  "puts 'this is the beginning'"
end
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-0a3e9e3b64297e4acdcd00dbd6a1253d">Copiar</button>
</div>
<h4 id="generate"><a class="anchorlink" href="#generate">10.12 <code>generate</code></a></h4><p>Runs the specified generator where the first argument is the generator name and the remaining arguments are passed directly to the generator.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">generate</span> <span class="s2">"scaffold"</span><span class="p">,</span> <span class="s2">"forums title:string description:text"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-a890a8b8690f01d3d38e90cabf31a60c">generate "scaffold", "forums title:string description:text"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-a890a8b8690f01d3d38e90cabf31a60c">Copiar</button>
</div>
<h4 id="rake"><a class="anchorlink" href="#rake">10.13 <code>rake</code></a></h4><p>Runs the specified Rake task.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">rake</span> <span class="s2">"db:migrate"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-c6c69df039eaacebaac645913138a902">rake "db:migrate"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-c6c69df039eaacebaac645913138a902">Copiar</button>
</div>
<p>Available options are:</p>
<ul>
<li>
<code>:env</code> - Specifies the environment in which to run this rake task.</li>
<li>
<code>:sudo</code> - Whether or not to run this task using <code>sudo</code>. Defaults to <code>false</code>.</li>
</ul>
<h4 id="route"><a class="anchorlink" href="#route">10.14 <code>route</code></a></h4><p>Adds text to the <code>config/routes.rb</code> file:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">route</span> <span class="s2">"resources :people"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-103b630a223c2a6b2a6c275acbc2077f">route "resources :people"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-103b630a223c2a6b2a6c275acbc2077f">Copiar</button>
</div>
<h4 id="readme"><a class="anchorlink" href="#readme">10.15 <code>readme</code></a></h4><p>Output the contents of a file in the template's <code>source_path</code>, usually a README.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">readme</span> <span class="s2">"README"</span>
</code></pre>
<textarea class="clipboard-content" id="clipboard-05c35f0f516d7367ea42e1b75ad8c620">readme "README"
</textarea>
<button class="clipboard-button" data-clipboard-target="#clipboard-05c35f0f516d7367ea42e1b75ad8c620">Copiar</button>
</div>


        <h3>Feedback</h3>
        <p>
          Você é incentivado a ajudar a melhorar a qualidade deste guia.
        </p>
        <p>
          Por favor, contribua se vir qualquer erros, inclusive erros de digitação.
          Para começar, você pode ler nossa sessão de <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">contribuindo com a documentação</a>.
        </p>
        <p>
          Você também pode encontrar conteúdo incompleto ou coisas que não estão atualizadas.
          Por favor, adicione qualquer documentação em falta na master do Rails. Certifique-se de checar o
          <a href="http://edgeguides.rubyonrails.org">Edge Guides (en-US)</a> primeiro para verificar
          se o problema já foi resolvido ou não no branch master.
          Verifique as <a href="ruby_on_rails_guides_guidelines.html">Diretrizes do Guia Ruby on Rails</a>
          para estilo e convenções.
        </p>
        <p>
          Se, por qualquer motivo, você encontrar algo para consertar, mas não conseguir consertá-lo, por favor
          <a href="https://github.com/campuscode/rails-guides-pt-BR/issues">abra uma issue no nosso Guia</a>.
        </p>
        <p>
          E por último, mas não menos importante, qualquer tipo de discussão sobre a documentação do Ruby on Rails
          é muito bem vinda na <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs">lista de discussão rubyonrails-docs</a> e nas
          <a href="https://github.com/campuscode/rails-guides-pt-BR/issues">issues do Guia em português</a>.
        </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p> Este projeto está licenciado sob uma licença <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a></p>
<p>"Rails", "Ruby on Rails", e o logotipo Rails são marcas comerciais de David Heinemeier Hansson. Todos os direitos reservados.</p>

    </div>
  </div>
</body>
</html>
