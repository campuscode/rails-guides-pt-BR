<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>API de Internacionalização do Rails (I18n) — Ruby on Rails Guides</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  <link rel="stylesheet" type="text/css" href="stylesheets/highlight.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/search.css" data-turbolinks-track="reload">
  <link href="images/favicon.ico" rel="icon" type="image/x-icon" />
  <script src="javascripts/turbolinks.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/clipboard.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/guides.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/search.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/lunr-documents.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/lunr.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/toggle-theme.js" data-turbolinks-track="reload"></script>
  <meta property="og:title" content="API de Internacionalização do Rails (I18n) — Ruby on Rails Guides" />
  <meta name="description" content="API de Internacionalização do Rails (I18n)Ruby I18n (abreviação de internacionalização) é uma gem fornecida com o Ruby on Rails (a partir do Rails 2.2) que fornece uma estrutura extensível e fácil de usar para traduzir sua aplicação para um único idioma personalizado que não seja o inglês ou para fornecer suporte em multilinguagens em sua aplicação.O processo de &quot;internacionalização&quot; geralmente significa abstrair todas as strings e outros bits específicos do código do idioma (como formatos de data ou moeda) de sua aplicação. O processo de &quot;localização&quot; significa fornecer traduções e formatos locais para esses bits.1Portanto, no processo de internacionalização de sua aplicação Rails, você deve: Verificar se tem suporte para i18n. Informar ao Rails onde encontrar dicionários locais. Informar ao Rails como definir, preservar e alternar as localidades. No processo de &quot;localização&quot; de sua aplicação, você provavelmente fará os três passos abaixo: Substituir ou complementar a localidade padrão do Rails - por exemplo formatos de data e hora, nomes de meses, nomes de modelos do Active Record, etc. Abstrair strings em sua aplicação utilizando dicionários com chave - por exemplo mensagens flash, texto estático em suas visualizações etc. Armazenar os dicionários resultantes em um lugar específico. Este documento o guiará pela API I18n e contém um tutorial sobre como internacionalizar uma aplicação Rails desde o início. Como o I18n funciona no Ruby on Rails Como usar corretamente o I18n em uma aplicação RESTful de várias maneiras Como usar o I18n para traduzir erros do Active Record ou assuntos de email do Action Mailer Algumas outras ferramentas para avançar no processo de tradução de sua aplicação." />
  <meta property="og:description" content="API de Internacionalização do Rails (I18n)Ruby I18n (abreviação de internacionalização) é uma gem fornecida com o Ruby on Rails (a partir do Rails 2.2) que fornece uma estrutura extensível e fácil de usar para traduzir sua aplicação para um único idioma personalizado que não seja o inglês ou para fornecer suporte em multilinguagens em sua aplicação.O processo de &quot;internacionalização&quot; geralmente significa abstrair todas as strings e outros bits específicos do código do idioma (como formatos de data ou moeda) de sua aplicação. O processo de &quot;localização&quot; significa fornecer traduções e formatos locais para esses bits.1Portanto, no processo de internacionalização de sua aplicação Rails, você deve: Verificar se tem suporte para i18n. Informar ao Rails onde encontrar dicionários locais. Informar ao Rails como definir, preservar e alternar as localidades. No processo de &quot;localização&quot; de sua aplicação, você provavelmente fará os três passos abaixo: Substituir ou complementar a localidade padrão do Rails - por exemplo formatos de data e hora, nomes de meses, nomes de modelos do Active Record, etc. Abstrair strings em sua aplicação utilizando dicionários com chave - por exemplo mensagens flash, texto estático em suas visualizações etc. Armazenar os dicionários resultantes em um lugar específico. Este documento o guiará pela API I18n e contém um tutorial sobre como internacionalizar uma aplicação Rails desde o início. Como o I18n funciona no Ruby on Rails Como usar corretamente o I18n em uma aplicação RESTful de várias maneiras Como usar o I18n para traduzir erros do Active Record ou assuntos de email do Action Mailer Algumas outras ferramentas para avançar no processo de tradução de sua aplicação." />
  <meta property="og:locale" content="pt_BR" />
  <meta property="og:site_name" content="Guia Ruby on Rails" />
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
  <meta property="og:type" content="website" />
</head>
<body class="guide">
  <div>
    <div id="version-badge">v7.0.8</div>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">Veja mais em <a href="https://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        Mais Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://rubyonrails.org/blog">Blog</a></li>
        <li class="more-info"><a href="https://guides.rubyonrails.org/">Guia oficial</a></li>
        <li class="more-info"><a href="https://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="https://discuss.rubyonrails.org/">Forum</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">Contribua no GitHub</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Voltar para a página principal">Guiarails.com.br</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-search guides-search-large">
          <input class="search-box search-box-large nav-item" type="text" placeholder="Digite o termo...">
          <div class="search-results"></div>
          <div class="search-spinner">Aguarde...</div>
        </li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">Guias</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
            <dl class="guides-section-container">
                <div class="guides-section">
                  <dt>Comece aqui</dt>
                  <dd><a href="getting_started.html">Começando com Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Models</dt>
                  <dd><a href="active_record_basics.html">Active Record Basics</a></dd>
                  <dd><a href="active_record_migrations.html">Active Record Migrations</a></dd>
                  <dd><a href="active_record_validations.html">Active Record Validations</a></dd>
                  <dd><a href="active_record_callbacks.html">Active Record Callbacks</a></dd>
                  <dd><a href="association_basics.html">Active Record Associations</a></dd>
                  <dd><a href="active_record_querying.html">Active Record Query Interface</a></dd>
                  <dd><a href="active_model_basics.html">Active Model Basics</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Views</dt>
                  <dd><a href="action_view_overview.html">Action View Overview</a></dd>
                  <dd><a href="layouts_and_rendering.html">Layouts and Rendering in Rails</a></dd>
                  <dd><a href="action_view_helpers.html">Action View Helpers</a></dd>
                  <dd><a href="form_helpers.html">Action View Form Helpers</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Controllers</dt>
                  <dd><a href="action_controller_overview.html">Action Controller Overview</a></dd>
                  <dd><a href="routing.html">Rails Routing from the Outside In</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Outros componentes</dt>
                  <dd><a href="active_support_core_extensions.html">Active Support Core Extensions</a></dd>
                  <dd><a href="action_mailer_basics.html">Action Mailer Basics</a></dd>
                  <dd><a href="action_mailbox_basics.html">Action Mailbox Basics</a></dd>
                  <dd><a href="action_text_overview.html">Action Text Overview</a></dd>
                  <dd><a href="active_job_basics.html">Active Job Basics</a></dd>
                  <dd><a href="active_storage_overview.html">Active Storage Overview</a></dd>
                  <dd><a href="action_cable_overview.html">Action Cable Overview</a></dd>
                  <dd><a href="webpacker.html">Webpacker</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Indo mais fundo</dt>
                  <dd><a href="i18n.html">Rails Internationalization (I18n) API</a></dd>
                  <dd><a href="testing.html">Testing Rails Applications</a></dd>
                  <dd><a href="security.html">Securing Rails Applications</a></dd>
                  <dd><a href="debugging_rails_applications.html">Debugging Rails Applications</a></dd>
                  <dd><a href="configuring.html">Configuring Rails Applications</a></dd>
                  <dd><a href="command_line.html">The Rails Command Line</a></dd>
                  <dd><a href="asset_pipeline.html">The Asset Pipeline</a></dd>
                  <dd><a href="working_with_javascript_in_rails.html">Working with JavaScript in Rails</a></dd>
                  <dd><a href="initialization.html">The Rails Initialization Process</a></dd>
                  <dd><a href="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</a></dd>
                  <dd><a href="classic_to_zeitwerk_howto.html">Classic para Zeitwerk - Como Fazer</a></dd>
                  <dd><a href="caching_with_rails.html">Caching with Rails: An Overview</a></dd>
                  <dd><a href="active_support_instrumentation.html">Active Support Instrumentation</a></dd>
                  <dd><a href="api_app.html">Using Rails for API-only Applications</a></dd>
                  <dd><a href="active_record_postgresql.html">Active Record and PostgreSQL</a></dd>
                  <dd><a href="active_record_multiple_databases.html">Multiple Databases with Active Record</a></dd>
                  <dd><a href="active_record_encryption.html">Active Record Encryption</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Estendendo o Rails</dt>
                  <dd><a href="plugins.html">The Basics of Creating Rails Plugins</a></dd>
                  <dd><a href="rails_on_rack.html">Rails on Rack</a></dd>
                  <dd><a href="generators.html">Creating and Customizing Rails Generators &amp; Templates</a></dd>
                  <dd><a href="engines.html">Getting Started with Engines</a></dd>
                  <dd><a href="threading_and_code_execution.html">Threading and Code Execution in Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Contribuições</dt>
                  <dd><a href="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a></dd>
                  <dd><a href="api_documentation_guidelines.html">API Documentation Guidelines</a></dd>
                  <dd><a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Políticas</dt>
                  <dd><a href="maintenance_policy.html">Maintenance Policy for Ruby on Rails</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Release Notes</dt>
                  <dd><a href="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</a></dd>
                  <dd><a href="7_0_release_notes.html">Version 7.0 - Dezembro 2021</a></dd>
                  <dd><a href="6_1_release_notes.html">Version 6.1 - Dezembro 2020</a></dd>
                  <dd><a href="6_0_release_notes.html">Version 6.0 - Agosto 2019</a></dd>
                  <dd><a href="5_2_release_notes.html">Version 5.2 - April 2018</a></dd>
                  <dd><a href="5_1_release_notes.html">Version 5.1 - April 2017</a></dd>
                  <dd><a href="5_0_release_notes.html">Version 5.0 - June 2016</a></dd>
                  <dd><a href="4_2_release_notes.html">Version 4.2 - December 2014</a></dd>
                  <dd><a href="4_1_release_notes.html">Version 4.1 - April 2014</a></dd>
                  <dd><a href="4_0_release_notes.html">Version 4.0 - June 2013</a></dd>
                  <dd><a href="3_2_release_notes.html">Version 3.2 - January 2012</a></dd>
                  <dd><a href="3_1_release_notes.html">Version 3.1 - August 2011</a></dd>
                  <dd><a href="3_0_release_notes.html">Version 3.0 - August 2010</a></dd>
                  <dd><a href="2_3_release_notes.html">Version 2.3 - March 2009</a></dd>
                  <dd><a href="2_2_release_notes.html">Version 2.2 - November 2008</a></dd>
                </div>
            </div>
          </dl>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">Contribua</a></li>
        <li class="guides-search guides-search-small">
          <input class="search-box search-box-small nav-item" type="text" placeholder="Digite o termo...">
          <div class="search-results"></div>
          <div class="search-spinner">Aguarde...</div>
        </li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">Guias</option>
              <optgroup label="Comece aqui">
                  <option value="getting_started.html">Começando com Rails</option>
              </optgroup>
              <optgroup label="Models">
                  <option value="active_record_basics.html">Active Record Basics</option>
                  <option value="active_record_migrations.html">Active Record Migrations</option>
                  <option value="active_record_validations.html">Active Record Validations</option>
                  <option value="active_record_callbacks.html">Active Record Callbacks</option>
                  <option value="association_basics.html">Active Record Associations</option>
                  <option value="active_record_querying.html">Active Record Query Interface</option>
                  <option value="active_model_basics.html">Active Model Basics</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="action_view_overview.html">Action View Overview</option>
                  <option value="layouts_and_rendering.html">Layouts and Rendering in Rails</option>
                  <option value="action_view_helpers.html">Action View Helpers</option>
                  <option value="form_helpers.html">Action View Form Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller Overview</option>
                  <option value="routing.html">Rails Routing from the Outside In</option>
              </optgroup>
              <optgroup label="Outros componentes">
                  <option value="active_support_core_extensions.html">Active Support Core Extensions</option>
                  <option value="action_mailer_basics.html">Action Mailer Basics</option>
                  <option value="action_mailbox_basics.html">Action Mailbox Basics</option>
                  <option value="action_text_overview.html">Action Text Overview</option>
                  <option value="active_job_basics.html">Active Job Basics</option>
                  <option value="active_storage_overview.html">Active Storage Overview</option>
                  <option value="action_cable_overview.html">Action Cable Overview</option>
                  <option value="webpacker.html">Webpacker</option>
              </optgroup>
              <optgroup label="Indo mais fundo">
                  <option value="i18n.html">Rails Internationalization (I18n) API</option>
                  <option value="testing.html">Testing Rails Applications</option>
                  <option value="security.html">Securing Rails Applications</option>
                  <option value="debugging_rails_applications.html">Debugging Rails Applications</option>
                  <option value="configuring.html">Configuring Rails Applications</option>
                  <option value="command_line.html">The Rails Command Line</option>
                  <option value="asset_pipeline.html">The Asset Pipeline</option>
                  <option value="working_with_javascript_in_rails.html">Working with JavaScript in Rails</option>
                  <option value="initialization.html">The Rails Initialization Process</option>
                  <option value="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</option>
                  <option value="classic_to_zeitwerk_howto.html">Classic para Zeitwerk - Como Fazer</option>
                  <option value="caching_with_rails.html">Caching with Rails: An Overview</option>
                  <option value="active_support_instrumentation.html">Active Support Instrumentation</option>
                  <option value="api_app.html">Using Rails for API-only Applications</option>
                  <option value="active_record_postgresql.html">Active Record and PostgreSQL</option>
                  <option value="active_record_multiple_databases.html">Multiple Databases with Active Record</option>
                  <option value="active_record_encryption.html">Active Record Encryption</option>
              </optgroup>
              <optgroup label="Estendendo o Rails">
                  <option value="plugins.html">The Basics of Creating Rails Plugins</option>
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">Creating and Customizing Rails Generators &amp; Templates</option>
                  <option value="engines.html">Getting Started with Engines</option>
                  <option value="threading_and_code_execution.html">Threading and Code Execution in Rails</option>
              </optgroup>
              <optgroup label="Contribuições">
                  <option value="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</option>
                  <option value="api_documentation_guidelines.html">API Documentation Guidelines</option>
                  <option value="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</option>
              </optgroup>
              <optgroup label="Políticas">
                  <option value="maintenance_policy.html">Maintenance Policy for Ruby on Rails</option>
              </optgroup>
              <optgroup label="Release Notes">
                  <option value="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</option>
                  <option value="7_0_release_notes.html">Version 7.0 - Dezembro 2021</option>
                  <option value="6_1_release_notes.html">Version 6.1 - Dezembro 2020</option>
                  <option value="6_0_release_notes.html">Version 6.0 - Agosto 2019</option>
                  <option value="5_2_release_notes.html">Version 5.2 - April 2018</option>
                  <option value="5_1_release_notes.html">Version 5.1 - April 2017</option>
                  <option value="5_0_release_notes.html">Version 5.0 - June 2016</option>
                  <option value="4_2_release_notes.html">Version 4.2 - December 2014</option>
                  <option value="4_1_release_notes.html">Version 4.1 - April 2014</option>
                  <option value="4_0_release_notes.html">Version 4.0 - June 2013</option>
                  <option value="3_2_release_notes.html">Version 3.2 - January 2012</option>
                  <option value="3_1_release_notes.html">Version 3.1 - August 2011</option>
                  <option value="3_0_release_notes.html">Version 3.0 - August 2010</option>
                  <option value="2_3_release_notes.html">Version 2.3 - March 2009</option>
                  <option value="2_2_release_notes.html">Version 2.2 - November 2008</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>API de Internacionalização do Rails (I18n)</h2><p>Ruby I18n (abreviação de internacionalização) é uma <em>gem</em> fornecida com o Ruby on Rails (a partir do Rails 2.2) que fornece uma estrutura extensível e fácil de usar para <strong>traduzir sua aplicação para um único idioma personalizado</strong> que não seja o inglês ou <strong>para fornecer suporte em multilinguagens</strong> em sua aplicação.</p><p>O processo de &quot;internacionalização&quot; geralmente significa abstrair todas as <em>strings</em> e outros <em>bits</em> específicos do código do idioma (como formatos de data ou moeda) de sua aplicação. O processo de &quot;localização&quot; significa fornecer traduções e formatos locais para esses <em>bits</em>.<sup class="footnote" id="footnote-1-ref"><a href="#footnote-1">1</a></sup></p><p>Portanto, no processo de internacionalização de sua aplicação Rails, você deve:</p>
<ul>
<li>Verificar se tem suporte para i18n.</li>
<li>Informar ao Rails onde encontrar dicionários locais.</li>
<li>Informar ao Rails como definir, preservar e alternar as localidades.</li>
</ul>
<p>No processo de &quot;localização&quot; de sua aplicação, você provavelmente fará os três passos abaixo:</p>
<ul>
<li>Substituir ou complementar a localidade padrão do Rails - por exemplo formatos de data e hora, nomes de meses, nomes de modelos do <em>Active Record</em>, etc.</li>
<li>Abstrair <em>strings</em> em sua aplicação utilizando dicionários com chave - por exemplo mensagens <em>flash</em>, texto estático em suas visualizações etc.</li>
<li>Armazenar os dicionários resultantes em um lugar específico.</li>
</ul>
<p>Este documento o guiará pela API I18n e contém um tutorial sobre como internacionalizar uma aplicação Rails desde o início.</p>
<ul>
<li>Como o I18n funciona no Ruby on Rails</li>
<li>Como usar corretamente o I18n em uma aplicação RESTful de várias maneiras</li>
<li>Como usar o I18n para traduzir erros do <em>Active Record</em> ou assuntos de email do <em>Action Mailer</em></li>
<li>Algumas outras ferramentas para avançar no processo de tradução de sua aplicação.</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li>
<a href="#como-o-i18n-funciona-no-ruby-on-rails">Como o I18n funciona no Ruby on Rails</a>

<ul>
<li><a href="#a-arquitetura-geral-da-biblioteca">A Arquitetura Geral da Biblioteca</a></li>
<li><a href="#a-api-p%C3%BAblica-i18n">A API Pública I18n</a></li>
</ul>
</li>
<li>
<a href="#configurando-a-aplica%C3%A7%C3%A3o-rails-para-internacionaliza%C3%A7%C3%A3o">Configurando a Aplicação Rails para Internacionalização</a>

<ul>
<li><a href="#configurando-o-m%C3%B3dulo-i18n">Configurando o Módulo I18n</a></li>
<li><a href="#gerenciando-a-localidade-entre-requisi%C3%A7%C3%B5es">Gerenciando a Localidade entre Requisições</a></li>
</ul>
</li>
<li>
<a href="#internationalization-and-localization">Internationalization and Localization</a>

<ul>
<li><a href="#abstracting-localized-code">Abstracting Localized Code</a></li>
<li><a href="#providing-translations-for-internationalized-strings">Providing Translations for Internationalized Strings</a></li>
<li><a href="#passing-variables-to-translations">Passing Variables to Translations</a></li>
<li><a href="#adding-date-time-formats">Adding Date/Time Formats</a></li>
<li><a href="#inflection-rules-for-other-locales">Inflection Rules for Other Locales</a></li>
<li><a href="#localized-views">Localized Views</a></li>
<li><a href="#organization-of-locale-files">Organization of Locale Files</a></li>
</ul>
</li>
<li>
<a href="#overview-of-the-i18n-api-features">Overview of the I18n API Features</a>

<ul>
<li><a href="#looking-up-translations">Looking up Translations</a></li>
<li><a href="#pluralization">Pluralization</a></li>
<li><a href="#setting-and-passing-a-locale">Setting and Passing a Locale</a></li>
<li><a href="#using-safe-html-translations">Using Safe HTML Translations</a></li>
<li><a href="#translations-for-active-record-models">Translations for Active Record Models</a></li>
<li><a href="#translations-for-action-mailer-e-mail-subjects">Translations for Action Mailer E-Mail Subjects</a></li>
<li><a href="#overview-of-other-built-in-methods-that-provide-i18n-support">Overview of Other Built-In Methods that Provide I18n Support</a></li>
</ul>
</li>
<li><a href="#how-to-store-your-custom-translations">How to Store your Custom Translations</a></li>
<li>
<a href="#customize-your-i18n-setup">Customize Your I18n Setup</a>

<ul>
<li><a href="#using-different-backends">Using Different Backends</a></li>
<li><a href="#using-different-exception-handlers">Using Different Exception Handlers</a></li>
</ul>
</li>
<li><a href="#translating-model-content">Translating Model Content</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#contributing-to-rails-i18n">Contributing to Rails I18n</a></li>
<li><a href="#resources">Resources</a></li>
<li><a href="#authors">Authors</a></li>
<li><a href="#footnotes">Footnotes</a></li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <div class="note"><p>O <em>framework</em> Ruby I18n fornece todas os meios necessários para internacionalização/localização da sua aplicação Rails. Você também pode usar várias <em>gems</em> disponíveis para adicionar funcionalidades ou recursos adicionais. Veja <a href="https://github.com/svenfuchs/rails-i18n">rails-i18n gem</a> para mais informações.</p></div><h3 id="como-o-i18n-funciona-no-ruby-on-rails"><a class="anchorlink" href="#como-o-i18n-funciona-no-ruby-on-rails">1 Como o I18n funciona no Ruby on Rails</a></h3><p>A internacionalização é um problema complexo. As línguas diferem de muitas maneiras (por exemplo, nas regras de pluralização), sendo difícil fornecer ferramentas para resolver todos os problemas de uma vez. Por esse motivo, a API I18n do Rails concentra-se em:</p>
<ul>
<li>fornecer suporte para o inglês e línguas similares por padrão</li>
<li>facilitar a personalização e extensão de tudo para outras línguas</li>
</ul>
<p>Como parte dessa solução, <strong>cada string estática no framework Rails</strong> - por exemplo, mensagens de validação do Active Record, formatos de data e hora - <strong>foi internacionalizada</strong>. <em>Localização</em> de uma aplicação Rails significa definir valores traduzidos para essas strings nos idiomas desejados.</p><p>Para localizar, armazenar e atualizar <em>conteúdo</em> em sua aplicação (por exemplo, traduzir postagens de blog), consulte a seção <a href="#translating-model-content">Traduzindo Conteúdo do Model</a>.</p><h4 id="a-arquitetura-geral-da-biblioteca"><a class="anchorlink" href="#a-arquitetura-geral-da-biblioteca">1.1 A Arquitetura Geral da Biblioteca</a></h4><p>Assim, a gem Ruby I18n é dividida em duas partes:</p>
<ul>
<li>A API pública do framework i18n - um módulo Ruby com métodos públicos que definem como a biblioteca funciona</li>
<li>Um backend padrão (intencionalmente chamado de backend <em>Simple</em>) que implementa esses métodos</li>
</ul>
<p>Como usuário, você deve sempre acessar apenas os métodos públicos no módulo I18n, mas é útil conhecer as capacidades do backend.</p><div class="note"><p>É possível substituir o backend Simple fornecido por um mais poderoso, que armazenaria dados de tradução em um banco de dados relacional, dicionário GetText, ou similar. Consulte a seção <a href="#using-different-backends">Usando Backends Diferentes</a> abaixo.</p></div><h4 id="a-api-pública-i18n"><a class="anchorlink" href="#a-api-p%C3%BAblica-i18n">1.2 A API Pública I18n</a></h4><p>Os métodos mais importantes da API I18n são:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">translate</span> <span class="c1"># Pesquisar traduções de texto</span>
<span class="n">localize</span>  <span class="c1"># Localizar objetos de Data e Hora nos formatos locais</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="translate # Pesquisar traduções de texto
localize  # Localizar objetos de Data e Hora nos formatos locais
">Copy</button>
</div>
<p>Eles têm os aliases #t e #l, para que você possa usá-los assim:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'store.title'</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">l</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t 'store.title'
I18n.l Time.now
">Copy</button>
</div>
<p>Também há métodos de leitura e escrita para os seguintes atributos:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">load_path</span>                 <span class="c1"># Anuncie seus arquivos de tradução personalizados</span>
<span class="n">locale</span>                    <span class="c1"># Obtenha e defina o idioma atual</span>
<span class="n">default_locale</span>            <span class="c1"># Obtenha e defina o idioma padrão</span>
<span class="n">available_locales</span>         <span class="c1"># Locais permitidos disponíveis para a aplicação</span>
<span class="n">enforce_available_locales</span> <span class="c1"># Reforce a permissão de idioma (true ou false)</span>
<span class="n">exception_handler</span>         <span class="c1"># Use um manipulador de exceção diferente</span>
<span class="n">backend</span>                   <span class="c1"># Use um backend diferente</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="load_path                 # Anuncie seus arquivos de tradução personalizados
locale                    # Obtenha e defina o idioma atual
default_locale            # Obtenha e defina o idioma padrão
available_locales         # Locais permitidos disponíveis para a aplicação
enforce_available_locales # Reforce a permissão de idioma (true ou false)
exception_handler         # Use um manipulador de exceção diferente
backend                   # Use um backend diferente
">Copy</button>
</div>
<p>Então, vamos internacionalizar uma aplicação Rails simples do zero nos próximos capítulos!</p><h3 id="configurando-a-aplicação-rails-para-internacionalização"><a class="anchorlink" href="#configurando-a-aplica%C3%A7%C3%A3o-rails-para-internacionaliza%C3%A7%C3%A3o">2 Configurando a Aplicação Rails para Internacionalização</a></h3><p>Há alguns passos para começar a usar o suporte à internacionalização (I18n) em uma aplicação Rails.</p><h4 id="configurando-o-módulo-i18n"><a class="anchorlink" href="#configurando-o-m%C3%B3dulo-i18n">2.1 Configurando o Módulo I18n</a></h4><p>Seguindo a filosofia de <em>convenção sobre configuração</em>, o Rails I18n fornece algumas <em>strings</em> com tradução padrão. Quando são necessárias <em>strings</em> com tradução diferentes, elas podem ser sobrescritas.</p><p>O Rails adiciona todos os arquivos <code>.rb</code> e <code>.yml</code> do diretório <code>config/locales</code> ao <strong>caminho de carregamento de traduções</strong> automaticamente.</p><p>O arquivo padrão <code>en.yml</code> neste diretório inclui um par de exemplos de <em>strings</em> para tradução:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">hello</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Hello</span><span class="nv"> </span><span class="s">world"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='en:
  hello: "Hello world"
'>Copy</button>
</div>
<p>Isso significa que, na localidade <code>:en</code>, a chave <em>hello</em> será mapeada para a <em>string</em> <em>Hello world</em>. Cada <em>string</em> dentro do Rails é internacionalizada dessa maneira. Consulte, por exemplo, as mensagens de validação do Active Model no arquivo <a href="https://github.com/rails/rails/blob/main/activemodel/lib/active_model/locale/en.yml">activemodel/lib/active_model/locale/en.yml</a> ou os formatos de hora e data no arquivo <a href="https://github.com/rails/rails/blob/main/activesupport/lib/active_support/locale/en.yml"><code>activesupport/lib/active_support/locale/en.yml</code></a>. Você pode usar YAML ou hashes Ruby padrão para armazenar traduções no <em>backend</em> (Simple) padrão.</p><p>A biblioteca I18n usará o <strong>inglês</strong> como <strong>localidade padrão</strong>. Ou seja, se uma localidade diferente não estiver configurada, <code>:en</code> será usada para procurar traduções.</p><div class="note"><p>A biblioteca I18n adota uma <strong>abordagem pragmática</strong> para as chaves de localidade (após <a href="https://groups.google.com/g/rails-i18n/c/FN7eLH2-lHA">algumas discussões</a>), incluindo apenas a parte da <em>localidade</em> ("idioma"), como <code>:en</code>, <code>:pl</code>, não a parte da <em>região</em>, como <code>:"en-US"</code> ou <code>:"en-GB"</code>, que são tradicionalmente usadas para separar "idiomas" e "configurações regionais" ou "dialetos". Muitas aplicações internacionais usam apenas o elemento "idioma" de uma localidade, como  <code>:cs</code>, <code>:th</code>, ou <code>:es</code>  (para tcheco, tailandês e espanhol). No entanto, também existem diferenças regionais dentro de diferentes grupos de idiomas que podem ser importantes. Por exemplo, na localidade <code>:"en-US"</code>, você teria $ como símbolo de moeda, enquanto na <code>:"en-GB"</code>, você teria £. Nada impede você de separar configurações regionais e outras dessa maneira: você só precisa fornecer a localidade completa "Inglês - Reino Unido" em um dicionário <code>:"en-GB"</code>.</p></div><p>O *<em>caminho de carregamento de traduções</em> (<code>I18n.load_path</code>) é um <em>array</em> de caminhos para arquivos que serão carregados automaticamente. Configurar este caminho permite a personalização da estrutura do diretório de traduções e do esquema de nomeação de arquivos.</p><div class="note"><p>O <em>backend</em> carrega essas traduções de forma preguiçosa (<em>lazy-load</em>) quando uma tradução é consultada pela primeira vez. Esse <em>backend</em> pode ser trocado por outro mesmo depois que as traduções já foram anunciadas.</p></div><p>Você pode alterar a localidade padrão, bem como configurar os caminhos de carregamento de traduções em <code>config/application.rb</code> da seguinte forma:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">config</span><span class="p">.</span><span class="nf">i18n</span><span class="p">.</span><span class="nf">load_path</span> <span class="o">+=</span> <span class="no">Dir</span><span class="p">[</span><span class="no">Rails</span><span class="p">.</span><span class="nf">root</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">'my'</span><span class="p">,</span> <span class="s1">'locales'</span><span class="p">,</span> <span class="s1">'*.{rb,yml}'</span><span class="p">)]</span>
<span class="n">config</span><span class="p">.</span><span class="nf">i18n</span><span class="p">.</span><span class="nf">default_locale</span> <span class="o">=</span> <span class="ss">:de</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}')]
config.i18n.default_locale = :de
">Copy</button>
</div>
<p>O caminho de carregamento deve ser especificado antes de qualquer consulta de tradução. Para alterar a localidade padrão a partir de um inicializador em vez de <code>config/application.rb</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># config/initializers/locale.rb</span>

<span class="c1"># Onde a biblioteca I18n deve procurar arquivos de tradução</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">load_path</span> <span class="o">+=</span> <span class="no">Dir</span><span class="p">[</span><span class="no">Rails</span><span class="p">.</span><span class="nf">root</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">'lib'</span><span class="p">,</span> <span class="s1">'locale'</span><span class="p">,</span> <span class="s1">'*.{rb,yml}'</span><span class="p">)]</span>

<span class="c1"># Localidades permitidas disponíveis para a aplicação</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">available_locales</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:en</span><span class="p">,</span> <span class="ss">:pt</span><span class="p">]</span>

<span class="c1"># Definir localidade padrão para algo diferente de :en</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">default_locale</span> <span class="o">=</span> <span class="ss">:pt</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# config/initializers/locale.rb

# Onde a biblioteca I18n deve procurar arquivos de tradução
I18n.load_path += Dir[Rails.root.join('lib', 'locale', '*.{rb,yml}')]

# Localidades permitidas disponíveis para a aplicação
I18n.available_locales = [:en, :pt]

# Definir localidade padrão para algo diferente de :en
I18n.default_locale = :pt
">Copy</button>
</div>
<p>Note que anexar diretamente a <code>I18n.load_path</code> em vez de à configuração i18n da aplicação <strong>não</strong> substituirá traduções de <em>gems</em> externas.</p><h4 id="gerenciando-a-localidade-entre-requisições"><a class="anchorlink" href="#gerenciando-a-localidade-entre-requisi%C3%A7%C3%B5es">2.2 Gerenciando a Localidade entre Requisições</a></h4><p>Uma aplicação localizada provavelmente precisará oferecer suporte a várias localidades. Para isso, a localidade deve ser definida no início de cada requisição para que todas as <em>strings</em> sejam traduzidas usando a localidade desejada durante a vida útil dessa requisição.</p><p>A localidade padrão é usada para todas as traduções, a menos que <code>I18n.locale=</code> ou <code>I18n.with_locale</code> seja usado.</p><p>A <code>I18n.locale</code> pode vazar para requisições subsequentes servidas pela mesma thread/processo se não for consistentemente definida em cada <em>controller</em>. Por exemplo, executar <code>I18n.locale = :es</code> em uma requisição POST terá efeitos para todas as requisições posteriores aos controllers que não definem a localidade, mas apenas nessa thread/processo específico. Por esse motivo, em vez de <code>I18n.locale =</code> você pode usar <code>I18n.with_locale</code>, que não tem esse problema de vazamento.</p><p>A localidade pode ser definida em um <code>around_action</code> no <code>ApplicationController</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">around_action</span> <span class="ss">:switch_locale</span>

<span class="k">def</span> <span class="nf">switch_locale</span><span class="p">(</span><span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
  <span class="n">locale</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:locale</span><span class="p">]</span> <span class="o">||</span> <span class="no">I18n</span><span class="p">.</span><span class="nf">default_locale</span>
  <span class="no">I18n</span><span class="p">.</span><span class="nf">with_locale</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="around_action :switch_locale

def switch_locale(&amp;action)
  locale = params[:locale] || I18n.default_locale
  I18n.with_locale(locale, &amp;action)
end
">Copy</button>
</div>
<p>Este exemplo ilustra isso usando um parâmetro de consulta de URL para definir a localidade (por exemplo, <code>http://example.com/books?locale=pt</code>). Com essa abordagem, <code>http://localhost:3000?locale=pt</code> renderiza a localização em português, enquanto <code>http://localhost:3000?locale=de</code> carrega a localização em alemão.</p><p>A localidade pode ser definida de várias maneiras diferentes.</p><h5 id="definindo-a-localidade-a-partir-do-nome-do-domínio"><a class="anchorlink" href="#definindo-a-localidade-a-partir-do-nome-do-dom%C3%ADnio">2.2.1 Definindo a Localidade a partir do Nome do Domínio</a></h5><p>Uma opção que você tem é definir a localidade a partir do nome de domínio onde sua aplicação está em execução. Por exemplo, queremos que <code>www.example.com</code> carregue a localidade em inglês (ou padrão) e <code>www.example.es</code> carregue a localidade em espanhol. Assim, o nome de <strong>domínio de nível superior</strong> é usado para a definição da localidade. Isso tem várias vantagens:</p>
<ul>
<li>A localidade é uma parte <strong>óbvia</strong> da URL.</li>
<li>As pessoas compreendem intuitivamente em qual idioma o conteúdo será exibido.</li>
<li>É muito trivial de implementar no Rails.</li>
<li>Os motores de busca parecem gostar de conteúdo em diferentes idiomas em domínios diferentes e interligados.</li>
</ul>
<p>Você pode implementar isso da seguinte forma no seu <code>ApplicationController</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">around_action</span> <span class="ss">:switch_locale</span>

<span class="k">def</span> <span class="nf">switch_locale</span><span class="p">(</span><span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
  <span class="n">locale</span> <span class="o">=</span> <span class="n">extract_locale_from_tld</span> <span class="o">||</span> <span class="no">I18n</span><span class="p">.</span><span class="nf">default_locale</span>
  <span class="no">I18n</span><span class="p">.</span><span class="nf">with_locale</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># Obtenha o idioma do domínio de nível superior ou retorne +nil+ se esse idioma não estiver disponível</span>
<span class="c1"># Você precisa adicionar algo como:</span>
<span class="c1">#   127.0.0.1 application.com</span>
<span class="c1">#   127.0.0.1 application.it</span>
<span class="c1">#   127.0.0.1 application.pl</span>
<span class="c1"># no seu arquivo /etc/hosts para testar isso localmente</span>
<span class="k">def</span> <span class="nf">extract_locale_from_tld</span>
  <span class="n">parsed_locale</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="nf">host</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">).</span><span class="nf">last</span>
  <span class="no">I18n</span><span class="p">.</span><span class="nf">available_locales</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">).</span><span class="nf">include?</span><span class="p">(</span><span class="n">parsed_locale</span><span class="p">)</span> <span class="p">?</span> <span class="n">parsed_locale</span> <span class="p">:</span> <span class="kp">nil</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="around_action :switch_locale

def switch_locale(&amp;action)
  locale = extract_locale_from_tld || I18n.default_locale
  I18n.with_locale(locale, &amp;action)
end

# Obtenha o idioma do domínio de nível superior ou retorne +nil+ se esse idioma não estiver disponível
# Você precisa adicionar algo como:
#   127.0.0.1 application.com
#   127.0.0.1 application.it
#   127.0.0.1 application.pl
# no seu arquivo /etc/hosts para testar isso localmente
def extract_locale_from_tld
  parsed_locale = request.host.split('.').last
  I18n.available_locales.map(&amp;:to_s).include?(parsed_locale) ? parsed_locale : nil
end
">Copy</button>
</div>
<p>Também podemos definir o idioma a partir do <em>subdomínio</em> de uma maneira muito semelhante:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># Obtenha o código do idioma do subdomínio da solicitação (como http://it.application.local:3000)</span>
<span class="c1"># Você precisa adicionar algo como:</span>
<span class="c1">#   127.0.0.1 gr.application.local</span>
<span class="c1"># no seu arquivo /etc/hosts para testar isso localmente</span>
<span class="k">def</span> <span class="nf">extract_locale_from_subdomain</span>
  <span class="n">parsed_locale</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="nf">subdomains</span><span class="p">.</span><span class="nf">first</span>
  <span class="no">I18n</span><span class="p">.</span><span class="nf">available_locales</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">).</span><span class="nf">include?</span><span class="p">(</span><span class="n">parsed_locale</span><span class="p">)</span> <span class="p">?</span> <span class="n">parsed_locale</span> <span class="p">:</span> <span class="kp">nil</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# Obtenha o código do idioma do subdomínio da solicitação (como http://it.application.local:3000)
# Você precisa adicionar algo como:
#   127.0.0.1 gr.application.local
# no seu arquivo /etc/hosts para testar isso localmente
def extract_locale_from_subdomain
  parsed_locale = request.subdomains.first
  I18n.available_locales.map(&amp;:to_s).include?(parsed_locale) ? parsed_locale : nil
end
">Copy</button>
</div>
<p>Se sua aplicação incluir um menu de troca de idioma, você terá algo assim:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">link_to</span><span class="p">(</span><span class="s2">"Deutsch"</span><span class="p">,</span> <span class="s2">"</span><span class="si">#{</span><span class="no">APP_CONFIG</span><span class="p">[</span><span class="ss">:deutsch_website_url</span><span class="p">]</span><span class="si">}#{</span><span class="n">request</span><span class="p">.</span><span class="nf">env</span><span class="p">[</span><span class="s1">'PATH_INFO'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="link_to(&quot;Deutsch&quot;, &quot;#{APP_CONFIG[:deutsch_website_url]}#{request.env['PATH_INFO']}&quot;)
">Copy</button>
</div>
<p>supondo que você defina <code>APP_CONFIG[:deutsch_website_url]</code> para algum valor como <code>http://www.application.de</code>.</p><p>Esta solução tem as vantagens mencionadas anteriormente, no entanto, você pode não conseguir ou não querer fornecer diferentes localizações ("versões de idioma") em domínios diferentes. A solução mais óbvia seria incluir o código do idioma nos parâmetros da URL (ou caminho da solicitação).</p><h5 id="definindo-o-idioma-a-partir-de-parâmetros-da-url"><a class="anchorlink" href="#definindo-o-idioma-a-partir-de-par%C3%A2metros-da-url">2.2.2 Definindo o Idioma a partir de Parâmetros da URL</a></h5><p>A maneira mais comum de definir (e passar) o idioma seria incluí-lo nos parâmetros da URL, como fizemos no <code>I18n.with_locale(params[:locale], &amp;action)</code> <em>around_action</em> no primeiro exemplo. Gostaríamos de ter URLs como <a href="http://www.example.com/books?locale=ja">www.example.com/books?locale=ja</a> ou <a href="http://www.example.com/ja/books">www.example.com/ja/books</a> neste caso.</p><p>Essa abordagem compartilha quase o mesmo conjunto de vantagens de definir o idioma a partir do nome do domínio, principalmente por ser RESTful e estar em conformidade com o restante da World Wide Web. No entanto, demanda um pouco mais de esforço para ser implementada.</p><p>Obter o idioma de <code>params</code> e defini-lo de acordo não é difícil; incluí-lo em cada URL e assim <strong>passá-lo por meio da requisição é</strong>. Incluir uma opção explícita em cada URL, por exemplo, <code>link_to(books_url(locale: I18n.locale))</code>, seria tedioso e provavelmente impossível, é claro.</p><p>O Rails contém infraestrutura para "centralizar decisões dinâmicas sobre os URLs" em seu <a href="https://api.rubyonrails.org/v7.0.8/classes/ActionDispatch/Routing/Mapper/Base.html#method-i-default_url_options"><code>ApplicationController#default_url_options</code></a>, que é útil precisamente nesse cenário: ele nos permite definir "padrões" para <a href="https://api.rubyonrails.org/v7.0.8/classes/ActionDispatch/Routing/UrlFor.html#method-i-url_for"><code>url_for</code></a> e métodos auxiliares dependentes dele (implementando/substituindo <code>default_url_options</code>).</p><p>Podemos incluir algo assim no nosso <code>ApplicationController</code> então:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># app/controllers/application_controller.rb</span>
<span class="k">def</span> <span class="nf">default_url_options</span>
  <span class="p">{</span> <span class="ss">locale: </span><span class="no">I18n</span><span class="p">.</span><span class="nf">locale</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# app/controllers/application_controller.rb
def default_url_options
  { locale: I18n.locale }
end
">Copy</button>
</div>
<p>Todo método auxiliar dependente de <code>url_for</code> (por exemplo, auxiliares para rotas nomeadas como <code>root_path</code> ou <code>root_url</code>, rotas de recursos como <code>books_path</code> ou <code>books_url</code>, etc.) agora incluirá <strong>automaticamente o idioma na <em>string</em> de consulta</strong>, como isto: <code>http://localhost:3001/?locale=ja</code>.</p><p>Você pode estar satisfeito com isso. No entanto, impacta a legibilidade das URLs, quando o idioma "pendura" no final de cada URL na sua aplicação. Além disso, do ponto de vista arquitetônico, o idioma geralmente está hierarquicamente acima das outras partes do domínio da aplicação: e as URLs devem refletir isso.</p><p>Provavelmente, você quer que as URLs se pareçam com isso: <code>http://www.example.com/en/books</code> (que carrega o idioma inglês) e <code>http://www.example.com/nl/books</code> (que carrega o idioma holandês). Isso é possível com a estratégia de "sobrepor <code>default_url_options</code>" mencionada acima: você só precisa configurar suas rotas com <a href="https://api.rubyonrails.org/v7.0.8/classes/ActionDispatch/Routing/Mapper/Scoping.html"><code>scope</code></a>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># config/routes.rb</span>
<span class="n">scope</span> <span class="s2">"/:locale"</span> <span class="k">do</span>
  <span class="n">resources</span> <span class="ss">:books</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# config/routes.rb
scope "/:locale" do
  resources :books
end
'>Copy</button>
</div>
<p>Agora, quando você chama o método <code>books_path</code>, você deve obter <code>"/en/books"</code> (para o idioma padrão). Uma URL como <code>http://localhost:3001/nl/books</code> deve carregar o idioma holandês e chamadas subsequentes para <code>books_path</code> devem retornar <code>"/nl/books"</code> (porque o idioma mudou).</p><div class="warning"><p>Como o valor de retorno de <code>default_url_options</code> é armazenado em <em>cache</em> por solicitação, as URLs em um seletor de idioma não podem ser geradas chamando auxiliares em um <em>loop</em> que define o <code>I18n.locale</code> correspondente em cada iteração. Em vez disso, deixe <code>I18n.locale</code> intocado e passe uma opção explícita <code>:locale</code> para o auxiliar, ou edite <code>request.original_fullpath</code>.</p></div><p>Se você não deseja forçar o uso de um idioma nas suas rotas, pode usar um escopo de caminho opcional (indicado pelos parênteses) assim:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># config/routes.rb</span>
<span class="n">scope</span> <span class="s2">"(:locale)"</span><span class="p">,</span> <span class="ss">locale: </span><span class="sr">/en|nl/</span> <span class="k">do</span>
  <span class="n">resources</span> <span class="ss">:books</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# config/routes.rb
scope "(:locale)", locale: /en|nl/ do
  resources :books
end
'>Copy</button>
</div>
<p>Com essa abordagem, você não receberá um <code>Routing Error</code> ao acessar seus recursos, como  <code>http://localhost:3001/books</code> sem um idioma. Isso é útil quando você deseja usar o idioma padrão quando não especificado.</p><p>Claro, você precisa ter um cuidado especial com a URL raiz (geralmente "homepage" ou "dashboard") da sua aplicação. Uma URL como <code>http://localhost:3001/nl</code> não funcionará automaticamente, porque a declaração <code>root to: "dashboard#index"</code> no seu <code>routes.rb</code> não leva em consideração o idioma. (E com razão: há apenas uma URL "root").</p><p>Você provavelmente precisaria mapear URLs como estas:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># config/routes.rb</span>
<span class="n">get</span> <span class="s1">'/:locale'</span> <span class="o">=&gt;</span> <span class="s1">'dashboard#index'</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# config/routes.rb
get '/:locale' =&gt; 'dashboard#index'
">Copy</button>
</div>
<p>Tenha um cuidado especial com a <strong>ordem das suas rotas</strong>, para que essa declaração de rota não "anule" outras. (Você pode querer adicioná-la diretamente antes da declaração <code>root :to</code>.)</p><div class="note"><p>Dê uma olhada em várias gems que simplificam o trabalho com rotas:  <a href="https://github.com/svenfuchs/routing-filter/tree/master">routing_filter</a>, <a href="https://github.com/enriclluelles/route_translator">route_translator</a>.</p></div><h5 id="definindo-o-idioma-a-partir-das-preferências-do-usuário"><a class="anchorlink" href="#definindo-o-idioma-a-partir-das-prefer%C3%AAncias-do-usu%C3%A1rio">2.2.3 Definindo o Idioma a partir das Preferências do Usuário</a></h5><p>Uma aplicação com usuários autenticados pode permitir que os usuários definam uma preferência de idioma por meio da interface da aplicação. Com essa abordagem, a preferência de idioma selecionada pelo usuário é persistida no banco de dados e usada para definir o idioma para solicitações autenticadas por esse usuário.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">around_action</span> <span class="ss">:switch_locale</span>

<span class="k">def</span> <span class="nf">switch_locale</span><span class="p">(</span><span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
  <span class="n">locale</span> <span class="o">=</span> <span class="n">current_user</span><span class="p">.</span><span class="nf">try</span><span class="p">(</span><span class="ss">:locale</span><span class="p">)</span> <span class="o">||</span> <span class="no">I18n</span><span class="p">.</span><span class="nf">default_locale</span>
  <span class="no">I18n</span><span class="p">.</span><span class="nf">with_locale</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="around_action :switch_locale

def switch_locale(&amp;action)
  locale = current_user.try(:locale) || I18n.default_locale
  I18n.with_locale(locale, &amp;action)
end
">Copy</button>
</div>
<h5 id="escolhendo-um-idioma-implícito"><a class="anchorlink" href="#escolhendo-um-idioma-impl%C3%ADcito">2.2.4 Escolhendo um Idioma Implícito</a></h5><p>Quando um idioma explícito não foi definido para uma solicitação (por exemplo, por meio de um dos métodos acima), a aplicação deve tentar inferir o idioma desejado.</p><h6 id="inferindo-o-idioma-do-cabeçalho-de-idioma"><a class="anchorlink" href="#inferindo-o-idioma-do-cabe%C3%A7alho-de-idioma">2.2.4.1 Inferindo o Idioma do Cabeçalho de Idioma</a></h6><p>O cabeçalho HTTP <code>Accept-Language</code> indica o idioma preferido para a resposta da solicitação. Navegadores <a href="https://www.w3.org/International/questions/qa-lang-priorities">configuram esse valor de cabeçalho com base nas configurações de preferência de idioma do usuário</a>, tornando-o uma boa escolha inicial ao inferir um idioma.</p><p>Uma implementação trivial usando um cabeçalho <code>Accept-Language</code> ser</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">def</span> <span class="nf">switch_locale</span><span class="p">(</span><span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
  <span class="n">logger</span><span class="p">.</span><span class="nf">debug</span> <span class="s2">"* Accept-Language: </span><span class="si">#{</span><span class="n">request</span><span class="p">.</span><span class="nf">env</span><span class="p">[</span><span class="s1">'HTTP_ACCEPT_LANGUAGE'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">locale</span> <span class="o">=</span> <span class="n">extract_locale_from_accept_language_header</span>
  <span class="n">logger</span><span class="p">.</span><span class="nf">debug</span> <span class="s2">"* Locale set to '</span><span class="si">#{</span><span class="n">locale</span><span class="si">}</span><span class="s2">'"</span>
  <span class="no">I18n</span><span class="p">.</span><span class="nf">with_locale</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
<span class="k">end</span>

<span class="kp">private</span>
  <span class="k">def</span> <span class="nf">extract_locale_from_accept_language_header</span>
    <span class="n">request</span><span class="p">.</span><span class="nf">env</span><span class="p">[</span><span class="s1">'HTTP_ACCEPT_LANGUAGE'</span><span class="p">].</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/^[a-z]{2}/</span><span class="p">).</span><span class="nf">first</span>
  <span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="def switch_locale(&amp;action)
  logger.debug &quot;* Accept-Language: #{request.env['HTTP_ACCEPT_LANGUAGE']}&quot;
  locale = extract_locale_from_accept_language_header
  logger.debug &quot;* Locale set to '#{locale}'&quot;
  I18n.with_locale(locale, &amp;action)
end

private
  def extract_locale_from_accept_language_header
    request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first
  end
">Copy</button>
</div>
<p>Na prática, é necessário um código mais robusto para fazer isso de forma confiável. A biblioteca <a href="https://github.com/iain/http_accept_language/tree/master">http_accept_language</a> de Iain Hecker ou o middleware Rack <a href="https://github.com/rack/rack-contrib/blob/master/lib/rack/contrib/locale.rb">locale</a> de Ryan Tomayko oferecem soluções para esse problema.</p><h6 id="inferindo-o-idioma-a-partir-da-geolocalização-por-ip"><a class="anchorlink" href="#inferindo-o-idioma-a-partir-da-geolocaliza%C3%A7%C3%A3o-por-ip">2.2.4.2 Inferindo o Idioma a partir da Geolocalização por IP</a></h6><p>O endereço IP do cliente que faz a solicitação pode ser usado para inferir a região do cliente e, portanto, seu idioma. Serviços como <a href="https://dev.maxmind.com/geoip/geolite2-free-geolocation-data">GeoLite2 Country</a> ou gems como <a href="https://github.com/alexreisner/geocoder">geocoder</a> podem ser usados para implementar essa abordagem.</p><p>Em geral, essa abordagem é muito menos confiável do que usar o cabeçalho de idioma e não é recomendada para a maioria das aplicações web.</p><h5 id="armazenando-o-idioma-a-partir-da-sessão-ou-cookies"><a class="anchorlink" href="#armazenando-o-idioma-a-partir-da-sess%C3%A3o-ou-cookies">2.2.5 Armazenando o Idioma a partir da Sessão ou <em>Cookies</em></a></h5><div class="warning"><p>Você pode ser tentado a armazenar o idioma escolhido em uma <em>sessão</em> ou em um <em>cookie</em>. No entanto, <strong>não faça isso</strong>. O idioma deve ser transparente e fazer parte da URL. Dessa forma, você não quebrará as suposições básicas das pessoas sobre a web: se você enviar uma URL a um amigo, eles deveriam ver a mesma página e conteúdo que você. Um termo sofisticado para isso seria que você está sendo <a href="https://en.wikipedia.org/wiki/Representational_State_Transfer"><em>RESTful</em></a>. Leia mais sobre a abordagem RESTful nos <a href="https://www.infoq.com/articles/rest-introduction">artigos de Stefan Tilkov</a>. Às vezes, há exceções a essa regra, e essas são discutidas abaixo.</p></div><h3 id="internationalization-and-localization"><a class="anchorlink" href="#internationalization-and-localization">3 Internationalization and Localization</a></h3><p>OK! Now you've initialized I18n support for your Ruby on Rails application and told it which locale to use and how to preserve it between requests.</p><p>Next we need to <em>internationalize</em> our application by abstracting every locale-specific element. Finally, we need to <em>localize</em> it by providing necessary translations for these abstracts.</p><p>Given the following example:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># config/routes.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="ss">to: </span><span class="s2">"home#index"</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# config/routes.rb
Rails.application.routes.draw do
  root to: "home#index"
end
'>Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># app/controllers/application_controller.rb</span>
<span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>

  <span class="n">around_action</span> <span class="ss">:switch_locale</span>

  <span class="k">def</span> <span class="nf">switch_locale</span><span class="p">(</span><span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
    <span class="n">locale</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:locale</span><span class="p">]</span> <span class="o">||</span> <span class="no">I18n</span><span class="p">.</span><span class="nf">default_locale</span>
    <span class="no">I18n</span><span class="p">.</span><span class="nf">with_locale</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">action</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# app/controllers/application_controller.rb
class ApplicationController &lt; ActionController::Base

  around_action :switch_locale

  def switch_locale(&amp;action)
    locale = params[:locale] || I18n.default_locale
    I18n.with_locale(locale, &amp;action)
  end
end
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># app/controllers/home_controller.rb</span>
<span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="n">flash</span><span class="p">[</span><span class="ss">:notice</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Hello Flash"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# app/controllers/home_controller.rb
class HomeController &lt; ApplicationController
  def index
    flash[:notice] = "Hello Flash"
  end
end
'>Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight erb"><span class="c">&lt;!-- app/views/home/index.html.erb --&gt;</span>
<span class="nt">&lt;h1&gt;</span>Hello World<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">flash</span><span class="p">[</span><span class="ss">:notice</span><span class="p">]</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;!-- app/views/home/index.html.erb --&gt;
&lt;h1&gt;Hello World&lt;/h1&gt;
&lt;p&gt;&lt;%= flash[:notice] %&gt;&lt;/p&gt;
">Copy</button>
</div>
<p><img src="images/i18n/demo_untranslated.png" alt="rails i18n demo untranslated"></p><h4 id="abstracting-localized-code"><a class="anchorlink" href="#abstracting-localized-code">3.1 Abstracting Localized Code</a></h4><p>In our code, there are two strings written in English that will be rendered in our response ("Hello Flash" and "Hello World"). To internationalize this code, these strings need to be replaced by calls to Rails' <code>#t</code> helper with an appropriate key for each string:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># app/controllers/home_controller.rb</span>
<span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="n">flash</span><span class="p">[</span><span class="ss">:notice</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">(</span><span class="ss">:hello_flash</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# app/controllers/home_controller.rb
class HomeController &lt; ApplicationController
  def index
    flash[:notice] = t(:hello_flash)
  end
end
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight erb"><span class="c">&lt;!-- app/views/home/index.html.erb --&gt;</span>
<span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="n">t</span> <span class="ss">:hello_world</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">flash</span><span class="p">[</span><span class="ss">:notice</span><span class="p">]</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;!-- app/views/home/index.html.erb --&gt;
&lt;h1&gt;&lt;%= t :hello_world %&gt;&lt;/h1&gt;
&lt;p&gt;&lt;%= flash[:notice] %&gt;&lt;/p&gt;
">Copy</button>
</div>
<p>Now, when this view is rendered, it will show an error message which tells you that the translations for the keys <code>:hello_world</code> and <code>:hello_flash</code> are missing.</p><p><img src="images/i18n/demo_translation_missing.png" alt="rails i18n demo translation missing"></p><div class="note"><p>Rails adds a <code>t</code> (<code>translate</code>) helper method to your views so that you do not need to spell out <code>I18n.t</code> all the time. Additionally this helper will catch missing translations and wrap the resulting error message into a <code>&lt;span class="translation_missing"&gt;</code>.</p></div><h4 id="providing-translations-for-internationalized-strings"><a class="anchorlink" href="#providing-translations-for-internationalized-strings">3.2 Providing Translations for Internationalized Strings</a></h4><p>Add the missing translations into the translation dictionary files:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="c1"># config/locales/en.yml</span>
<span class="na">en</span><span class="pi">:</span>
  <span class="na">hello_world</span><span class="pi">:</span> <span class="s">Hello world!</span>
  <span class="na">hello_flash</span><span class="pi">:</span> <span class="s">Hello flash!</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# config/locales/en.yml
en:
  hello_world: Hello world!
  hello_flash: Hello flash!
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight yaml"><span class="c1"># config/locales/pirate.yml</span>
<span class="na">pirate</span><span class="pi">:</span>
  <span class="na">hello_world</span><span class="pi">:</span> <span class="s">Ahoy World</span>
  <span class="na">hello_flash</span><span class="pi">:</span> <span class="s">Ahoy Flash</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# config/locales/pirate.yml
pirate:
  hello_world: Ahoy World
  hello_flash: Ahoy Flash
">Copy</button>
</div>
<p>Because the <code>default_locale</code> hasn't changed, translations use the <code>:en</code> locale and the response renders the english strings:</p><p><img src="images/i18n/demo_translated_en.png" alt="rails i18n demo translated to English"></p><p>If the locale is set via the URL to the pirate locale (<code>http://localhost:3000?locale=pirate</code>), the response renders the pirate strings:</p><p><img src="images/i18n/demo_translated_pirate.png" alt="rails i18n demo translated to pirate"></p><div class="note"><p>You need to restart the server when you add new locale files.</p></div><p>You may use YAML (<code>.yml</code>) or plain Ruby (<code>.rb</code>) files for storing your translations in SimpleStore. YAML is the preferred option among Rails developers. However, it has one big disadvantage. YAML is very sensitive to whitespace and special characters, so the application may not load your dictionary properly. Ruby files will crash your application on first request, so you may easily find what's wrong. (If you encounter any "weird issues" with YAML dictionaries, try putting the relevant portion of your dictionary into a Ruby file.)</p><p>If your translations are stored in YAML files, certain keys must be escaped. They are:</p>
<ul>
<li>true, on, yes</li>
<li>false, off, no</li>
</ul>
<p>Examples:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="c1"># config/locales/en.yml</span>
<span class="na">en</span><span class="pi">:</span>
  <span class="na">success</span><span class="pi">:</span>
    <span class="s1">'</span><span class="s">true'</span><span class="err">:</span>  <span class="s1">'</span><span class="s">True!'</span>
    <span class="s1">'</span><span class="s">on'</span><span class="err">:</span>    <span class="s1">'</span><span class="s">On!'</span>
    <span class="s1">'</span><span class="s">false'</span><span class="err">:</span> <span class="s1">'</span><span class="s">False!'</span>
  <span class="na">failure</span><span class="pi">:</span>
    <span class="na">true</span><span class="pi">:</span>    <span class="s1">'</span><span class="s">True!'</span>
    <span class="na">off</span><span class="pi">:</span>     <span class="s1">'</span><span class="s">Off!'</span>
    <span class="na">false</span><span class="pi">:</span>   <span class="s1">'</span><span class="s">False!'</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# config/locales/en.yml
en:
  success:
    'true':  'True!'
    'on':    'On!'
    'false': 'False!'
  failure:
    true:    'True!'
    off:     'Off!'
    false:   'False!'
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'success.true'</span>  <span class="c1"># =&gt; 'True!'</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'success.on'</span>    <span class="c1"># =&gt; 'On!'</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'success.false'</span> <span class="c1"># =&gt; 'False!'</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'failure.false'</span> <span class="c1"># =&gt; Translation Missing</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'failure.off'</span>   <span class="c1"># =&gt; Translation Missing</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'failure.true'</span>  <span class="c1"># =&gt; Translation Missing</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t 'success.true'  # =&gt; 'True!'
I18n.t 'success.on'    # =&gt; 'On!'
I18n.t 'success.false' # =&gt; 'False!'
I18n.t 'failure.false' # =&gt; Translation Missing
I18n.t 'failure.off'   # =&gt; Translation Missing
I18n.t 'failure.true'  # =&gt; Translation Missing
">Copy</button>
</div>
<h4 id="passing-variables-to-translations"><a class="anchorlink" href="#passing-variables-to-translations">3.3 Passing Variables to Translations</a></h4><p>One key consideration for successfully internationalizing an application is to
avoid making incorrect assumptions about grammar rules when abstracting localized
code. Grammar rules that seem fundamental in one locale may not hold true in
another one.</p><p>Improper abstraction is shown in the following example, where assumptions are
made about the ordering of the different parts of the translation. Note that Rails
provides a <code>number_to_currency</code> helper to handle the following case.</p><div class="code_container">
<pre><code class="highlight erb"><span class="c">&lt;!-- app/views/products/show.html.erb --&gt;</span>
<span class="cp">&lt;%=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">t</span><span class="p">(</span><span class="s1">'currency'</span><span class="p">)</span><span class="si">}#{</span><span class="vi">@product</span><span class="p">.</span><span class="nf">price</span><span class="si">}</span><span class="s2">"</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;!-- app/views/products/show.html.erb --&gt;
&lt;%= &quot;#{t('currency')}#{@product.price}&quot; %&gt;
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight yaml"><span class="c1"># config/locales/en.yml</span>
<span class="na">en</span><span class="pi">:</span>
  <span class="na">currency</span><span class="pi">:</span> <span class="s2">"</span><span class="s">$"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# config/locales/en.yml
en:
  currency: "$"
'>Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight yaml"><span class="c1"># config/locales/es.yml</span>
<span class="na">es</span><span class="pi">:</span>
  <span class="na">currency</span><span class="pi">:</span> <span class="s2">"</span><span class="s">€"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# config/locales/es.yml
es:
  currency: "€"
'>Copy</button>
</div>
<p>If the product's price is 10 then the proper translation for Spanish is "10 €"
instead of "€10" but the abstraction cannot give it.</p><p>To create proper abstraction, the I18n gem ships with a feature called variable
interpolation that allows you to use variables in translation definitions and
pass the values for these variables to the translation method.</p><p>Proper abstraction is shown in the following example:</p><div class="code_container">
<pre><code class="highlight erb"><span class="c">&lt;!-- app/views/products/show.html.erb --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">t</span><span class="p">(</span><span class="s1">'product_price'</span><span class="p">,</span> <span class="ss">price: </span><span class="vi">@product</span><span class="p">.</span><span class="nf">price</span><span class="p">)</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;!-- app/views/products/show.html.erb --&gt;
&lt;%= t('product_price', price: @product.price) %&gt;
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight yaml"><span class="c1"># config/locales/en.yml</span>
<span class="na">en</span><span class="pi">:</span>
  <span class="na">product_price</span><span class="pi">:</span> <span class="s2">"</span><span class="s">$%{price}"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# config/locales/en.yml
en:
  product_price: "$%{price}"
'>Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight yaml"><span class="c1"># config/locales/es.yml</span>
<span class="na">es</span><span class="pi">:</span>
  <span class="na">product_price</span><span class="pi">:</span> <span class="s2">"</span><span class="s">%{price}</span><span class="nv"> </span><span class="s">€"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# config/locales/es.yml
es:
  product_price: "%{price} €"
'>Copy</button>
</div>
<p>All grammatical and punctuation decisions are made in the definition itself, so
the abstraction can give a proper translation.</p><div class="note"><p>The <code>default</code> and <code>scope</code> keywords are reserved and can't be used as
variable names. If used, an <code>I18n::ReservedInterpolationKey</code> exception is raised.
If a translation expects an interpolation variable, but this has not been passed
to <code>#translate</code>, an <code>I18n::MissingInterpolationArgument</code> exception is raised.</p></div><h4 id="adding-date-time-formats"><a class="anchorlink" href="#adding-date-time-formats">3.4 Adding Date/Time Formats</a></h4><p>OK! Now let's add a timestamp to the view, so we can demo the <strong>date/time localization</strong> feature as well. To localize the time format you pass the Time object to <code>I18n.l</code> or (preferably) use Rails' <code>#l</code> helper. You can pick a format by passing the <code>:format</code> option - by default the <code>:default</code> format is used.</p><div class="code_container">
<pre><code class="highlight erb"><span class="c">&lt;!-- app/views/home/index.html.erb --&gt;</span>
<span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="n">t</span> <span class="ss">:hello_world</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">flash</span><span class="p">[</span><span class="ss">:notice</span><span class="p">]</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">l</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">,</span> <span class="ss">format: :short</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;!-- app/views/home/index.html.erb --&gt;
&lt;h1&gt;&lt;%= t :hello_world %&gt;&lt;/h1&gt;
&lt;p&gt;&lt;%= flash[:notice] %&gt;&lt;/p&gt;
&lt;p&gt;&lt;%= l Time.now, format: :short %&gt;&lt;/p&gt;
">Copy</button>
</div>
<p>And in our pirate translations file let's add a time format (it's already there in Rails' defaults for English):</p><div class="code_container">
<pre><code class="highlight yaml"><span class="c1"># config/locales/pirate.yml</span>
<span class="na">pirate</span><span class="pi">:</span>
  <span class="na">time</span><span class="pi">:</span>
    <span class="na">formats</span><span class="pi">:</span>
      <span class="na">short</span><span class="pi">:</span> <span class="s2">"</span><span class="s">arrrround</span><span class="nv"> </span><span class="s">%H'ish"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# config/locales/pirate.yml
pirate:
  time:
    formats:
      short: &quot;arrrround %H'ish&quot;
">Copy</button>
</div>
<p>So that would give you:</p><p><img src="images/i18n/demo_localized_pirate.png" alt="rails i18n demo localized time to pirate"></p><div class="info"><p>Right now you might need to add some more date/time formats in order to make the I18n backend work as expected (at least for the 'pirate' locale). Of course, there's a great chance that somebody already did all the work by <strong>translating Rails' defaults for your locale</strong>. See the <a href="https://github.com/svenfuchs/rails-i18n/tree/master/rails/locale">rails-i18n repository at GitHub</a> for an archive of various locale files. When you put such file(s) in <code>config/locales/</code> directory, they will automatically be ready for use.</p></div><h4 id="inflection-rules-for-other-locales"><a class="anchorlink" href="#inflection-rules-for-other-locales">3.5 Inflection Rules for Other Locales</a></h4><p>Rails allows you to define inflection rules (such as rules for singularization and pluralization) for locales other than English. In <code>config/initializers/inflections.rb</code>, you can define these rules for multiple locales. The initializer contains a default example for specifying additional rules for English; follow that format for other locales as you see fit.</p><h4 id="localized-views"><a class="anchorlink" href="#localized-views">3.6 Localized Views</a></h4><p>Let's say you have a <em>BooksController</em> in your application. Your <em>index</em> action renders content in <code>app/views/books/index.html.erb</code> template. When you put a <em>localized variant</em> of this template: <code>index.es.html.erb</code> in the same directory, Rails will render content in this template, when the locale is set to <code>:es</code>. When the locale is set to the default locale, the generic <code>index.html.erb</code> view will be used. (Future Rails versions may well bring this <em>automagic</em> localization to assets in <code>public</code>, etc.)</p><p>You can make use of this feature, e.g. when working with a large amount of static content, which would be clumsy to put inside YAML or Ruby dictionaries. Bear in mind, though, that any change you would like to do later to the template must be propagated to all of them.</p><h4 id="organization-of-locale-files"><a class="anchorlink" href="#organization-of-locale-files">3.7 Organization of Locale Files</a></h4><p>When you are using the default SimpleStore shipped with the i18n library,
dictionaries are stored in plain-text files on the disk. Putting translations
for all parts of your application in one file per locale could be hard to
manage. You can store these files in a hierarchy which makes sense to you.</p><p>For example, your <code>config/locales</code> directory could look like this:</p><div class="code_container">
<pre><code class="highlight plaintext">|-defaults
|---es.yml
|---en.yml
|-models
|---book
|-----es.yml
|-----en.yml
|-views
|---defaults
|-----es.yml
|-----en.yml
|---books
|-----es.yml
|-----en.yml
|---users
|-----es.yml
|-----en.yml
|---navigation
|-----es.yml
|-----en.yml
</code></pre>
<button class="clipboard-button" data-clipboard-text="|-defaults
|---es.yml
|---en.yml
|-models
|---book
|-----es.yml
|-----en.yml
|-views
|---defaults
|-----es.yml
|-----en.yml
|---books
|-----es.yml
|-----en.yml
|---users
|-----es.yml
|-----en.yml
|---navigation
|-----es.yml
|-----en.yml
">Copy</button>
</div>
<p>This way, you can separate model and model attribute names from text inside views, and all of this from the "defaults" (e.g. date and time formats). Other stores for the i18n library could provide different means of such separation.</p><div class="note"><p>The default locale loading mechanism in Rails does not load locale files in nested dictionaries, like we have here. So, for this to work, we must explicitly tell Rails to look further:</p></div><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># config/application.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">i18n</span><span class="p">.</span><span class="nf">load_path</span> <span class="o">+=</span> <span class="no">Dir</span><span class="p">[</span><span class="no">Rails</span><span class="p">.</span><span class="nf">root</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">'config'</span><span class="p">,</span> <span class="s1">'locales'</span><span class="p">,</span> <span class="s1">'**'</span><span class="p">,</span> <span class="s1">'*.{rb,yml}'</span><span class="p">)]</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# config/application.rb
config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}')]
">Copy</button>
</div>
<h3 id="overview-of-the-i18n-api-features"><a class="anchorlink" href="#overview-of-the-i18n-api-features">4 Overview of the I18n API Features</a></h3><p>You should have a good understanding of using the i18n library now and know how
to internationalize a basic Rails application. In the following chapters, we'll
cover its features in more depth.</p><p>These chapters will show examples using both the <code>I18n.translate</code> method as well as the <a href="https://api.rubyonrails.org/v7.0.8/classes/ActionView/Helpers/TranslationHelper.html#method-i-translate"><code>translate</code> view helper method</a> (noting the additional features provided by the view helper method).</p><p>Covered are features like these:</p>
<ul>
<li>looking up translations</li>
<li>interpolating data into translations</li>
<li>pluralizing translations</li>
<li>using safe HTML translations (view helper method only)</li>
<li>localizing dates, numbers, currency, etc.</li>
</ul>
<h4 id="looking-up-translations"><a class="anchorlink" href="#looking-up-translations">4.1 Looking up Translations</a></h4><h5 id="basic-lookup-scopes-and-nested-keys"><a class="anchorlink" href="#basic-lookup-scopes-and-nested-keys">4.1.1 Basic Lookup, Scopes, and Nested Keys</a></h5><p>Translations are looked up by keys which can be both Symbols or Strings, so these calls are equivalent:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:message</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'message'</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t :message
I18n.t 'message'
">Copy</button>
</div>
<p>The <code>translate</code> method also takes a <code>:scope</code> option which can contain one or more additional keys that will be used to specify a "namespace" or scope for a translation key:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:record_invalid</span><span class="p">,</span> <span class="ss">scope: </span><span class="p">[</span><span class="ss">:activerecord</span><span class="p">,</span> <span class="ss">:errors</span><span class="p">,</span> <span class="ss">:messages</span><span class="p">]</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t :record_invalid, scope: [:activerecord, :errors, :messages]
">Copy</button>
</div>
<p>This looks up the <code>:record_invalid</code> message in the Active Record error messages.</p><p>Additionally, both the key and scopes can be specified as dot-separated keys as in:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">translate</span> <span class="s2">"activerecord.errors.messages.record_invalid"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='I18n.translate "activerecord.errors.messages.record_invalid"
'>Copy</button>
</div>
<p>Thus the following calls are equivalent:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'activerecord.errors.messages.record_invalid'</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'errors.messages.record_invalid'</span><span class="p">,</span> <span class="ss">scope: :activerecord</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:record_invalid</span><span class="p">,</span> <span class="ss">scope: </span><span class="s1">'activerecord.errors.messages'</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:record_invalid</span><span class="p">,</span> <span class="ss">scope: </span><span class="p">[</span><span class="ss">:activerecord</span><span class="p">,</span> <span class="ss">:errors</span><span class="p">,</span> <span class="ss">:messages</span><span class="p">]</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t 'activerecord.errors.messages.record_invalid'
I18n.t 'errors.messages.record_invalid', scope: :activerecord
I18n.t :record_invalid, scope: 'activerecord.errors.messages'
I18n.t :record_invalid, scope: [:activerecord, :errors, :messages]
">Copy</button>
</div>
<h5 id="defaults"><a class="anchorlink" href="#defaults">4.1.2 Defaults</a></h5><p>When a <code>:default</code> option is given, its value will be returned if the translation is missing:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:missing</span><span class="p">,</span> <span class="ss">default: </span><span class="s1">'Not here'</span>
<span class="c1"># =&gt; 'Not here'</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t :missing, default: 'Not here'
# =&gt; 'Not here'
">Copy</button>
</div>
<p>If the <code>:default</code> value is a Symbol, it will be used as a key and translated. One can provide multiple values as default. The first one that results in a value will be returned.</p><p>E.g., the following first tries to translate the key <code>:missing</code> and then the key <code>:also_missing.</code> As both do not yield a result, the string "Not here" will be returned:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:missing</span><span class="p">,</span> <span class="ss">default: </span><span class="p">[</span><span class="ss">:also_missing</span><span class="p">,</span> <span class="s1">'Not here'</span><span class="p">]</span>
<span class="c1"># =&gt; 'Not here'</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t :missing, default: [:also_missing, 'Not here']
# =&gt; 'Not here'
">Copy</button>
</div>
<h5 id="bulk-and-namespace-lookup"><a class="anchorlink" href="#bulk-and-namespace-lookup">4.1.3 Bulk and Namespace Lookup</a></h5><p>To look up multiple translations at once, an array of keys can be passed:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="p">[</span><span class="ss">:odd</span><span class="p">,</span> <span class="ss">:even</span><span class="p">],</span> <span class="ss">scope: </span><span class="s1">'errors.messages'</span>
<span class="c1"># =&gt; ["must be odd", "must be even"]</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t [:odd, :even], scope: 'errors.messages'
# =&gt; [&quot;must be odd&quot;, &quot;must be even&quot;]
">Copy</button>
</div>
<p>Also, a key can translate to a (potentially nested) hash of grouped translations. E.g., one can receive <em>all</em> Active Record error messages as a Hash with:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'errors.messages'</span>
<span class="c1"># =&gt; {:inclusion=&gt;"is not included in the list", :exclusion=&gt; ... }</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t 'errors.messages'
# =&gt; {:inclusion=&gt;&quot;is not included in the list&quot;, :exclusion=&gt; ... }
">Copy</button>
</div>
<p>If you want to perform interpolation on a bulk hash of translations, you need to pass <code>deep_interpolation: true</code> as a parameter. When you have the following dictionary:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">welcome</span><span class="pi">:</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Welcome!"</span>
    <span class="na">content</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Welcome</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">%{app_name}"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='en:
  welcome:
    title: "Welcome!"
    content: "Welcome to the %{app_name}"
'>Copy</button>
</div>
<p>then the nested interpolation will be ignored without the setting:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'welcome'</span><span class="p">,</span> <span class="ss">app_name: </span><span class="s1">'book store'</span>
<span class="c1"># =&gt; {:title=&gt;"Welcome!", :content=&gt;"Welcome to the %{app_name}"}</span>

<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'welcome'</span><span class="p">,</span> <span class="ss">deep_interpolation: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">app_name: </span><span class="s1">'book store'</span>
<span class="c1"># =&gt; {:title=&gt;"Welcome!", :content=&gt;"Welcome to the book store"}</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t 'welcome', app_name: 'book store'
# =&gt; {:title=&gt;&quot;Welcome!&quot;, :content=&gt;&quot;Welcome to the %{app_name}&quot;}

I18n.t 'welcome', deep_interpolation: true, app_name: 'book store'
# =&gt; {:title=&gt;&quot;Welcome!&quot;, :content=&gt;&quot;Welcome to the book store&quot;}
">Copy</button>
</div>
<h5 id="lazy-lookup"><a class="anchorlink" href="#lazy-lookup">4.1.4 "Lazy" Lookup</a></h5><p>Rails implements a convenient way to look up the locale inside <em>views</em>. When you have the following dictionary:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">es</span><span class="pi">:</span>
  <span class="na">books</span><span class="pi">:</span>
    <span class="na">index</span><span class="pi">:</span>
      <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Título"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='es:
  books:
    index:
      title: "Título"
'>Copy</button>
</div>
<p>you can look up the <code>books.index.title</code> value <strong>inside</strong> <code>app/views/books/index.html.erb</code> template like this (note the dot):</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">t</span> <span class="s1">'.title'</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;%= t '.title' %&gt;
">Copy</button>
</div>
<div class="note"><p>Automatic translation scoping by partial is only available from the <code>translate</code> view helper method.</p></div><p>"Lazy" lookup can also be used in controllers:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">books</span><span class="pi">:</span>
    <span class="na">create</span><span class="pi">:</span>
      <span class="na">success</span><span class="pi">:</span> <span class="s">Book created!</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="en:
  books:
    create:
      success: Book created!
">Copy</button>
</div>
<p>This is useful for setting flash messages for instance:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">BooksController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="c1"># ...</span>
    <span class="n">redirect_to</span> <span class="n">books_url</span><span class="p">,</span> <span class="ss">notice: </span><span class="n">t</span><span class="p">(</span><span class="s1">'.success'</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class BooksController &lt; ApplicationController
  def create
    # ...
    redirect_to books_url, notice: t('.success')
  end
end
">Copy</button>
</div>
<h4 id="pluralization"><a class="anchorlink" href="#pluralization">4.2 Pluralization</a></h4><p>In many languages — including English — there are only two forms, a singular and a plural, for
a given string, e.g. "1 message" and "2 messages". Other languages (<a href="http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html#ar">Arabic</a>, <a href="http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html#ja">Japanese</a>, <a href="http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html#ru">Russian</a> and many more) have different grammars that have additional or fewer <a href="http://cldr.unicode.org/index/cldr-spec/plural-rules">plural forms</a>. Thus, the I18n API provides a flexible pluralization feature.</p><p>The <code>:count</code> interpolation variable has a special role in that it both is interpolated to the translation and used to pick a pluralization from the translations according to the pluralization rules defined in the
pluralization backend. By default, only the English pluralization rules are applied.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">backend</span><span class="p">.</span><span class="nf">store_translations</span> <span class="ss">:en</span><span class="p">,</span> <span class="ss">inbox: </span><span class="p">{</span>
  <span class="ss">zero: </span><span class="s1">'no messages'</span><span class="p">,</span> <span class="c1"># optional</span>
  <span class="ss">one: </span><span class="s1">'one message'</span><span class="p">,</span>
  <span class="ss">other: </span><span class="s1">'%{count} messages'</span>
<span class="p">}</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">translate</span> <span class="ss">:inbox</span><span class="p">,</span> <span class="ss">count: </span><span class="mi">2</span>
<span class="c1"># =&gt; '2 messages'</span>

<span class="no">I18n</span><span class="p">.</span><span class="nf">translate</span> <span class="ss">:inbox</span><span class="p">,</span> <span class="ss">count: </span><span class="mi">1</span>
<span class="c1"># =&gt; 'one message'</span>

<span class="no">I18n</span><span class="p">.</span><span class="nf">translate</span> <span class="ss">:inbox</span><span class="p">,</span> <span class="ss">count: </span><span class="mi">0</span>
<span class="c1"># =&gt; 'no messages'</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.backend.store_translations :en, inbox: {
  zero: 'no messages', # optional
  one: 'one message',
  other: '%{count} messages'
}
I18n.translate :inbox, count: 2
# =&gt; '2 messages'

I18n.translate :inbox, count: 1
# =&gt; 'one message'

I18n.translate :inbox, count: 0
# =&gt; 'no messages'
">Copy</button>
</div>
<p>The algorithm for pluralizations in <code>:en</code> is as simple as:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">lookup_key</span> <span class="o">=</span> <span class="ss">:zero</span> <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">entry</span><span class="p">.</span><span class="nf">has_key?</span><span class="p">(</span><span class="ss">:zero</span><span class="p">)</span>
<span class="n">lookup_key</span> <span class="o">||=</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">?</span> <span class="ss">:one</span> <span class="p">:</span> <span class="ss">:other</span>
<span class="n">entry</span><span class="p">[</span><span class="n">lookup_key</span><span class="p">]</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="lookup_key = :zero if count == 0 &amp;&amp; entry.has_key?(:zero)
lookup_key ||= count == 1 ? :one : :other
entry[lookup_key]
">Copy</button>
</div>
<p>The translation denoted as <code>:one</code> is regarded as singular, and the <code>:other</code> is used as plural. If the count is zero, and a <code>:zero</code> entry is present, then it will be used instead of <code>:other</code>.</p><p>If the lookup for the key does not return a Hash suitable for pluralization, an <code>I18n::InvalidPluralizationData</code> exception is raised.</p><h5 id="locale-specific-rules"><a class="anchorlink" href="#locale-specific-rules">4.2.1 Locale-specific Rules</a></h5><p>The I18n gem provides a Pluralization backend that can be used to enable locale-specific rules. Include it
to the Simple backend, then add the localized pluralization algorithms to translation store, as <code>i18n.plural.rule</code>.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="o">::</span><span class="no">Backend</span><span class="o">::</span><span class="no">Simple</span><span class="p">.</span><span class="nf">include</span><span class="p">(</span><span class="no">I18n</span><span class="o">::</span><span class="no">Backend</span><span class="o">::</span><span class="no">Pluralization</span><span class="p">)</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">backend</span><span class="p">.</span><span class="nf">store_translations</span> <span class="ss">:pt</span><span class="p">,</span> <span class="ss">i18n: </span><span class="p">{</span> <span class="ss">plural: </span><span class="p">{</span> <span class="ss">rule: </span><span class="nb">lambda</span> <span class="p">{</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">].</span><span class="nf">include?</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">?</span> <span class="ss">:one</span> <span class="p">:</span> <span class="ss">:other</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">backend</span><span class="p">.</span><span class="nf">store_translations</span> <span class="ss">:pt</span><span class="p">,</span> <span class="ss">apples: </span><span class="p">{</span> <span class="ss">one: </span><span class="s1">'one or none'</span><span class="p">,</span> <span class="ss">other: </span><span class="s1">'more than one'</span> <span class="p">}</span>

<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:apples</span><span class="p">,</span> <span class="ss">count: </span><span class="mi">0</span><span class="p">,</span> <span class="ss">locale: :pt</span>
<span class="c1"># =&gt; 'one or none'</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n::Backend::Simple.include(I18n::Backend::Pluralization)
I18n.backend.store_translations :pt, i18n: { plural: { rule: lambda { |n| [0, 1].include?(n) ? :one : :other } } }
I18n.backend.store_translations :pt, apples: { one: 'one or none', other: 'more than one' }

I18n.t :apples, count: 0, locale: :pt
# =&gt; 'one or none'
">Copy</button>
</div>
<p>Alternatively, the separate gem <a href="https://github.com/svenfuchs/rails-i18n">rails-i18n</a> can be used to provide a fuller set of locale-specific pluralization rules.</p><h4 id="setting-and-passing-a-locale"><a class="anchorlink" href="#setting-and-passing-a-locale">4.3 Setting and Passing a Locale</a></h4><p>The locale can be either set pseudo-globally to <code>I18n.locale</code> (which uses <code>Thread.current</code> in the same way as, for example, <code>Time.zone</code>) or can be passed as an option to <code>#translate</code> and <code>#localize</code>.</p><p>If no locale is passed, <code>I18n.locale</code> is used:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">locale</span> <span class="o">=</span> <span class="ss">:de</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:foo</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">l</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.locale = :de
I18n.t :foo
I18n.l Time.now
">Copy</button>
</div>
<p>Explicitly passing a locale:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:foo</span><span class="p">,</span> <span class="ss">locale: :de</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">l</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">,</span> <span class="ss">locale: :de</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t :foo, locale: :de
I18n.l Time.now, locale: :de
">Copy</button>
</div>
<p>The <code>I18n.locale</code> defaults to <code>I18n.default_locale</code> which defaults to :<code>en</code>. The default locale can be set like this:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">default_locale</span> <span class="o">=</span> <span class="ss">:de</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.default_locale = :de
">Copy</button>
</div>
<h4 id="using-safe-html-translations"><a class="anchorlink" href="#using-safe-html-translations">4.4 Using Safe HTML Translations</a></h4><p>Keys with a '_html' suffix and keys named 'html' are marked as HTML safe. When you use them in views the HTML will not be escaped.</p><div class="code_container">
<pre><code class="highlight yaml"><span class="c1"># config/locales/en.yml</span>
<span class="na">en</span><span class="pi">:</span>
  <span class="na">welcome</span><span class="pi">:</span> <span class="s">&lt;b&gt;welcome!&lt;/b&gt;</span>
  <span class="na">hello_html</span><span class="pi">:</span> <span class="s">&lt;b&gt;hello!&lt;/b&gt;</span>
  <span class="na">title</span><span class="pi">:</span>
    <span class="na">html</span><span class="pi">:</span> <span class="s">&lt;b&gt;title!&lt;/b&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# config/locales/en.yml
en:
  welcome: &lt;b&gt;welcome!&lt;/b&gt;
  hello_html: &lt;b&gt;hello!&lt;/b&gt;
  title:
    html: &lt;b&gt;title!&lt;/b&gt;
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight erb"><span class="c">&lt;!-- app/views/home/index.html.erb --&gt;</span>
<span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="n">t</span><span class="p">(</span><span class="s1">'welcome'</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="n">raw</span> <span class="n">t</span><span class="p">(</span><span class="s1">'welcome'</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="n">t</span><span class="p">(</span><span class="s1">'hello_html'</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="n">t</span><span class="p">(</span><span class="s1">'title.html'</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;!-- app/views/home/index.html.erb --&gt;
&lt;div&gt;&lt;%= t('welcome') %&gt;&lt;/div&gt;
&lt;div&gt;&lt;%= raw t('welcome') %&gt;&lt;/div&gt;
&lt;div&gt;&lt;%= t('hello_html') %&gt;&lt;/div&gt;
&lt;div&gt;&lt;%= t('title.html') %&gt;&lt;/div&gt;
">Copy</button>
</div>
<p>Interpolation escapes as needed though. For example, given:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">welcome_html</span><span class="pi">:</span> <span class="s2">"</span><span class="s">&lt;b&gt;Welcome</span><span class="nv"> </span><span class="s">%{username}!&lt;/b&gt;"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='en:
  welcome_html: "&lt;b&gt;Welcome %{username}!&lt;/b&gt;"
'>Copy</button>
</div>
<p>you can safely pass the username as set by the user:</p><div class="code_container">
<pre><code class="highlight erb"><span class="c">&lt;%# This is safe, it is going to be escaped if needed. %&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">t</span><span class="p">(</span><span class="s1">'welcome_html'</span><span class="p">,</span> <span class="ss">username: </span><span class="vi">@current_user</span><span class="p">.</span><span class="nf">username</span><span class="p">)</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;%# This is safe, it is going to be escaped if needed. %&gt;
&lt;%= t('welcome_html', username: @current_user.username) %&gt;
">Copy</button>
</div>
<p>Safe strings on the other hand are interpolated verbatim.</p><div class="note"><p>Automatic conversion to HTML safe translate text is only available from the <code>translate</code> view helper method.</p></div><p><img src="images/i18n/demo_html_safe.png" alt="i18n demo html safe"></p><h4 id="translations-for-active-record-models"><a class="anchorlink" href="#translations-for-active-record-models">4.5 Translations for Active Record Models</a></h4><p>You can use the methods <code>Model.model_name.human</code> and <code>Model.human_attribute_name(attribute)</code> to transparently look up translations for your model and attribute names.</p><p>For example when you add the following translations:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">activerecord</span><span class="pi">:</span>
    <span class="na">models</span><span class="pi">:</span>
      <span class="na">user</span><span class="pi">:</span> <span class="s">Customer</span>
    <span class="na">attributes</span><span class="pi">:</span>
      <span class="na">user</span><span class="pi">:</span>
        <span class="na">login</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Handle"</span>
      <span class="c1"># will translate User attribute "login" as "Handle"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='en:
  activerecord:
    models:
      user: Customer
    attributes:
      user:
        login: "Handle"
      # will translate User attribute "login" as "Handle"
'>Copy</button>
</div>
<p>Then <code>User.model_name.human</code> will return "Customer" and <code>User.human_attribute_name("login")</code> will return "Handle".</p><p>You can also set a plural form for model names, adding as following:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">activerecord</span><span class="pi">:</span>
    <span class="na">models</span><span class="pi">:</span>
      <span class="na">user</span><span class="pi">:</span>
        <span class="na">one</span><span class="pi">:</span> <span class="s">Customer</span>
        <span class="na">other</span><span class="pi">:</span> <span class="s">Customers</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="en:
  activerecord:
    models:
      user:
        one: Customer
        other: Customers
">Copy</button>
</div>
<p>Then <code>User.model_name.human(count: 2)</code> will return "Customers". With <code>count: 1</code> or without params will return "Customer".</p><p>In the event you need to access nested attributes within a given model, you should nest these under <code>model/attribute</code> at the model level of your translation file:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">activerecord</span><span class="pi">:</span>
    <span class="na">attributes</span><span class="pi">:</span>
      <span class="na">user/role</span><span class="pi">:</span>
        <span class="na">admin</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Admin"</span>
        <span class="na">contributor</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Contributor"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='en:
  activerecord:
    attributes:
      user/role:
        admin: "Admin"
        contributor: "Contributor"
'>Copy</button>
</div>
<p>Then <code>User.human_attribute_name("role.admin")</code> will return "Admin".</p><div class="note"><p>If you are using a class which includes <code>ActiveModel</code> and does not inherit from <code>ActiveRecord::Base</code>, replace <code>activerecord</code> with <code>activemodel</code> in the above key paths.</p></div><h5 id="error-message-scopes"><a class="anchorlink" href="#error-message-scopes">4.5.1 Error Message Scopes</a></h5><p>Active Record validation error messages can also be translated easily. Active Record gives you a couple of namespaces where you can place your message translations in order to provide different messages and translation for certain models, attributes, and/or validations. It also transparently takes single table inheritance into account.</p><p>This gives you quite powerful means to flexibly adjust your messages to your application's needs.</p><p>Consider a User model with a validation for the name attribute like this:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class User &lt; ApplicationRecord
  validates :name, presence: true
end
">Copy</button>
</div>
<p>The key for the error message in this case is <code>:blank</code>. Active Record will look up this key in the namespaces:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">[</span><span class="n">model_name</span><span class="p">].</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">[</span><span class="n">attribute_name</span><span class="p">]</span>
<span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">[</span><span class="n">model_name</span><span class="p">]</span>
<span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">messages</span>
<span class="n">errors</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">[</span><span class="n">attribute_name</span><span class="p">]</span>
<span class="n">errors</span><span class="p">.</span><span class="nf">messages</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="activerecord.errors.models.[model_name].attributes.[attribute_name]
activerecord.errors.models.[model_name]
activerecord.errors.messages
errors.attributes.[attribute_name]
errors.messages
">Copy</button>
</div>
<p>Thus, in our example it will try the following keys in this order and return the first result:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">user</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">name</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">user</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">messages</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">errors</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">name</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">errors</span><span class="p">.</span><span class="nf">messages</span><span class="p">.</span><span class="nf">blank</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="activerecord.errors.models.user.attributes.name.blank
activerecord.errors.models.user.blank
activerecord.errors.messages.blank
errors.attributes.name.blank
errors.messages.blank
">Copy</button>
</div>
<p>When your models are additionally using inheritance then the messages are looked up in the inheritance chain.</p><p>For example, you might have an Admin model inheriting from User:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Admin</span> <span class="o">&lt;</span> <span class="no">User</span>
  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Admin &lt; User
  validates :name, presence: true
end
">Copy</button>
</div>
<p>Then Active Record will look for messages in this order:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">admin</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">name</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">admin</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">user</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">name</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">user</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">activerecord</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">messages</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">errors</span><span class="p">.</span><span class="nf">attributes</span><span class="p">.</span><span class="nf">name</span><span class="p">.</span><span class="nf">blank</span>
<span class="n">errors</span><span class="p">.</span><span class="nf">messages</span><span class="p">.</span><span class="nf">blank</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="activerecord.errors.models.admin.attributes.name.blank
activerecord.errors.models.admin.blank
activerecord.errors.models.user.attributes.name.blank
activerecord.errors.models.user.blank
activerecord.errors.messages.blank
errors.attributes.name.blank
errors.messages.blank
">Copy</button>
</div>
<p>This way you can provide special translations for various error messages at different points in your model's inheritance chain and in the attributes, models, or default scopes.</p><h5 id="error-message-interpolation"><a class="anchorlink" href="#error-message-interpolation">4.5.2 Error Message Interpolation</a></h5><p>The translated model name, translated attribute name, and value are always available for interpolation as <code>model</code>, <code>attribute</code> and <code>value</code> respectively.</p><p>So, for example, instead of the default error message <code>"cannot be blank"</code> you could use the attribute name like this : <code>"Please fill in your %{attribute}"</code>.</p>
<ul>
<li>
<code>count</code>, where available, can be used for pluralization if present:</li>
</ul>

<table>
<thead>
<tr>
<th>validation</th>
<th>with option</th>
<th>message</th>
<th>interpolation</th>
</tr>
</thead>
<tbody>
<tr>
<td>confirmation</td>
<td>-</td>
<td>:confirmation</td>
<td>attribute</td>
</tr>
<tr>
<td>acceptance</td>
<td>-</td>
<td>:accepted</td>
<td>-</td>
</tr>
<tr>
<td>presence</td>
<td>-</td>
<td>:blank</td>
<td>-</td>
</tr>
<tr>
<td>absence</td>
<td>-</td>
<td>:present</td>
<td>-</td>
</tr>
<tr>
<td>length</td>
<td>:within, :in</td>
<td>:too_short</td>
<td>count</td>
</tr>
<tr>
<td>length</td>
<td>:within, :in</td>
<td>:too_long</td>
<td>count</td>
</tr>
<tr>
<td>length</td>
<td>:is</td>
<td>:wrong_length</td>
<td>count</td>
</tr>
<tr>
<td>length</td>
<td>:minimum</td>
<td>:too_short</td>
<td>count</td>
</tr>
<tr>
<td>length</td>
<td>:maximum</td>
<td>:too_long</td>
<td>count</td>
</tr>
<tr>
<td>uniqueness</td>
<td>-</td>
<td>:taken</td>
<td>-</td>
</tr>
<tr>
<td>format</td>
<td>-</td>
<td>:invalid</td>
<td>-</td>
</tr>
<tr>
<td>inclusion</td>
<td>-</td>
<td>:inclusion</td>
<td>-</td>
</tr>
<tr>
<td>exclusion</td>
<td>-</td>
<td>:exclusion</td>
<td>-</td>
</tr>
<tr>
<td>associated</td>
<td>-</td>
<td>:invalid</td>
<td>-</td>
</tr>
<tr>
<td>non-optional association</td>
<td>-</td>
<td>:required</td>
<td>-</td>
</tr>
<tr>
<td>numericality</td>
<td>-</td>
<td>:not_a_number</td>
<td>-</td>
</tr>
<tr>
<td>numericality</td>
<td>:greater_than</td>
<td>:greater_than</td>
<td>count</td>
</tr>
<tr>
<td>numericality</td>
<td>:greater_than_or_equal_to</td>
<td>:greater_than_or_equal_to</td>
<td>count</td>
</tr>
<tr>
<td>numericality</td>
<td>:equal_to</td>
<td>:equal_to</td>
<td>count</td>
</tr>
<tr>
<td>numericality</td>
<td>:less_than</td>
<td>:less_than</td>
<td>count</td>
</tr>
<tr>
<td>numericality</td>
<td>:less_than_or_equal_to</td>
<td>:less_than_or_equal_to</td>
<td>count</td>
</tr>
<tr>
<td>numericality</td>
<td>:other_than</td>
<td>:other_than</td>
<td>count</td>
</tr>
<tr>
<td>numericality</td>
<td>:only_integer</td>
<td>:not_an_integer</td>
<td>-</td>
</tr>
<tr>
<td>numericality</td>
<td>:in</td>
<td>:in</td>
<td>count</td>
</tr>
<tr>
<td>numericality</td>
<td>:odd</td>
<td>:odd</td>
<td>-</td>
</tr>
<tr>
<td>numericality</td>
<td>:even</td>
<td>:even</td>
<td>-</td>
</tr>
</tbody>
</table>
<h4 id="translations-for-action-mailer-e-mail-subjects"><a class="anchorlink" href="#translations-for-action-mailer-e-mail-subjects">4.6 Translations for Action Mailer E-Mail Subjects</a></h4><p>If you don't pass a subject to the <code>mail</code> method, Action Mailer will try to find
it in your translations. The performed lookup will use the pattern
<code>&lt;mailer_scope&gt;.&lt;action_name&gt;.subject</code> to construct the key.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># user_mailer.rb</span>
<span class="k">class</span> <span class="nc">UserMailer</span> <span class="o">&lt;</span> <span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span>
  <span class="k">def</span> <span class="nf">welcome</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="c1">#...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# user_mailer.rb
class UserMailer &lt; ActionMailer::Base
  def welcome(user)
    #...
  end
end
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">user_mailer</span><span class="pi">:</span>
    <span class="na">welcome</span><span class="pi">:</span>
      <span class="na">subject</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Welcome</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Rails</span><span class="nv"> </span><span class="s">Guides!"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='en:
  user_mailer:
    welcome:
      subject: "Welcome to Rails Guides!"
'>Copy</button>
</div>
<p>To send parameters to interpolation use the <code>default_i18n_subject</code> method on the mailer.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># user_mailer.rb</span>
<span class="k">class</span> <span class="nc">UserMailer</span> <span class="o">&lt;</span> <span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span>
  <span class="k">def</span> <span class="nf">welcome</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">mail</span><span class="p">(</span><span class="ss">to: </span><span class="n">user</span><span class="p">.</span><span class="nf">email</span><span class="p">,</span> <span class="ss">subject: </span><span class="n">default_i18n_subject</span><span class="p">(</span><span class="ss">user: </span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="p">))</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# user_mailer.rb
class UserMailer &lt; ActionMailer::Base
  def welcome(user)
    mail(to: user.email, subject: default_i18n_subject(user: user.name))
  end
end
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">user_mailer</span><span class="pi">:</span>
    <span class="na">welcome</span><span class="pi">:</span>
      <span class="na">subject</span><span class="pi">:</span> <span class="s2">"</span><span class="s">%{user},</span><span class="nv"> </span><span class="s">welcome</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Rails</span><span class="nv"> </span><span class="s">Guides!"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='en:
  user_mailer:
    welcome:
      subject: "%{user}, welcome to Rails Guides!"
'>Copy</button>
</div>
<h4 id="overview-of-other-built-in-methods-that-provide-i18n-support"><a class="anchorlink" href="#overview-of-other-built-in-methods-that-provide-i18n-support">4.7 Overview of Other Built-In Methods that Provide I18n Support</a></h4><p>Rails uses fixed strings and other localizations, such as format strings and other format information in a couple of helpers. Here's a brief overview.</p><h5 id="action-view-helper-methods"><a class="anchorlink" href="#action-view-helper-methods">4.7.1 Action View Helper Methods</a></h5>
<ul>
<li><p><code>distance_of_time_in_words</code> translates and pluralizes its result and interpolates the number of seconds, minutes, hours, and so on. See <a href="https://github.com/rails/rails/blob/main/actionview/lib/action_view/locale/en.yml#L4">datetime.distance_in_words</a> translations.</p></li>
<li><p><code>datetime_select</code> and <code>select_month</code> use translated month names for populating the resulting select tag. See <a href="https://github.com/rails/rails/blob/main/activesupport/lib/active_support/locale/en.yml#L15">date.month_names</a> for translations. <code>datetime_select</code> also looks up the order option from <a href="https://github.com/rails/rails/blob/main/activesupport/lib/active_support/locale/en.yml#L18">date.order</a> (unless you pass the option explicitly). All date selection helpers translate the prompt using the translations in the <a href="https://github.com/rails/rails/blob/main/actionview/lib/action_view/locale/en.yml#L39">datetime.prompts</a> scope if applicable.</p></li>
<li><p>The <code>number_to_currency</code>, <code>number_with_precision</code>, <code>number_to_percentage</code>, <code>number_with_delimiter</code>, and <code>number_to_human_size</code> helpers use the number format settings located in the <a href="https://github.com/rails/rails/blob/main/activesupport/lib/active_support/locale/en.yml#L37">number</a> scope.</p></li>
</ul>
<h5 id="active-model-methods"><a class="anchorlink" href="#active-model-methods">4.7.2 Active Model Methods</a></h5>
<ul>
<li><p><code>model_name.human</code> and <code>human_attribute_name</code> use translations for model names and attribute names if available in the <a href="https://github.com/rails/rails/blob/main/activerecord/lib/active_record/locale/en.yml#L36">activerecord.models</a> scope. They also support translations for inherited class names (e.g. for use with STI) as explained above in "Error message scopes".</p></li>
<li><p><code>ActiveModel::Errors#generate_message</code> (which is used by Active Model validations but may also be used manually) uses <code>model_name.human</code> and <code>human_attribute_name</code> (see above). It also translates the error message and supports translations for inherited class names as explained above in "Error message scopes".</p></li>
<li><p><code>ActiveModel::Error#full_message</code> and <code>ActiveModel::Errors#full_messages</code> prepend the attribute name to the error message using a format looked up from <code>errors.format</code> (default: <a href="https://github.com/rails/rails/blob/main/activemodel/lib/active_model/locale/en.yml#L4"><code>"%{attribute} %{message}"</code></a>). To customize the default format, override it in the app's locale files. To customize the format per model or per attribute, see <a href="configuring.html#config-active-model-i18n-customize-full-message"><code>config.active_model.i18n_customize_full_message</code></a>.</p></li>
</ul>
<h5 id="active-support-methods"><a class="anchorlink" href="#active-support-methods">4.7.3 Active Support Methods</a></h5>
<ul>
<li>
<code>Array#to_sentence</code> uses format settings as given in the <a href="https://github.com/rails/rails/blob/main/activesupport/lib/active_support/locale/en.yml#L33">support.array</a> scope.</li>
</ul>
<h3 id="how-to-store-your-custom-translations"><a class="anchorlink" href="#how-to-store-your-custom-translations">5 How to Store your Custom Translations</a></h3><p>The Simple backend shipped with Active Support allows you to store translations in both plain Ruby and YAML format.<sup class="footnote" id="footnote-2-ref"><a href="#footnote-2">2</a></sup></p><p>For example a Ruby Hash providing translations can look like this:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="p">{</span>
  <span class="ss">pt: </span><span class="p">{</span>
    <span class="ss">foo: </span><span class="p">{</span>
      <span class="ss">bar: </span><span class="s2">"baz"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='{
  pt: {
    foo: {
      bar: "baz"
    }
  }
}
'>Copy</button>
</div>
<p>The equivalent YAML file would look like this:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">pt</span><span class="pi">:</span>
  <span class="na">foo</span><span class="pi">:</span>
    <span class="na">bar</span><span class="pi">:</span> <span class="s">baz</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="pt:
  foo:
    bar: baz
">Copy</button>
</div>
<p>As you see, in both cases the top level key is the locale. <code>:foo</code> is a namespace key and <code>:bar</code> is the key for the translation "baz".</p><p>Here is a "real" example from the Active Support <code>en.yml</code> translations YAML file:</p><div class="code_container">
<pre><code class="highlight yaml"><span class="na">en</span><span class="pi">:</span>
  <span class="na">date</span><span class="pi">:</span>
    <span class="na">formats</span><span class="pi">:</span>
      <span class="na">default</span><span class="pi">:</span> <span class="s2">"</span><span class="s">%Y-%m-%d"</span>
      <span class="na">short</span><span class="pi">:</span> <span class="s2">"</span><span class="s">%b</span><span class="nv"> </span><span class="s">%d"</span>
      <span class="na">long</span><span class="pi">:</span> <span class="s2">"</span><span class="s">%B</span><span class="nv"> </span><span class="s">%d,</span><span class="nv"> </span><span class="s">%Y"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='en:
  date:
    formats:
      default: "%Y-%m-%d"
      short: "%b %d"
      long: "%B %d, %Y"
'>Copy</button>
</div>
<p>So, all of the following equivalent lookups will return the <code>:short</code> date format <code>"%b %d"</code>:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'date.formats.short'</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="s1">'formats.short'</span><span class="p">,</span> <span class="ss">scope: :date</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:short</span><span class="p">,</span> <span class="ss">scope: </span><span class="s1">'date.formats'</span>
<span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:short</span><span class="p">,</span> <span class="ss">scope: </span><span class="p">[</span><span class="ss">:date</span><span class="p">,</span> <span class="ss">:formats</span><span class="p">]</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t 'date.formats.short'
I18n.t 'formats.short', scope: :date
I18n.t :short, scope: 'date.formats'
I18n.t :short, scope: [:date, :formats]
">Copy</button>
</div>
<p>Generally we recommend using YAML as a format for storing translations. There are cases, though, where you want to store Ruby lambdas as part of your locale data, e.g. for special date formats.</p><h3 id="customize-your-i18n-setup"><a class="anchorlink" href="#customize-your-i18n-setup">6 Customize Your I18n Setup</a></h3><h4 id="using-different-backends"><a class="anchorlink" href="#using-different-backends">6.1 Using Different Backends</a></h4><p>For several reasons the Simple backend shipped with Active Support only does the "simplest thing that could possibly work" <em>for Ruby on Rails</em><sup class="footnote" id="footnote-3-ref"><a href="#footnote-3">3</a></sup> ... which means that it is only guaranteed to work for English and, as a side effect, languages that are very similar to English. Also, the simple backend is only capable of reading translations but cannot dynamically store them to any format.</p><p>That does not mean you're stuck with these limitations, though. The Ruby I18n gem makes it very easy to exchange the Simple backend implementation with something else that fits better for your needs, by passing a backend instance to the <code>I18n.backend=</code> setter.</p><p>For example, you can replace the Simple backend with the Chain backend to chain multiple backends together. This is useful when you want to use standard translations with a Simple backend but store custom application translations in a database or other backends.</p><p>With the Chain backend, you could use the Active Record backend and fall back to the (default) Simple backend:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">backend</span> <span class="o">=</span> <span class="no">I18n</span><span class="o">::</span><span class="no">Backend</span><span class="o">::</span><span class="no">Chain</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="no">I18n</span><span class="o">::</span><span class="no">Backend</span><span class="o">::</span><span class="no">ActiveRecord</span><span class="p">.</span><span class="nf">new</span><span class="p">,</span> <span class="no">I18n</span><span class="p">.</span><span class="nf">backend</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.backend = I18n::Backend::Chain.new(I18n::Backend::ActiveRecord.new, I18n.backend)
">Copy</button>
</div>
<h4 id="using-different-exception-handlers"><a class="anchorlink" href="#using-different-exception-handlers">6.2 Using Different Exception Handlers</a></h4><p>The I18n API defines the following exceptions that will be raised by backends when the corresponding unexpected conditions occur:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">MissingTranslationData</span>       <span class="c1"># no translation was found for the requested key</span>
<span class="no">InvalidLocale</span>                <span class="c1"># the locale set to I18n.locale is invalid (e.g. nil)</span>
<span class="no">InvalidPluralizationData</span>     <span class="c1"># a count option was passed but the translation data is not suitable for pluralization</span>
<span class="no">MissingInterpolationArgument</span> <span class="c1"># the translation expects an interpolation argument that has not been passed</span>
<span class="no">ReservedInterpolationKey</span>     <span class="c1"># the translation contains a reserved interpolation variable name (i.e. one of: scope, default)</span>
<span class="no">UnknownFileType</span>              <span class="c1"># the backend does not know how to handle a file type that was added to I18n.load_path</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="MissingTranslationData       # no translation was found for the requested key
InvalidLocale                # the locale set to I18n.locale is invalid (e.g. nil)
InvalidPluralizationData     # a count option was passed but the translation data is not suitable for pluralization
MissingInterpolationArgument # the translation expects an interpolation argument that has not been passed
ReservedInterpolationKey     # the translation contains a reserved interpolation variable name (i.e. one of: scope, default)
UnknownFileType              # the backend does not know how to handle a file type that was added to I18n.load_path
">Copy</button>
</div>
<p>The I18n API will catch all of these exceptions when they are thrown in the backend and pass them to the default_exception_handler method. This method will re-raise all exceptions except for <code>MissingTranslationData</code> exceptions. When a <code>MissingTranslationData</code> exception has been caught, it will return the exception's error message string containing the missing key/scope.</p><p>The reason for this is that during development you'd usually want your views to still render even though a translation is missing.</p><p>In other contexts you might want to change this behavior, though. E.g. the default exception handling does not allow to catch missing translations during automated tests easily. For this purpose a different exception handler can be specified. The specified exception handler must be a method on the I18n module or a class with a <code>call</code> method:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">module</span> <span class="nn">I18n</span>
  <span class="k">class</span> <span class="nc">JustRaiseExceptionHandler</span> <span class="o">&lt;</span> <span class="no">ExceptionHandler</span>
    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="n">exception</span><span class="p">,</span> <span class="n">locale</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">exception</span><span class="p">.</span><span class="nf">is_a?</span><span class="p">(</span><span class="no">MissingTranslation</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">exception</span><span class="p">.</span><span class="nf">to_exception</span>
      <span class="k">else</span>
        <span class="k">super</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">I18n</span><span class="p">.</span><span class="nf">exception_handler</span> <span class="o">=</span> <span class="no">I18n</span><span class="o">::</span><span class="no">JustRaiseExceptionHandler</span><span class="p">.</span><span class="nf">new</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="module I18n
  class JustRaiseExceptionHandler &lt; ExceptionHandler
    def call(exception, locale, key, options)
      if exception.is_a?(MissingTranslation)
        raise exception.to_exception
      else
        super
      end
    end
  end
end

I18n.exception_handler = I18n::JustRaiseExceptionHandler.new
">Copy</button>
</div>
<p>This would re-raise only the <code>MissingTranslationData</code> exception, passing all other input to the default exception handler.</p><p>However, if you are using <code>I18n::Backend::Pluralization</code> this handler will also raise <code>I18n::MissingTranslationData: translation missing: en.i18n.plural.rule</code> exception that should normally be ignored to fall back to the default pluralization rule for English locale. To avoid this you may use an additional check for the translation key:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">if</span> <span class="n">exception</span><span class="p">.</span><span class="nf">is_a?</span><span class="p">(</span><span class="no">MissingTranslation</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">key</span><span class="p">.</span><span class="nf">to_s</span> <span class="o">!=</span> <span class="s1">'i18n.plural.rule'</span>
  <span class="k">raise</span> <span class="n">exception</span><span class="p">.</span><span class="nf">to_exception</span>
<span class="k">else</span>
  <span class="k">super</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="if exception.is_a?(MissingTranslation) &amp;&amp; key.to_s != 'i18n.plural.rule'
  raise exception.to_exception
else
  super
end
">Copy</button>
</div>
<p>Another example where the default behavior is less desirable is the Rails TranslationHelper which provides the method <code>#t</code> (as well as <code>#translate</code>). When a <code>MissingTranslationData</code> exception occurs in this context, the helper wraps the message into a span with the CSS class <code>translation_missing</code>.</p><p>To do so, the helper forces <code>I18n#translate</code> to raise exceptions no matter what exception handler is defined by setting the <code>:raise</code> option:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">I18n</span><span class="p">.</span><span class="nf">t</span> <span class="ss">:foo</span><span class="p">,</span> <span class="ss">raise: </span><span class="kp">true</span> <span class="c1"># always re-raises exceptions from the backend</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="I18n.t :foo, raise: true # always re-raises exceptions from the backend
">Copy</button>
</div>
<h3 id="translating-model-content"><a class="anchorlink" href="#translating-model-content">7 Translating Model Content</a></h3><p>The I18n API described in this guide is primarily intended for translating interface strings. If you are looking to translate model content (e.g. blog posts), you will need a different solution to help with this.</p><p>Several gems can help with this:</p>
<ul>
<li>
<a href="https://github.com/shioyama/mobility">Mobility</a>: Provides support for storing translations in many formats, including translation tables, json columns (PostgreSQL), etc.</li>
<li>
<a href="https://github.com/barsoom/traco">Traco</a>: Translatable columns stored in the model table itself</li>
</ul>
<h3 id="conclusion"><a class="anchorlink" href="#conclusion">8 Conclusion</a></h3><p>At this point you should have a good overview about how I18n support in Ruby on Rails works and are ready to start translating your project.</p><h3 id="contributing-to-rails-i18n"><a class="anchorlink" href="#contributing-to-rails-i18n">9 Contributing to Rails I18n</a></h3><p>I18n support in Ruby on Rails was introduced in the release 2.2 and is still evolving. The project follows the good Ruby on Rails development tradition of evolving solutions in gems and real applications first, and only then cherry-picking the best-of-breed of most widely useful features for inclusion in the core.</p><p>Thus we encourage everybody to experiment with new ideas and features in gems or other libraries and make them available to the community. (Don't forget to announce your work on our <a href="https://groups.google.com/forum/#!forum/rails-i18n">mailing list</a>!)</p><p>If you find your own locale (language) missing from our <a href="https://github.com/svenfuchs/rails-i18n/tree/master/rails/locale">example translations data</a> repository for Ruby on Rails, please <a href="https://github.com/guides/fork-a-project-and-submit-your-modifications"><em>fork</em></a> the repository, add your data, and send a <a href="https://help.github.com/articles/about-pull-requests/">pull request</a>.</p><h3 id="resources"><a class="anchorlink" href="#resources">10 Resources</a></h3>
<ul>
<li>
<a href="https://groups.google.com/g/rails-i18n">Google group: rails-i18n</a> - The project's mailing list.</li>
<li>
<a href="https://github.com/svenfuchs/rails-i18n">GitHub: rails-i18n</a> - Code repository and issue tracker for the rails-i18n project. Most importantly you can find lots of <a href="https://github.com/svenfuchs/rails-i18n/tree/master/rails/locale">example translations</a> for Rails that should work for your application in most cases.</li>
<li>
<a href="https://github.com/svenfuchs/i18n">GitHub: i18n</a> - Code repository and issue tracker for the i18n gem.</li>
</ul>
<h3 id="authors"><a class="anchorlink" href="#authors">11 Authors</a></h3>
<ul>
<li>
<a href="http://svenfuchs.com">Sven Fuchs</a> (initial author)</li>
<li><a href="http://www.karmi.cz">Karel Minařík</a></li>
</ul>
<h3 id="footnotes"><a class="anchorlink" href="#footnotes">12 Footnotes</a></h3><p class="footnote" id="footnote-1"><a href="#footnote-1-ref"><sup>1</sup></a> Or, to quote <a href="https://en.wikipedia.org/wiki/Internationalization_and_localization">Wikipedia</a>: <em>"Internationalization is the process of designing a software application so that it can be adapted to various languages and regions without engineering changes. Localization is the process of adapting software for a specific region or language by adding locale-specific components and translating text."</em></p><p class="footnote" id="footnote-2"><a href="#footnote-2-ref"><sup>2</sup></a> Other backends might allow or require to use other formats, e.g. a GetText backend might allow to read GetText files.</p><p class="footnote" id="footnote-3"><a href="#footnote-3-ref"><sup>3</sup></a> One of these reasons is that we don't want to imply any unnecessary load for applications that do not need any I18n capabilities, so we need to keep the I18n library as simple as possible for English. Another reason is that it is virtually impossible to implement a one-fits-all solution for all problems related to I18n for all existing languages. So a solution that allows us to exchange the entire implementation easily is appropriate anyway. This also makes it much easier to experiment with custom features and extensions.</p>

        <h3>Feedback</h3>
        <p>
          Você é incentivado a ajudar a melhorar a qualidade deste guia.
        </p>
        <p>
          Por favor, contribua caso veja quaisquer erros, inclusive erros de digitação.
          Para começar, você pode ler nossa sessão de <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">contribuindo com a documentação</a>.
        </p>
        <p>
          Você também pode encontrar conteúdo incompleto ou coisas que não estão atualizadas.
          Por favor, adicione qualquer documentação em falta na main do Rails. Certifique-se de checar o
          <a href="http://edgeguides.rubyonrails.org">Edge Guides (en-US)</a> primeiro para verificar
          se o problema já foi resolvido ou não no branch main.
          Verifique as <a href="ruby_on_rails_guides_guidelines.html">Diretrizes do Guia Ruby on Rails</a>
          para estilo e convenções.
        </p>
        <p>
          Se, por qualquer motivo, você encontrar algo para consertar, mas não conseguir consertá-lo, por favor
          <a href="https://github.com/campuscode/rails-guides-pt-BR/issues">abra uma issue no nosso Guia</a>.
        </p>
        <p>
          E por último, mas não menos importante, qualquer tipo de discussão sobre a documentação do Ruby on Rails
          é muito bem vinda na <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs">forum oficial do Ruby on Rails</a> e nas
          <a href="https://github.com/campuscode/rails-guides-pt-BR/issues">issues do Guia em português</a>.
        </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p> Este projeto está licenciado sob uma licença <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a></p>
<p>"Rails", "Ruby on Rails", e o logotipo Rails são marcas comerciais de David Heinemeier Hansson. Todos os direitos reservados.</p>

    </div>
  </div>
  <div id="toggle">
    <img alt="dark theme icon" class="icon">
  </div>
</body>
</html>
